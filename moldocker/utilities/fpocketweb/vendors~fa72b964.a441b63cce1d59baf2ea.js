(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{VS3o:function($c,Hd,Id){(function(Td,bb){!function($a,a){"object"==typeof $c.exports?$c.exports=$a.document?a($a,!0):function(d){if(!d.document)throw Error("jQuery requires a window with a document");return a(d)}:a($a)}("undefined"!=typeof window?window:this,function($a,a){function d(b,f,A){var I,O,X=(A=A||fb).createElement("script");if(X.text=b,f)for(I in ka)(O=f[I]||f.getAttribute&&f.getAttribute(I))&&X.setAttribute(I,O);A.head.appendChild(X).parentNode.removeChild(X)}
function h(b){return null==b?b+"":"object"==typeof b||"function"==typeof b?xb[Kb.call(b)]||"object":typeof b}function q(b){var f=!!b&&"length"in b&&b.length,A=h(b);return!Va(b)&&!ob(b)&&("array"===A||0===f||"number"==typeof f&&0<f&&f-1 in b)}function x(b,f){return b.nodeName&&b.nodeName.toLowerCase()===f.toLowerCase()}function p(b,f,A){return Va(f)?t.grep(b,function(I,O){return!!f.call(I,O,I)!==A}):f.nodeType?t.grep(b,function(I){return I===f!==A}):"string"!=typeof f?t.grep(b,function(I){return-1<
Lb.call(f,I)!==A}):t.filter(f,b,A)}function w(b,f){for(;(b=b[f])&&1!==b.nodeType;);return b}function v(b){return b}function C(b){throw b;}function M(b,f,A,I){var O;try{b&&Va(O=b.promise)?O.call(b).done(f).fail(A):b&&Va(O=b.then)?O.call(b,f,A):f.apply(void 0,[b].slice(I))}catch(X){A.apply(void 0,[X])}}function L(){fb.removeEventListener("DOMContentLoaded",L);$a.removeEventListener("load",L);t.ready()}function P(b,f){return f.toUpperCase()}function e(b){return b.replace(Gb,"ms-").replace(tb,P)}function g(){this.expando=
t.expando+g.uid++}function u(b,f,A){var I;if(void 0===A&&1===b.nodeType)if(I="data-"+f.replace(Zb,"-$&").toLowerCase(),"string"==typeof(A=b.getAttribute(I))){try{I=A,A="true"===I||"false"!==I&&("null"===I?null:I===+I+""?+I:jc.test(I)?JSON.parse(I):I)}catch(O){}Ab.set(b,f,A)}else A=void 0;return A}function n(b,f,A,I){var O,X,da=20,ma=I?function(){return I.cur()}:function(){return t.css(b,f,"")},oa=ma(),wa=A&&A[3]||(t.cssNumber[f]?"":"px"),Da=b.nodeType&&(t.cssNumber[f]||"px"!==wa&&+oa)&&r.exec(t.css(b,
f));if(Da&&Da[3]!==wa){oa/=2;wa=wa||Da[3];for(Da=+oa||1;da--;)t.style(b,f,Da+wa),0>=(1-X)*(1-(X=ma()/oa||.5))&&(da=0),Da/=X;Da*=2;t.style(b,f,Da+wa);A=A||[]}return A&&(Da=+Da||+oa||0,O=A[1]?Da+(A[1]+1)*A[2]:+A[2],I&&(I.unit=wa,I.start=Da,I.end=O)),O}function y(b,f){for(var A,I,O=[],X=0,da=b.length;X<da;X++)if((I=b[X]).style)if(A=I.style.display,f){if("none"===A&&(O[X]=Qa.get(I,"display")||null,O[X]||(I.style.display="")),""===I.style.display&&Aa(I)){A=X;var ma=void 0;var oa=I.ownerDocument;I=I.nodeName;
var wa=xa[I];oa=wa||(ma=oa.body.appendChild(oa.createElement(I)),wa=t.css(ma,"display"),ma.parentNode.removeChild(ma),"none"===wa&&(wa="block"),xa[I]=wa,wa);O[A]=oa}}else"none"!==A&&(O[X]="none",Qa.set(I,"display",A));for(X=0;X<da;X++)null!=O[X]&&(b[X].style.display=O[X]);return b}function D(b,f){var A;return A=void 0!==b.getElementsByTagName?b.getElementsByTagName(f||"*"):void 0!==b.querySelectorAll?b.querySelectorAll(f||"*"):[],void 0===f||f&&x(b,f)?t.merge([b],A):A}function l(b,f){for(var A=0,
I=b.length;A<I;A++)Qa.set(b[A],"globalEval",!f||Qa.get(f[A],"globalEval"))}function B(b,f,A,I,O){for(var X,da,ma,oa,wa=f.createDocumentFragment(),Da=[],ua=0,Pa=b.length;ua<Pa;ua++)if((X=b[ua])||0===X)if("object"===h(X))t.merge(Da,X.nodeType?[X]:X);else if(sb.test(X)){da=da||wa.appendChild(f.createElement("div"));ma=(za.exec(X)||["",""])[1].toLowerCase();ma=Ma[ma]||Ma._default;da.innerHTML=ma[1]+t.htmlPrefilter(X)+ma[2];for(ma=ma[0];ma--;)da=da.lastChild;t.merge(Da,da.childNodes);(da=wa.firstChild).textContent=
""}else Da.push(f.createTextNode(X));wa.textContent="";for(ua=0;X=Da[ua++];)if(I&&-1<t.inArray(X,I))O&&O.push(X);else if(oa=ja(X),da=D(wa.appendChild(X),"script"),oa&&l(da),A)for(ma=0;X=da[ma++];)Sa.test(X.type||"")&&A.push(X);return wa}function k(){return!0}function J(){return!1}function m(b,f){a:{try{var A=fb.activeElement;break a}catch(I){}A=void 0}return b===A==("focus"===f)}function K(b,f,A,I,O,X){var da,ma;if("object"==typeof f){for(ma in"string"!=typeof A&&(I=I||A,A=void 0),f)K(b,ma,A,I,f[ma],
X);return b}if(null==I&&null==O?(O=A,I=A=void 0):null==O&&("string"==typeof A?(O=I,I=void 0):(O=I,I=A,A=void 0)),!1===O)O=J;else if(!O)return b;return 1===X&&(da=O,(O=function(oa){return t().off(oa),da.apply(this,arguments)}).guid=da.guid||(da.guid=t.guid++)),b.each(function(){t.event.add(this,f,O,I,A)})}function N(b,f,A){A?(Qa.set(b,f,!1),t.event.add(b,f,{namespace:!1,handler:function(I){var O,X,da=Qa.get(this,f);if(1&I.isTrigger&&this[f])if(da.length)(t.event.special[f]||{}).delegateType&&I.stopPropagation();
else{if(da=hb.call(arguments),Qa.set(this,f,da),O=A(this,f),this[f](),da!==(X=Qa.get(this,f))||O?Qa.set(this,f,!1):X={},da!==X)return I.stopImmediatePropagation(),I.preventDefault(),X.value}else da.length&&(Qa.set(this,f,{value:t.event.trigger(t.extend(da[0],t.Event.prototype),da.slice(1),this)}),I.stopImmediatePropagation())}})):void 0===Qa.get(b,f)&&t.event.add(b,f,k)}function Q(b,f){return x(b,"table")&&x(11!==f.nodeType?f:f.firstChild,"tr")&&t(b).children("tbody")[0]||b}function H(b){return b.type=
(null!==b.getAttribute("type"))+"/"+b.type,b}function V(b){return"true/"===(b.type||"").slice(0,5)?b.type=b.type.slice(5):b.removeAttribute("type"),b}function W(b,f){var A,I,O,X,da;if(1===f.nodeType){if(Qa.hasData(b)&&(da=Qa.get(b).events))for(I in Qa.remove(f,"handle events"),da){var ma=0;for(A=da[I].length;ma<A;ma++)t.event.add(f,I,da[I][ma])}Ab.hasData(b)&&(O=Ab.access(b),X=t.extend({},O),Ab.set(f,X))}}function ha(b,f,A,I){f=Xb(f);var O,X,da,ma=0,oa=b.length,wa=oa-1,Da=f[0],ua=Va(Da);if(ua||1<
oa&&"string"==typeof Da&&!ab.checkClone&&sc.test(Da))return b.each(function(cb){var Wa=b.eq(cb);ua&&(f[0]=Da.call(this,cb,Wa.html()));ha(Wa,f,A,I)});if(oa&&(X=(O=B(f,b[0].ownerDocument,!1,b,I)).firstChild,1===O.childNodes.length&&(O=X),X||I)){for(da=(X=t.map(D(O,"script"),H)).length;ma<oa;ma++){var Pa=O;ma!==wa&&(Pa=t.clone(Pa,!0,!0),da&&t.merge(X,D(Pa,"script")));A.call(b[ma],Pa,ma)}if(da)for(O=X[X.length-1].ownerDocument,t.map(X,V),ma=0;ma<da;ma++)Pa=X[ma],Sa.test(Pa.type||"")&&!Qa.access(Pa,"globalEval")&&
t.contains(O,Pa)&&(Pa.src&&"module"!==(Pa.type||"").toLowerCase()?t._evalUrl&&!Pa.noModule&&t._evalUrl(Pa.src,{nonce:Pa.nonce||Pa.getAttribute("nonce")},O):d(Pa.textContent.replace(xc,""),Pa,O))}return b}function U(b,f,A){for(var I=f?t.filter(f,b):b,O=0;null!=(f=I[O]);O++)A||1!==f.nodeType||t.cleanData(D(f)),f.parentNode&&(A&&ja(f)&&l(D(f,"script")),f.parentNode.removeChild(f));return b}function S(b,f,A){var I,O,X,da,ma=b.style;return(A=A||$b(b))&&(""!==(da=A.getPropertyValue(f)||A[f])||ja(b)||(da=
t.style(b,f)),!ab.pixelBoxStyles()&&Gc.test(da)&&kc.test(f)&&(I=ma.width,O=ma.minWidth,X=ma.maxWidth,ma.minWidth=ma.maxWidth=ma.width=da,da=A.width,ma.width=I,ma.minWidth=O,ma.maxWidth=X)),void 0!==da?da+"":da}function ba(b,f){return{get:function(){if(!b())return(this.get=f).apply(this,arguments);delete this.get}}}function Y(b){var f;if(!(f=t.cssProps[b]||Sb[b])){if(!(b in Vc)){a:{f=b;for(var A=f[0].toUpperCase()+f.slice(1),I=lb.length;I--;)if((f=lb[I]+A)in Vc)break a;f=void 0}b=Sb[b]=f||b}f=b}return f}
function aa(b,f,A){return(b=r.exec(f))?Math.max(0,b[2]-(A||0))+(b[3]||"px"):f}function ia(b,f,A,I,O,X){var da="width"===f?1:0,ma=0,oa=0;if(A===(I?"border":"content"))return 0;for(;4>da;da+=2)"margin"===A&&(oa+=t.css(b,A+E[da],!0,O)),I?("content"===A&&(oa-=t.css(b,"padding"+E[da],!0,O)),"margin"!==A&&(oa-=t.css(b,"border"+E[da]+"Width",!0,O))):(oa+=t.css(b,"padding"+E[da],!0,O),"padding"!==A?oa+=t.css(b,"border"+E[da]+"Width",!0,O):ma+=t.css(b,"border"+E[da]+"Width",!0,O));return!I&&0<=X&&(oa+=Math.max(0,
Math.ceil(b["offset"+f[0].toUpperCase()+f.slice(1)]-X-oa-ma-.5))||0),oa}function z(b,f,A){var I=$b(b),O=(!ab.boxSizingReliable()||A)&&"border-box"===t.css(b,"boxSizing",!1,I),X=O,da=S(b,f,I),ma="offset"+f[0].toUpperCase()+f.slice(1);if(Gc.test(da)){if(!A)return da;da="auto"}return(!ab.boxSizingReliable()&&O||!ab.reliableTrDimensions()&&x(b,"tr")||"auto"===da||!parseFloat(da)&&"inline"===t.css(b,"display",!1,I))&&b.getClientRects().length&&(O="border-box"===t.css(b,"boxSizing",!1,I),(X=ma in b)&&(da=
b[ma])),(da=parseFloat(da)||0)+ia(b,f,A||(O?"border":"content"),X,I,da)+"px"}function G(b,f,A,I,O){return new G.prototype.init(b,f,A,I,O)}function F(){yb&&(!1===fb.hidden&&$a.requestAnimationFrame?$a.requestAnimationFrame(F):$a.setTimeout(F,t.fx.interval),t.fx.tick())}function R(){return $a.setTimeout(function(){Ob=void 0}),Ob=Date.now()}function T(b,f){var A,I=0,O={height:b};for(f=f?1:0;4>I;I+=2-f)O["margin"+(A=E[I])]=O["padding"+A]=b;return f&&(O.opacity=O.width=b),O}function fa(b,f,A){for(var I,
O=(Z.tweeners[f]||[]).concat(Z.tweeners["*"]),X=0,da=O.length;X<da;X++)if(I=O[X].call(A,f,b))return I}function Z(b,f,A){var I,O=0,X=Z.prefilters.length,da=t.Deferred().always(function(){delete ma.elem}),ma=function(){if(I)return!1;var wa=Ob||R();wa=Math.max(0,oa.startTime+oa.duration-wa);for(var Da=1-(wa/oa.duration||0),ua=0,Pa=oa.tweens.length;ua<Pa;ua++)oa.tweens[ua].run(Da);return da.notifyWith(b,[oa,Da,wa]),1>Da&&Pa?wa:(Pa||da.notifyWith(b,[oa,1,0]),da.resolveWith(b,[oa]),!1)},oa=da.promise({elem:b,
props:t.extend({},f),opts:t.extend(!0,{specialEasing:{},easing:t.easing._default},A),originalProperties:f,originalOptions:A,startTime:Ob||R(),duration:A.duration,tweens:[],createTween:function(wa,Da){wa=t.Tween(b,oa.opts,wa,Da,oa.opts.specialEasing[wa]||oa.opts.easing);return oa.tweens.push(wa),wa},stop:function(wa){var Da=0,ua=wa?oa.tweens.length:0;if(I)return this;for(I=!0;Da<ua;Da++)oa.tweens[Da].run(1);return wa?(da.notifyWith(b,[oa,1,0]),da.resolveWith(b,[oa,wa])):da.rejectWith(b,[oa,wa]),this}});
A=oa.props;(function(wa,Da){var ua,Pa,cb,Wa,ub;for(ua in wa)if(cb=Da[Pa=e(ua)],Wa=wa[ua],Array.isArray(Wa)&&(cb=Wa[1],Wa=wa[ua]=Wa[0]),ua!==Pa&&(wa[Pa]=Wa,delete wa[ua]),(ub=t.cssHooks[Pa])&&"expand"in ub)for(ua in Wa=ub.expand(Wa),delete wa[Pa],Wa)ua in wa||(wa[ua]=Wa[ua],Da[ua]=cb);else Da[Pa]=cb})(A,oa.opts.specialEasing);for(;O<X;O++)if(f=Z.prefilters[O].call(oa,b,A,oa.opts))return Va(f.stop)&&(t._queueHooks(oa.elem,oa.opts.queue).stop=f.stop.bind(f)),f;return t.map(A,fa,oa),Va(oa.opts.start)&&
oa.opts.start.call(b,oa),oa.progress(oa.opts.progress).done(oa.opts.done,oa.opts.complete).fail(oa.opts.fail).always(oa.opts.always),t.fx.timer(t.extend(ma,{elem:b,anim:oa,queue:oa.opts.queue})),oa}function qa(b){return(b.match(mb)||[]).join(" ")}function na(b){return b.getAttribute&&b.getAttribute("class")||""}function ta(b){return Array.isArray(b)?b:"string"==typeof b&&b.match(mb)||[]}function pa(b,f,A,I){var O;if(Array.isArray(f))t.each(f,function(X,da){A||Oc.test(b)?I(b,da):pa(b+"["+("object"==
typeof da&&null!=da?X:"")+"]",da,A,I)});else if(A||"object"!==h(f))I(b,f);else for(O in f)pa(b+"["+O+"]",f[O],A,I)}function Fa(b){return function(f,A){"string"!=typeof f&&(A=f,f="*");var I=0,O=f.toLowerCase().match(mb)||[];if(Va(A))for(;f=O[I++];)"+"===f[0]?(f=f.slice(1)||"*",(b[f]=b[f]||[]).unshift(A)):(b[f]=b[f]||[]).push(A)}}function Ga(b,f,A,I){function O(ma){var oa;return X[ma]=!0,t.each(b[ma]||[],function(wa,Da){wa=Da(f,A,I);return"string"!=typeof wa||da||X[wa]?da?!(oa=wa):void 0:(f.dataTypes.unshift(wa),
O(wa),!1)}),oa}var X={},da=b===Sc;return O(f.dataTypes[0])||!X["*"]&&O("*")}function Ha(b,f){var A,I,O=t.ajaxSettings.flatOptions||{};for(A in f)void 0!==f[A]&&((O[A]?b:I||={})[A]=f[A]);return I&&t.extend(!0,b,I),b}var Ja=[],Na=Object.getPrototypeOf,hb=Ja.slice,Xb=Ja.flat?function(b){return Ja.flat.call(b)}:function(b){return Ja.concat.apply([],b)},Pb=Ja.push,Lb=Ja.indexOf,xb={},Kb=xb.toString,qb=xb.hasOwnProperty,dc=qb.toString,tc=dc.call(Object),ab={},Va=function(b){return"function"==typeof b&&
"number"!=typeof b.nodeType},ob=function(b){return null!=b&&b===b.window},fb=$a.document,ka={type:!0,src:!0,nonce:!0,noModule:!0},t=function(b,f){return new t.fn.init(b,f)};t.fn=t.prototype={jquery:"3.5.0",constructor:t,length:0,toArray:function(){return hb.call(this)},get:function(b){return null==b?hb.call(this):0>b?this[b+this.length]:this[b]},pushStack:function(b){b=t.merge(this.constructor(),b);return b.prevObject=this,b},each:function(b){return t.each(this,b)},map:function(b){return this.pushStack(t.map(this,
function(f,A){return b.call(f,A,f)}))},slice:function(){return this.pushStack(hb.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(t.grep(this,function(b,f){return(f+1)%2}))},odd:function(){return this.pushStack(t.grep(this,function(b,f){return f%2}))},eq:function(b){var f=this.length;b=+b+(0>b?f:0);return this.pushStack(0<=b&&b<f?[this[b]]:[])},end:function(){return this.prevObject||this.constructor()},push:Pb,sort:Ja.sort,
splice:Ja.splice};t.extend=t.fn.extend=function(){var b,f,A,I,O,X=arguments[0]||{},da=1,ma=arguments.length,oa=!1;"boolean"==typeof X&&(oa=X,X=arguments[da]||{},da++);"object"==typeof X||Va(X)||(X={});for(da===ma&&(X=this,da--);da<ma;da++)if(null!=(b=arguments[da]))for(f in b){var wa=b[f];"__proto__"!==f&&X!==wa&&(oa&&wa&&(t.isPlainObject(wa)||(I=Array.isArray(wa)))?(A=X[f],O=I&&!Array.isArray(A)?[]:I||t.isPlainObject(A)?A:{},I=!1,X[f]=t.extend(oa,O,wa)):void 0!==wa&&(X[f]=wa))}return X};t.extend({expando:"jQuery"+
("3.5.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(b){throw Error(b);},noop:function(){},isPlainObject:function(b){var f,A;return!(!b||"[object Object]"!==Kb.call(b)||(f=Na(b))&&("function"!=typeof(A=qb.call(f,"constructor")&&f.constructor)||dc.call(A)!==tc))},isEmptyObject:function(b){for(var f in b)return!1;return!0},globalEval:function(b,f,A){d(b,{nonce:f&&f.nonce},A)},each:function(b,f){var A,I=0;if(q(b))for(A=b.length;I<A&&!1!==f.call(b[I],I,b[I]);I++);else for(I in b)if(!1===
f.call(b[I],I,b[I]))break;return b},makeArray:function(b,f){f=f||[];return null!=b&&(q(Object(b))?t.merge(f,"string"==typeof b?[b]:b):Pb.call(f,b)),f},inArray:function(b,f,A){return null==f?-1:Lb.call(f,b,A)},merge:function(b,f){for(var A=+f.length,I=0,O=b.length;I<A;I++)b[O++]=f[I];return b.length=O,b},grep:function(b,f,A){var I=[],O=0,X=b.length;for(A=!A;O<X;O++)!f(b[O],O)!==A&&I.push(b[O]);return I},map:function(b,f,A){var I,O,X=0,da=[];if(q(b))for(I=b.length;X<I;X++)null!=(O=f(b[X],X,A))&&da.push(O);
else for(X in b)null!=(O=f(b[X],X,A))&&da.push(O);return Xb(da)},guid:1,support:ab});"function"==typeof Symbol&&(t.fn[Symbol.iterator]=Ja[Symbol.iterator]);t.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(b,f){xb["[object "+f+"]"]=f.toLowerCase()});var Ia=function(b){function f(ca,la,sa,ra){var ya,Ka,La,db,Oa=la&&la.ownerDocument;var ib=la?la.nodeType:9;if(sa=sa||[],"string"!=typeof ca||!ca||1!==ib&&9!==ib&&11!==ib)return sa;if(!ra&&(Hc(la),la=la||
pb,ic)){if(11!==ib&&(db=Ud.exec(ca)))if(ya=db[1])if(9===ib){if(!(Ka=la.getElementById(ya)))return sa;if(Ka.id===ya)return sa.push(Ka),sa}else{if(Oa&&(Ka=Oa.getElementById(ya))&&Tb(la,Ka)&&Ka.id===ya)return sa.push(Ka),sa}else{if(db[2])return ad.apply(sa,la.getElementsByTagName(ca)),sa;if((ya=db[3])&&Ya.getElementsByClassName&&la.getElementsByClassName)return ad.apply(sa,la.getElementsByClassName(ya)),sa}if(!(!Ya.qsa||td[ca+" "]||ac&&ac.test(ca)||1===ib&&"object"===la.nodeName.toLowerCase())){if(ya=
ca,Oa=la,1===ib&&(Vd.test(ca)||Jd.test(ca))){(Oa=Cd.test(ca)&&ua(la.parentNode)||la)===la&&Ya.scope||((La=la.getAttribute("id"))?La=La.replace(Kd,Ld):la.setAttribute("id",La=rb));for(ib=(ya=bd(ca)).length;ib--;)ya[ib]=(La?"#"+La:":scope")+" "+cb(ya[ib]);ya=ya.join(",")}try{return ad.apply(sa,Oa.querySelectorAll(ya)),sa}catch(Bb){td(ca,!0)}finally{La===rb&&la.removeAttribute("id")}}}return Pc(ca.replace(ud,"$1"),la,sa,ra)}function A(){var ca=[];return function ya(sa,ra){return ca.push(sa+" ")>nb.cacheLength&&
delete ya[ca.shift()],ya[sa+" "]=ra}}function I(ca){return ca[rb]=!0,ca}function O(ca){var la=pb.createElement("fieldset");try{return!!ca(la)}catch(sa){return!1}finally{la.parentNode&&la.parentNode.removeChild(la)}}function X(ca,la){ca=ca.split("|");for(var sa=ca.length;sa--;)nb.attrHandle[ca[sa]]=la}function da(ca,la){var sa=la&&ca,ra=sa&&1===ca.nodeType&&1===la.nodeType&&ca.sourceIndex-la.sourceIndex;if(ra)return ra;if(sa)for(;sa=sa.nextSibling;)if(sa===la)return-1;return ca?1:-1}function ma(ca){return function(la){return"input"===
la.nodeName.toLowerCase()&&la.type===ca}}function oa(ca){return function(la){var sa=la.nodeName.toLowerCase();return("input"===sa||"button"===sa)&&la.type===ca}}function wa(ca){return function(la){return"form"in la?la.parentNode&&!1===la.disabled?"label"in la?"label"in la.parentNode?la.parentNode.disabled===ca:la.disabled===ca:la.isDisabled===ca||la.isDisabled!==!ca&&Wd(la)===ca:la.disabled===ca:"label"in la&&la.disabled===ca}}function Da(ca){return I(function(la){return la=+la,I(function(sa,ra){for(var ya,
Ka=ca([],sa.length,la),La=Ka.length;La--;)sa[ya=Ka[La]]&&(sa[ya]=!(ra[ya]=sa[ya]))})})}function ua(ca){return ca&&void 0!==ca.getElementsByTagName&&ca}function Pa(){}function cb(ca){for(var la=0,sa=ca.length,ra="";la<sa;la++)ra+=ca[la].value;return ra}function Wa(ca,la,sa){var ra=la.dir,ya=la.next,Ka=ya||ra,La=sa&&"parentNode"===Ka,db=Tc++;return la.first?function(Oa,ib,Bb){for(;Oa=Oa[ra];)if(1===Oa.nodeType||La)return ca(Oa,ib,Bb);return!1}:function(Oa,ib,Bb){var ec,fc,vb,Qb=[Vb,db];if(Bb)for(;Oa=
Oa[ra];){if((1===Oa.nodeType||La)&&ca(Oa,ib,Bb))return!0}else for(;Oa=Oa[ra];)if(1===Oa.nodeType||La)if(fc=(vb=Oa[rb]||(Oa[rb]={}))[Oa.uniqueID]||(vb[Oa.uniqueID]={}),ya&&ya===Oa.nodeName.toLowerCase())Oa=Oa[ra]||Oa;else{if((ec=fc[Ka])&&ec[0]===Vb&&ec[1]===db)return Qb[2]=ec[2];if(fc[Ka]=Qb,Qb[2]=ca(Oa,ib,Bb))return!0}return!1}}function ub(ca){return 1<ca.length?function(la,sa,ra){for(var ya=ca.length;ya--;)if(!ca[ya](la,sa,ra))return!1;return!0}:ca[0]}function pc(ca,la,sa,ra,ya){for(var Ka,La=[],
db=0,Oa=ca.length,ib=null!=la;db<Oa;db++)(Ka=ca[db])&&(sa&&!sa(Ka,ra,ya)||(La.push(Ka),ib&&la.push(db)));return La}function Qc(ca,la,sa,ra,ya,Ka){return ra&&!ra[rb]&&(ra=Qc(ra)),ya&&!ya[rb]&&(ya=Qc(ya,Ka)),I(function(La,db,Oa,ib){var Bb,ec=[],fc=[],vb=db.length,Qb;if(!(Qb=La)){Qb=la||"*";for(var Mb=Oa.nodeType?[Oa]:Oa,Bc=[],Ic=0,qc=Mb.length;Ic<qc;Ic++)f(Qb,Mb[Ic],Bc);Qb=Bc}Qb=!ca||!La&&la?Qb:pc(Qb,ec,ca,Oa,ib);Mb=sa?ya||(La?ca:vb||ra)?[]:db:Qb;if(sa&&sa(Qb,Mb,Oa,ib),ra){var gc=pc(Mb,fc);ra(gc,[],
Oa,ib);for(Oa=gc.length;Oa--;)(Bb=gc[Oa])&&(Mb[fc[Oa]]=!(Qb[fc[Oa]]=Bb))}if(La){if(ya||ca){if(ya){gc=[];for(Oa=Mb.length;Oa--;)(Bb=Mb[Oa])&&gc.push(Qb[Oa]=Bb);ya(null,Mb=[],gc,ib)}for(Oa=Mb.length;Oa--;)(Bb=Mb[Oa])&&-1<(gc=ya?ed(La,Bb):ec[Oa])&&(La[gc]=!(db[gc]=Bb))}}else Mb=pc(Mb===db?Mb.splice(vb,Mb.length):Mb),ya?ya(null,db,Mb,ib):ad.apply(db,Mb)})}function uc(ca){var la,sa,ra=ca.length,ya=nb.relative[ca[0].type];var Ka=ya||nb.relative[" "];for(var La=ya?1:0,db=Wa(function(Bb){return Bb===la},
Ka,!0),Oa=Wa(function(Bb){return-1<ed(la,Bb)},Ka,!0),ib=[function(Bb,ec,fc){Bb=!ya&&(fc||ec!==cd)||((la=ec).nodeType?db(Bb,ec,fc):Oa(Bb,ec,fc));return la=null,Bb}];La<ra;La++)if(Ka=nb.relative[ca[La].type])ib=[Wa(ub(ib),Ka)];else{if((Ka=nb.filter[ca[La].type].apply(null,ca[La].matches))[rb]){for(sa=++La;sa<ra&&!nb.relative[ca[sa].type];sa++);return Qc(1<La&&ub(ib),1<La&&cb(ca.slice(0,La-1).concat({value:" "===ca[La-2].type?"*":""})).replace(ud,"$1"),Ka,La<sa&&uc(ca.slice(La,sa)),sa<ra&&uc(ca=ca.slice(sa)),
sa<ra&&cb(ca))}ib.push(Ka)}return ub(ib)}var Jc,Ya,nb,wb,rc,bd,ld,Pc,cd,Kc,Lc,Hc,pb,Wb,ic,ac,Dc,vc,Tb,rb="sizzle"+1*new Date,mc=b.document,Vb=0,Tc=0,fd=A(),vd=A(),Md=A(),td=A(),Dd=function(ca,la){return ca===la&&(Lc=!0),0},Xd={}.hasOwnProperty,gd=[],Yd=gd.pop,Zd=gd.push,ad=gd.push,Nd=gd.slice,ed=function(ca,la){for(var sa=0,ra=ca.length;sa<ra;sa++)if(ca[sa]===la)return sa;return-1},$d=RegExp("[\\x20\\t\\r\\n\\f]+","g"),ud=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$",
"g"),ae=RegExp("^[\\x20\\t\\r\\n\\f]*,[\\x20\\t\\r\\n\\f]*"),Jd=RegExp("^[\\x20\\t\\r\\n\\f]*([>+~]|[\\x20\\t\\r\\n\\f])[\\x20\\t\\r\\n\\f]*"),Vd=RegExp("[\\x20\\t\\r\\n\\f]|>"),be=RegExp(":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
ce=RegExp("^(?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+$"),wd={ID:RegExp("^#((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),CLASS:RegExp("^\\.((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)"),TAG:RegExp("^((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+|[*])"),ATTR:RegExp("^\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\]"),
PSEUDO:RegExp("^:((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)"),
CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)",
"i")},de=/HTML$/i,ee=/^(?:input|select|textarea|button)$/i,fe=/^h\d$/i,md=/^[^{]+\{\s*\[native \w/,Ud=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Cd=/[+~]/,Wc=RegExp("\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\([^\\r\\n\\f])","g"),Xc=function(ca,la){ca="0x"+ca.slice(1)-65536;return la||(0>ca?String.fromCharCode(ca+65536):String.fromCharCode(ca>>10|55296,1023&ca|56320))},Kd=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,Ld=function(ca,la){return la?"\x00"===ca?"\ufffd":ca.slice(0,-1)+"\\"+ca.charCodeAt(ca.length-
1).toString(16)+" ":"\\"+ca},Od=function(){Hc()},Wd=Wa(function(ca){return!0===ca.disabled&&"fieldset"===ca.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{ad.apply(gd=Nd.call(mc.childNodes),mc.childNodes),gd[mc.childNodes.length].nodeType}catch(ca){ad={apply:gd.length?function(la,sa){Zd.apply(la,Nd.call(sa))}:function(la,sa){for(var ra=la.length,ya=0;la[ra++]=sa[ya++];);la.length=ra-1}}}for(Jc in Ya=f.support={},rc=f.isXML=function(ca){var la=(ca.ownerDocument||ca).documentElement;
return!de.test(ca.namespaceURI||la&&la.nodeName||"HTML")},Hc=f.setDocument=function(ca){var la,sa;ca=ca?ca.ownerDocument||ca:mc;return ca!=pb&&9===ca.nodeType&&ca.documentElement?(Wb=(pb=ca).documentElement,ic=!rc(pb),mc!=pb&&(sa=pb.defaultView)&&sa.top!==sa&&(sa.addEventListener?sa.addEventListener("unload",Od,!1):sa.attachEvent&&sa.attachEvent("onunload",Od)),Ya.scope=O(function(ra){return Wb.appendChild(ra).appendChild(pb.createElement("div")),void 0!==ra.querySelectorAll&&!ra.querySelectorAll(":scope fieldset div").length}),
Ya.attributes=O(function(ra){return ra.className="i",!ra.getAttribute("className")}),Ya.getElementsByTagName=O(function(ra){return ra.appendChild(pb.createComment("")),!ra.getElementsByTagName("*").length}),Ya.getElementsByClassName=md.test(pb.getElementsByClassName),Ya.getById=O(function(ra){return Wb.appendChild(ra).id=rb,!pb.getElementsByName||!pb.getElementsByName(rb).length}),Ya.getById?(nb.filter.ID=function(ra){var ya=ra.replace(Wc,Xc);return function(Ka){return Ka.getAttribute("id")===ya}},
nb.find.ID=function(ra,ya){if(void 0!==ya.getElementById&&ic)return(ra=ya.getElementById(ra))?[ra]:[]}):(nb.filter.ID=function(ra){var ya=ra.replace(Wc,Xc);return function(Ka){return(Ka=void 0!==Ka.getAttributeNode&&Ka.getAttributeNode("id"))&&Ka.value===ya}},nb.find.ID=function(ra,ya){if(void 0!==ya.getElementById&&ic){var Ka,La=ya.getElementById(ra);if(La){if((Ka=La.getAttributeNode("id"))&&Ka.value===ra)return[La];var db=ya.getElementsByName(ra);for(ya=0;La=db[ya++];)if((Ka=La.getAttributeNode("id"))&&
Ka.value===ra)return[La]}return[]}}),nb.find.TAG=Ya.getElementsByTagName?function(ra,ya){return void 0!==ya.getElementsByTagName?ya.getElementsByTagName(ra):Ya.qsa?ya.querySelectorAll(ra):void 0}:function(ra,ya){var Ka=[],La=0;ya=ya.getElementsByTagName(ra);if("*"===ra){for(;ra=ya[La++];)1===ra.nodeType&&Ka.push(ra);return Ka}return ya},nb.find.CLASS=Ya.getElementsByClassName&&function(ra,ya){if(void 0!==ya.getElementsByClassName&&ic)return ya.getElementsByClassName(ra)},Dc=[],ac=[],(Ya.qsa=md.test(pb.querySelectorAll))&&
(O(function(ra){var ya;Wb.appendChild(ra).innerHTML="<a id='"+rb+"'></a><select id='"+rb+"-\r\\' msallowcapture=''><option selected=''></option></select>";ra.querySelectorAll("[msallowcapture^='']").length&&ac.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");ra.querySelectorAll("[selected]").length||ac.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)");ra.querySelectorAll("[id~="+rb+"-]").length||
ac.push("~=");(ya=pb.createElement("input")).setAttribute("name","");ra.appendChild(ya);ra.querySelectorAll("[name='']").length||ac.push("\\[[\\x20\\t\\r\\n\\f]*name[\\x20\\t\\r\\n\\f]*=[\\x20\\t\\r\\n\\f]*(?:''|\"\")");ra.querySelectorAll(":checked").length||ac.push(":checked");ra.querySelectorAll("a#"+rb+"+*").length||ac.push(".#.+[+~]");ra.querySelectorAll("\\\f");ac.push("[\\r\\n\\f]")}),O(function(ra){ra.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
var ya=pb.createElement("input");ya.setAttribute("type","hidden");ra.appendChild(ya).setAttribute("name","D");ra.querySelectorAll("[name=d]").length&&ac.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?=");2!==ra.querySelectorAll(":enabled").length&&ac.push(":enabled",":disabled");Wb.appendChild(ra).disabled=!0;2!==ra.querySelectorAll(":disabled").length&&ac.push(":enabled",":disabled");ra.querySelectorAll("*,:x");ac.push(",.*:")})),(Ya.matchesSelector=md.test(vc=Wb.matches||Wb.webkitMatchesSelector||Wb.mozMatchesSelector||
Wb.oMatchesSelector||Wb.msMatchesSelector))&&O(function(ra){Ya.disconnectedMatch=vc.call(ra,"*");vc.call(ra,"[s!='']:x");Dc.push("!=",":((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\[\\da-fA-F]{1,6}[\\x20\\t\\r\\n\\f]?|\\\\[^\\r\\n\\f]|[\\w-]|[^\x00-\\x7f])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),
ac=ac.length&&new RegExp(ac.join("|")),Dc=Dc.length&&new RegExp(Dc.join("|")),la=md.test(Wb.compareDocumentPosition),Tb=la||md.test(Wb.contains)?function(ra,ya){var Ka=9===ra.nodeType?ra.documentElement:ra;ya=ya&&ya.parentNode;return ra===ya||!(!ya||1!==ya.nodeType||!(Ka.contains?Ka.contains(ya):ra.compareDocumentPosition&&16&ra.compareDocumentPosition(ya)))}:function(ra,ya){if(ya)for(;ya=ya.parentNode;)if(ya===ra)return!0;return!1},Dd=la?function(ra,ya){if(ra===ya)return Lc=!0,0;var Ka=!ra.compareDocumentPosition-
!ya.compareDocumentPosition;return Ka||(1&(Ka=(ra.ownerDocument||ra)==(ya.ownerDocument||ya)?ra.compareDocumentPosition(ya):1)||!Ya.sortDetached&&ya.compareDocumentPosition(ra)===Ka?ra==pb||ra.ownerDocument==mc&&Tb(mc,ra)?-1:ya==pb||ya.ownerDocument==mc&&Tb(mc,ya)?1:Kc?ed(Kc,ra)-ed(Kc,ya):0:4&Ka?-1:1)}:function(ra,ya){if(ra===ya)return Lc=!0,0;var Ka=0,La=ra.parentNode,db=ya.parentNode,Oa=[ra],ib=[ya];if(!La||!db)return ra==pb?-1:ya==pb?1:La?-1:db?1:Kc?ed(Kc,ra)-ed(Kc,ya):0;if(La===db)return da(ra,
ya);for(;ra=ra.parentNode;)Oa.unshift(ra);for(ra=ya;ra=ra.parentNode;)ib.unshift(ra);for(;Oa[Ka]===ib[Ka];)Ka++;return Ka?da(Oa[Ka],ib[Ka]):Oa[Ka]==mc?-1:ib[Ka]==mc?1:0},pb):pb},f.matches=function(ca,la){return f(ca,null,null,la)},f.matchesSelector=function(ca,la){if(Hc(ca),!(!Ya.matchesSelector||!ic||td[la+" "]||Dc&&Dc.test(la)||ac&&ac.test(la)))try{var sa=vc.call(ca,la);if(sa||Ya.disconnectedMatch||ca.document&&11!==ca.document.nodeType)return sa}catch(ra){td(la,!0)}return 0<f(la,pb,null,[ca]).length},
f.contains=function(ca,la){return(ca.ownerDocument||ca)!=pb&&Hc(ca),Tb(ca,la)},f.attr=function(ca,la){(ca.ownerDocument||ca)!=pb&&Hc(ca);var sa=nb.attrHandle[la.toLowerCase()];sa=sa&&Xd.call(nb.attrHandle,la.toLowerCase())?sa(ca,la,!ic):void 0;return void 0!==sa?sa:Ya.attributes||!ic?ca.getAttribute(la):(sa=ca.getAttributeNode(la))&&sa.specified?sa.value:null},f.escape=function(ca){return(ca+"").replace(Kd,Ld)},f.error=function(ca){throw Error("Syntax error, unrecognized expression: "+ca);},f.uniqueSort=
function(ca){var la,sa=[],ra=0,ya=0;if(Lc=!Ya.detectDuplicates,Kc=!Ya.sortStable&&ca.slice(0),ca.sort(Dd),Lc){for(;la=ca[ya++];)la===ca[ya]&&(ra=sa.push(ya));for(;ra--;)ca.splice(sa[ra],1)}return Kc=null,ca},wb=f.getText=function(ca){var la,sa="",ra=0;if(la=ca.nodeType)if(1===la||9===la||11===la){if("string"==typeof ca.textContent)return ca.textContent;for(ca=ca.firstChild;ca;ca=ca.nextSibling)sa+=wb(ca)}else{if(3===la||4===la)return ca.nodeValue}else for(;la=ca[ra++];)sa+=wb(la);return sa},(nb=f.selectors=
{cacheLength:50,createPseudo:I,match:wd,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ca){return ca[1]=ca[1].replace(Wc,Xc),ca[3]=(ca[3]||ca[4]||ca[5]||"").replace(Wc,Xc),"~="===ca[2]&&(ca[3]=" "+ca[3]+" "),ca.slice(0,4)},CHILD:function(ca){return ca[1]=ca[1].toLowerCase(),"nth"===ca[1].slice(0,3)?(ca[3]||f.error(ca[0]),ca[4]=+(ca[4]?ca[5]+(ca[6]||1):2*("even"===ca[3]||
"odd"===ca[3])),ca[5]=+(ca[7]+ca[8]||"odd"===ca[3])):ca[3]&&f.error(ca[0]),ca},PSEUDO:function(ca){var la,sa=!ca[6]&&ca[2];return wd.CHILD.test(ca[0])?null:(ca[3]?ca[2]=ca[4]||ca[5]||"":sa&&be.test(sa)&&(la=bd(sa,!0))&&(la=sa.indexOf(")",sa.length-la)-sa.length)&&(ca[0]=ca[0].slice(0,la),ca[2]=sa.slice(0,la)),ca.slice(0,3))}},filter:{TAG:function(ca){var la=ca.replace(Wc,Xc).toLowerCase();return"*"===ca?function(){return!0}:function(sa){return sa.nodeName&&sa.nodeName.toLowerCase()===la}},CLASS:function(ca){var la=
fd[ca+" "];return la||(la=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+ca+"([\\x20\\t\\r\\n\\f]|$)"),fd(ca,function(sa){return la.test("string"==typeof sa.className&&sa.className||void 0!==sa.getAttribute&&sa.getAttribute("class")||"")}))},ATTR:function(ca,la,sa){return function(ra){ra=f.attr(ra,ca);return null==ra?"!="===la:!la||(ra+="","="===la?ra===sa:"!="===la?ra!==sa:"^="===la?sa&&0===ra.indexOf(sa):"*="===la?sa&&-1<ra.indexOf(sa):"$="===la?sa&&ra.slice(-sa.length)===sa:"~="===la?-1<(" "+ra.replace($d,
" ")+" ").indexOf(sa):"|="===la&&(ra===sa||ra.slice(0,sa.length+1)===sa+"-"))}},CHILD:function(ca,la,sa,ra,ya){var Ka="nth"!==ca.slice(0,3),La="last"!==ca.slice(-4),db="of-type"===la;return 1===ra&&0===ya?function(Oa){return!!Oa.parentNode}:function(Oa,ib,Bb){var ec,fc,vb,Qb;ib=Ka!==La?"nextSibling":"previousSibling";var Mb=Oa.parentNode,Bc=db&&Oa.nodeName.toLowerCase(),Ic=!Bb&&!db,qc=!1;if(Mb){if(Ka){for(;ib;){for(vb=Oa;vb=vb[ib];)if(db?vb.nodeName.toLowerCase()===Bc:1===vb.nodeType)return!1;var gc=
ib="only"===ca&&!gc&&"nextSibling"}return!0}if(gc=[La?Mb.firstChild:Mb.lastChild],La&&Ic)for(qc=(Qb=(ec=(Bb=(fc=(vb=Mb)[rb]||(vb[rb]={}))[vb.uniqueID]||(fc[vb.uniqueID]={}))[ca]||[])[0]===Vb&&ec[1])&&ec[2],vb=Qb&&Mb.childNodes[Qb];vb=++Qb&&vb&&vb[ib]||(qc=Qb=0)||gc.pop();){if(1===vb.nodeType&&++qc&&vb===Oa){Bb[ca]=[Vb,Qb,qc];break}}else if(Ic&&(qc=Qb=(ec=((fc=(vb=Oa)[rb]||(vb[rb]={}))[vb.uniqueID]||(fc[vb.uniqueID]={}))[ca]||[])[0]===Vb&&ec[1]),!1===qc)for(;(vb=++Qb&&vb&&vb[ib]||(qc=Qb=0)||gc.pop())&&
((db?vb.nodeName.toLowerCase()!==Bc:1!==vb.nodeType)||!++qc||(Ic&&((Bb=(fc=vb[rb]||(vb[rb]={}))[vb.uniqueID]||(fc[vb.uniqueID]={}))[ca]=[Vb,qc]),vb!==Oa)););return(qc-=ya)===ra||0==qc%ra&&0<=qc/ra}}},PSEUDO:function(ca,la){var sa,ra=nb.pseudos[ca]||nb.setFilters[ca.toLowerCase()]||f.error("unsupported pseudo: "+ca);return ra[rb]?ra(la):1<ra.length?(sa=[ca,ca,"",la],nb.setFilters.hasOwnProperty(ca.toLowerCase())?I(function(ya,Ka){for(var La,db=ra(ya,la),Oa=db.length;Oa--;)ya[La=ed(ya,db[Oa])]=!(Ka[La]=
db[Oa])}):function(ya){return ra(ya,0,sa)}):ra}},pseudos:{not:I(function(ca){var la=[],sa=[],ra=ld(ca.replace(ud,"$1"));return ra[rb]?I(function(ya,Ka,La,db){var Oa;La=ra(ya,null,db,[]);for(db=ya.length;db--;)(Oa=La[db])&&(ya[db]=!(Ka[db]=Oa))}):function(ya,Ka,La){return la[0]=ya,ra(la,null,La,sa),la[0]=null,!sa.pop()}}),has:I(function(ca){return function(la){return 0<f(ca,la).length}}),contains:I(function(ca){return ca=ca.replace(Wc,Xc),function(la){return-1<(la.textContent||wb(la)).indexOf(ca)}}),
lang:I(function(ca){return ce.test(ca||"")||f.error("unsupported lang: "+ca),ca=ca.replace(Wc,Xc).toLowerCase(),function(la){var sa;do if(sa=ic?la.lang:la.getAttribute("xml:lang")||la.getAttribute("lang"))return(sa=sa.toLowerCase())===ca||0===sa.indexOf(ca+"-");while((la=la.parentNode)&&1===la.nodeType);return!1}}),target:function(ca){var la=b.location&&b.location.hash;return la&&la.slice(1)===ca.id},root:function(ca){return ca===Wb},focus:function(ca){return ca===pb.activeElement&&(!pb.hasFocus||
pb.hasFocus())&&!!(ca.type||ca.href||~ca.tabIndex)},enabled:wa(!1),disabled:wa(!0),checked:function(ca){var la=ca.nodeName.toLowerCase();return"input"===la&&!!ca.checked||"option"===la&&!!ca.selected},selected:function(ca){return ca.parentNode&&ca.parentNode.selectedIndex,!0===ca.selected},empty:function(ca){for(ca=ca.firstChild;ca;ca=ca.nextSibling)if(6>ca.nodeType)return!1;return!0},parent:function(ca){return!nb.pseudos.empty(ca)},header:function(ca){return fe.test(ca.nodeName)},input:function(ca){return ee.test(ca.nodeName)},
button:function(ca){var la=ca.nodeName.toLowerCase();return"input"===la&&"button"===ca.type||"button"===la},text:function(ca){var la;return"input"===ca.nodeName.toLowerCase()&&"text"===ca.type&&(null==(la=ca.getAttribute("type"))||"text"===la.toLowerCase())},first:Da(function(){return[0]}),last:Da(function(ca,la){return[la-1]}),eq:Da(function(ca,la,sa){return[0>sa?sa+la:sa]}),even:Da(function(ca,la){for(var sa=0;sa<la;sa+=2)ca.push(sa);return ca}),odd:Da(function(ca,la){for(var sa=1;sa<la;sa+=2)ca.push(sa);
return ca}),lt:Da(function(ca,la,sa){for(la=0>sa?sa+la:sa>la?la:sa;0<=--la;)ca.push(la);return ca}),gt:Da(function(ca,la,sa){for(sa=0>sa?sa+la:sa;++sa<la;)ca.push(sa);return ca})}}).pseudos.nth=nb.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})nb.pseudos[Jc]=ma(Jc);for(Jc in{submit:!0,reset:!0})nb.pseudos[Jc]=oa(Jc);return Pa.prototype=nb.filters=nb.pseudos,nb.setFilters=new Pa,bd=f.tokenize=function(ca,la){var sa,ra,ya,Ka,La,db;if(La=vd[ca+" "])return la?0:La.slice(0);La=ca;var Oa=
[];for(db=nb.preFilter;La;){for(Ka in sa&&!(ra=ae.exec(La))||(ra&&(La=La.slice(ra[0].length)||La),Oa.push(ya=[])),sa=!1,(ra=Jd.exec(La))&&(sa=ra.shift(),ya.push({value:sa,type:ra[0].replace(ud," ")}),La=La.slice(sa.length)),nb.filter)!(ra=wd[Ka].exec(La))||db[Ka]&&!(ra=db[Ka](ra))||(sa=ra.shift(),ya.push({value:sa,type:Ka,matches:ra}),La=La.slice(sa.length));if(!sa)break}return la?La.length:La?f.error(ca):vd(ca,Oa).slice(0)},ld=f.compile=function(ca,la){var sa,ra=[],ya=[],Ka=Md[ca+" "];if(!Ka){la||=
bd(ca);for(sa=la.length;sa--;)(Ka=uc(la[sa]))[rb]?ra.push(Ka):ya.push(Ka);(Ka=Md(ca,function(La,db){var Oa=0<db.length,ib=0<La.length,Bb=function(ec,fc,vb,Qb,Mb){var Bc,Ic,qc=0,gc="0",xd=ec&&[],hd=[],Pd=cd,Qd=ec||ib&&nb.find.TAG("*",Mb),Rd=Vb+=null==Pd?1:Math.random()||.1,ge=Qd.length;for(Mb&&(cd=fc==pb||fc||Mb);gc!==ge&&null!=(Bc=Qd[gc]);gc++){if(ib&&Bc){var Ed=0;for(fc||Bc.ownerDocument==pb||(Hc(Bc),vb=!ic);Ic=La[Ed++];)if(Ic(Bc,fc||pb,vb)){Qb.push(Bc);break}Mb&&(Vb=Rd)}Oa&&((Bc=!Ic&&Bc)&&qc--,
ec&&xd.push(Bc))}if(qc+=gc,Oa&&gc!==qc){for(Ed=0;Ic=db[Ed++];)Ic(xd,hd,fc,vb);if(ec){if(0<qc)for(;gc--;)xd[gc]||hd[gc]||(hd[gc]=Yd.call(Qb));hd=pc(hd)}ad.apply(Qb,hd);Mb&&!ec&&0<hd.length&&1<qc+db.length&&f.uniqueSort(Qb)}return Mb&&(Vb=Rd,cd=Pd),xd};return Oa?I(Bb):Bb}(ya,ra))).selector=ca}return Ka},Pc=f.select=function(ca,la,sa,ra){var ya,Ka,La,db,Oa,ib="function"==typeof ca&&ca,Bb=!ra&&bd(ca=ib.selector||ca);if(sa=sa||[],1===Bb.length){if(2<(Ka=Bb[0]=Bb[0].slice(0)).length&&"ID"===(La=Ka[0]).type&&
9===la.nodeType&&ic&&nb.relative[Ka[1].type]){if(!(la=(nb.find.ID(La.matches[0].replace(Wc,Xc),la)||[])[0]))return sa;ib&&(la=la.parentNode);ca=ca.slice(Ka.shift().value.length)}for(ya=wd.needsContext.test(ca)?0:Ka.length;ya--&&(La=Ka[ya],!nb.relative[db=La.type]);)if((Oa=nb.find[db])&&(ra=Oa(La.matches[0].replace(Wc,Xc),Cd.test(Ka[0].type)&&ua(la.parentNode)||la))){if(Ka.splice(ya,1),!(ca=ra.length&&cb(Ka)))return ad.apply(sa,ra),sa;break}}return(ib||ld(ca,Bb))(ra,la,!ic,sa,!la||Cd.test(ca)&&ua(la.parentNode)||
la),sa},Ya.sortStable=rb.split("").sort(Dd).join("")===rb,Ya.detectDuplicates=!!Lc,Hc(),Ya.sortDetached=O(function(ca){return 1&ca.compareDocumentPosition(pb.createElement("fieldset"))}),O(function(ca){return ca.innerHTML="<a href='#'></a>","#"===ca.firstChild.getAttribute("href")})||X("type|href|height|width",function(ca,la,sa){if(!sa)return ca.getAttribute(la,"type"===la.toLowerCase()?1:2)}),Ya.attributes&&O(function(ca){return ca.innerHTML="<input/>",ca.firstChild.setAttribute("value",""),""===
ca.firstChild.getAttribute("value")})||X("value",function(ca,la,sa){if(!sa&&"input"===ca.nodeName.toLowerCase())return ca.defaultValue}),O(function(ca){return null==ca.getAttribute("disabled")})||X("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(ca,la,sa){var ra;if(!sa)return!0===ca[la]?la.toLowerCase():(ra=ca.getAttributeNode(la))&&ra.specified?ra.value:null}),f}($a);t.find=Ia;t.expr=Ia.selectors;t.expr[":"]=t.expr.pseudos;
t.uniqueSort=t.unique=Ia.uniqueSort;t.text=Ia.getText;t.isXMLDoc=Ia.isXML;t.contains=Ia.contains;t.escapeSelector=Ia.escape;var Ca=function(b,f,A){for(var I=[],O=void 0!==A;(b=b[f])&&9!==b.nodeType;)if(1===b.nodeType){if(O&&t(b).is(A))break;I.push(b)}return I},Ra=function(b,f){for(var A=[];b;b=b.nextSibling)1===b.nodeType&&b!==f&&A.push(b);return A},jb=t.expr.match.needsContext,Ua=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;t.filter=function(b,f,A){var I=f[0];return A&&(b=":not("+
b+")"),1===f.length&&1===I.nodeType?t.find.matchesSelector(I,b)?[I]:[]:t.find.matches(b,t.grep(f,function(O){return 1===O.nodeType}))};t.fn.extend({find:function(b){var f,A=this.length,I=this;if("string"!=typeof b)return this.pushStack(t(b).filter(function(){for(f=0;f<A;f++)if(t.contains(I[f],this))return!0}));var O=this.pushStack([]);for(f=0;f<A;f++)t.find(b,I[f],O);return 1<A?t.uniqueSort(O):O},filter:function(b){return this.pushStack(p(this,b||[],!1))},not:function(b){return this.pushStack(p(this,
b||[],!0))},is:function(b){return!!p(this,"string"==typeof b&&jb.test(b)?t(b):b||[],!1).length}});var gb=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(t.fn.init=function(b,f,A){var I,O;if(!b)return this;if(A=A||Xa,"string"==typeof b){if(!(I="<"===b[0]&&">"===b[b.length-1]&&3<=b.length?[null,b,null]:gb.exec(b))||!I[1]&&f)return!f||f.jquery?(f||A).find(b):this.constructor(f).find(b);if(I[1]){if(f=f instanceof t?f[0]:f,t.merge(this,t.parseHTML(I[1],f&&f.nodeType?f.ownerDocument||f:fb,!0)),Ua.test(I[1])&&t.isPlainObject(f))for(I in f)Va(this[I])?
this[I](f[I]):this.attr(I,f[I]);return this}return(O=fb.getElementById(I[2]))&&(this[0]=O,this.length=1),this}return b.nodeType?(this[0]=b,this.length=1,this):Va(b)?void 0!==A.ready?A.ready(b):b(t):t.makeArray(b,this)}).prototype=t.fn;var Xa=t(fb);var Za=/^(?:parents|prev(?:Until|All))/,Cb={children:!0,contents:!0,next:!0,prev:!0};t.fn.extend({has:function(b){var f=t(b,this),A=f.length;return this.filter(function(){for(var I=0;I<A;I++)if(t.contains(this,f[I]))return!0})},closest:function(b,f){var A,
I=0,O=this.length,X=[],da="string"!=typeof b&&t(b);if(!jb.test(b))for(;I<O;I++)for(A=this[I];A&&A!==f;A=A.parentNode)if(11>A.nodeType&&(da?-1<da.index(A):1===A.nodeType&&t.find.matchesSelector(A,b))){X.push(A);break}return this.pushStack(1<X.length?t.uniqueSort(X):X)},index:function(b){return b?"string"==typeof b?Lb.call(t(b),this[0]):Lb.call(this,b.jquery?b[0]:b):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(b,f){return this.pushStack(t.uniqueSort(t.merge(this.get(),
t(b,f))))},addBack:function(b){return this.add(null==b?this.prevObject:this.prevObject.filter(b))}});t.each({parent:function(b){return(b=b.parentNode)&&11!==b.nodeType?b:null},parents:function(b){return Ca(b,"parentNode")},parentsUntil:function(b,f,A){return Ca(b,"parentNode",A)},next:function(b){return w(b,"nextSibling")},prev:function(b){return w(b,"previousSibling")},nextAll:function(b){return Ca(b,"nextSibling")},prevAll:function(b){return Ca(b,"previousSibling")},nextUntil:function(b,f,A){return Ca(b,
"nextSibling",A)},prevUntil:function(b,f,A){return Ca(b,"previousSibling",A)},siblings:function(b){return Ra((b.parentNode||{}).firstChild,b)},children:function(b){return Ra(b.firstChild)},contents:function(b){return null!=b.contentDocument&&Na(b.contentDocument)?b.contentDocument:(x(b,"template")&&(b=b.content||b),t.merge([],b.childNodes))}},function(b,f){t.fn[b]=function(A,I){var O=t.map(this,f,A);return"Until"!==b.slice(-5)&&(I=A),I&&"string"==typeof I&&(O=t.filter(I,O)),1<this.length&&(Cb[b]||
t.uniqueSort(O),Za.test(b)&&O.reverse()),this.pushStack(O)}});var mb=/[^\x20\t\r\n\f]+/g;t.Callbacks=function(b){b="string"==typeof b?function(Da){var ua={};return t.each(Da.match(mb)||[],function(Pa,cb){ua[cb]=!0}),ua}(b):t.extend({},b);var f,A,I,O,X=[],da=[],ma=-1,oa=function(){O=O||b.once;for(I=f=!0;da.length;ma=-1)for(A=da.shift();++ma<X.length;)!1===X[ma].apply(A[0],A[1])&&b.stopOnFalse&&(ma=X.length,A=!1);b.memory||(A=!1);f=!1;O&&(X=A?[]:"")},wa={add:function(){return X&&(A&&!f&&(ma=X.length-
1,da.push(A)),function Pa(ua){t.each(ua,function(cb,Wa){Va(Wa)?b.unique&&wa.has(Wa)||X.push(Wa):Wa&&Wa.length&&"string"!==h(Wa)&&Pa(Wa)})}(arguments),A&&!f&&oa()),this},remove:function(){return t.each(arguments,function(Da,ua){for(var Pa;-1<(Pa=t.inArray(ua,X,Pa));)X.splice(Pa,1),Pa<=ma&&ma--}),this},has:function(Da){return Da?-1<t.inArray(Da,X):0<X.length},empty:function(){return X&&=[],this},disable:function(){return O=da=[],X=A="",this},disabled:function(){return!X},lock:function(){return O=da=
[],A||f||(X=A=""),this},locked:function(){return!!O},fireWith:function(Da,ua){return O||(ua=[Da,(ua=ua||[]).slice?ua.slice():ua],da.push(ua),f||oa()),this},fire:function(){return wa.fireWith(this,arguments),this},fired:function(){return!!I}};return wa};t.extend({Deferred:function(b){var f=[["notify","progress",t.Callbacks("memory"),t.Callbacks("memory"),2],["resolve","done",t.Callbacks("once memory"),t.Callbacks("once memory"),0,"resolved"],["reject","fail",t.Callbacks("once memory"),t.Callbacks("once memory"),
1,"rejected"]],A="pending",I={state:function(){return A},always:function(){return O.done(arguments).fail(arguments),this},catch:function(X){return I.then(null,X)},pipe:function(){var X=arguments;return t.Deferred(function(da){t.each(f,function(ma,oa){var wa=Va(X[oa[4]])&&X[oa[4]];O[oa[1]](function(){var Da=wa&&wa.apply(this,arguments);Da&&Va(Da.promise)?Da.promise().progress(da.notify).done(da.resolve).fail(da.reject):da[oa[0]+"With"](this,wa?[Da]:arguments)})});X=null}).promise()},then:function(X,
da,ma){function oa(Da,ua,Pa,cb){return function(){var Wa=this,ub=arguments,pc=function(){var uc;if(!(Da<wa)){if((uc=Pa.apply(Wa,ub))===ua.promise())throw new TypeError("Thenable self-resolution");var Jc=uc&&("object"==typeof uc||"function"==typeof uc)&&uc.then;Va(Jc)?cb?Jc.call(uc,oa(wa,ua,v,cb),oa(wa,ua,C,cb)):(wa++,Jc.call(uc,oa(wa,ua,v,cb),oa(wa,ua,C,cb),oa(wa,ua,v,ua.notifyWith))):(Pa!==v&&(Wa=void 0,ub=[uc]),(cb||ua.resolveWith)(Wa,ub))}},Qc=cb?pc:function(){try{pc()}catch(uc){t.Deferred.exceptionHook&&
t.Deferred.exceptionHook(uc,Qc.stackTrace),Da+1>=wa&&(Pa!==C&&(Wa=void 0,ub=[uc]),ua.rejectWith(Wa,ub))}};Da?Qc():(t.Deferred.getStackHook&&(Qc.stackTrace=t.Deferred.getStackHook()),$a.setTimeout(Qc))}}var wa=0;return t.Deferred(function(Da){f[0][3].add(oa(0,Da,Va(ma)?ma:v,Da.notifyWith));f[1][3].add(oa(0,Da,Va(X)?X:v));f[2][3].add(oa(0,Da,Va(da)?da:C))}).promise()},promise:function(X){return null!=X?t.extend(X,I):I}},O={};return t.each(f,function(X,da){var ma=da[2],oa=da[5];I[da[1]]=ma.add;oa&&ma.add(function(){A=
oa},f[3-X][2].disable,f[3-X][3].disable,f[0][2].lock,f[0][3].lock);ma.add(da[3].fire);O[da[0]]=function(){return O[da[0]+"With"](this===O?void 0:this,arguments),this};O[da[0]+"With"]=ma.fireWith}),I.promise(O),b&&b.call(O,O),O},when:function(b){var f=arguments.length,A=f,I=Array(A),O=hb.call(arguments),X=t.Deferred(),da=function(ma){return function(oa){I[ma]=this;O[ma]=1<arguments.length?hb.call(arguments):oa;--f||X.resolveWith(I,O)}};if(1>=f&&(M(b,X.done(da(A)).resolve,X.reject,!f),"pending"===X.state()||
Va(O[A]&&O[A].then)))return X.then();for(;A--;)M(O[A],da(A),X.reject);return X.promise()}});var bc=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;t.Deferred.exceptionHook=function(b,f){$a.console&&$a.console.warn&&b&&bc.test(b.name)&&$a.console.warn("jQuery.Deferred exception: "+b.message,b.stack,f)};t.readyException=function(b){$a.setTimeout(function(){throw b;})};var wc=t.Deferred();t.fn.ready=function(b){return wc.then(b).catch(function(f){t.readyException(f)}),this};t.extend({isReady:!1,
readyWait:1,ready:function(b){(!0===b?--t.readyWait:t.isReady)||(t.isReady=!0,!0!==b&&0<--t.readyWait||wc.resolveWith(fb,[t]))}});t.ready.then=wc.then;"complete"===fb.readyState||"loading"!==fb.readyState&&!fb.documentElement.doScroll?$a.setTimeout(t.ready):(fb.addEventListener("DOMContentLoaded",L),$a.addEventListener("load",L));var Hb=function(b,f,A,I,O,X,da){var ma=0,oa=b.length,wa=null==A;if("object"===h(A))for(ma in O=!0,A)Hb(b,f,ma,A[ma],!0,X,da);else if(void 0!==I&&(O=!0,Va(I)||(da=!0),wa&&
(da?(f.call(b,I),f=null):(wa=f,f=function(Da,ua,Pa){return wa.call(t(Da),Pa)})),f))for(;ma<oa;ma++)f(b[ma],A,da?I:I.call(b[ma],ma,f(b[ma],A)));return O?b:wa?f.call(b):oa?f(b[0],A):X},Gb=/^-ms-/,tb=/-([a-z])/g,zb=function(b){return 1===b.nodeType||9===b.nodeType||!+b.nodeType};g.uid=1;g.prototype={cache:function(b){var f=b[this.expando];return f||(f=Object.create(null),zb(b)&&(b.nodeType?b[this.expando]=f:Object.defineProperty(b,this.expando,{value:f,configurable:!0}))),f},set:function(b,f,A){var I;
b=this.cache(b);if("string"==typeof f)b[e(f)]=A;else for(I in f)b[e(I)]=f[I];return b},get:function(b,f){return void 0===f?this.cache(b):b[this.expando]&&b[this.expando][e(f)]},access:function(b,f,A){return void 0===f||f&&"string"==typeof f&&void 0===A?this.get(b,f):(this.set(b,f,A),void 0!==A?A:f)},remove:function(b,f){var A=b[this.expando];if(void 0!==A){if(void 0!==f){var I=(f=Array.isArray(f)?f.map(e):(f=e(f))in A?[f]:f.match(mb)||[]).length;for(;I--;)delete A[f[I]]}(void 0===f||t.isEmptyObject(A))&&
(b.nodeType?b[this.expando]=void 0:delete b[this.expando])}},hasData:function(b){b=b[this.expando];return void 0!==b&&!t.isEmptyObject(b)}};var Qa=new g,Ab=new g,jc=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Zb=/[A-Z]/g;t.extend({hasData:function(b){return Ab.hasData(b)||Qa.hasData(b)},data:function(b,f,A){return Ab.access(b,f,A)},removeData:function(b,f){Ab.remove(b,f)},_data:function(b,f,A){return Qa.access(b,f,A)},_removeData:function(b,f){Qa.remove(b,f)}});t.fn.extend({data:function(b,f){var A,I,O,X=this[0],
da=X&&X.attributes;if(void 0===b){if(this.length&&(O=Ab.get(X),1===X.nodeType&&!Qa.get(X,"hasDataAttrs"))){for(A=da.length;A--;)da[A]&&0===(I=da[A].name).indexOf("data-")&&(I=e(I.slice(5)),u(X,I,O[I]));Qa.set(X,"hasDataAttrs",!0)}return O}return"object"==typeof b?this.each(function(){Ab.set(this,b)}):Hb(this,function(ma){var oa;if(X&&void 0===ma)return void 0!==(oa=Ab.get(X,b))||void 0!==(oa=u(X,b))?oa:void 0;this.each(function(){Ab.set(this,b,ma)})},null,f,1<arguments.length,null,!0)},removeData:function(b){return this.each(function(){Ab.remove(this,
b)})}});t.extend({queue:function(b,f,A){var I;if(b)return f=(f||"fx")+"queue",I=Qa.get(b,f),A&&(!I||Array.isArray(A)?I=Qa.access(b,f,t.makeArray(A)):I.push(A)),I||[]},dequeue:function(b,f){f=f||"fx";var A=t.queue(b,f),I=A.length,O=A.shift(),X=t._queueHooks(b,f);"inprogress"===O&&(O=A.shift(),I--);O&&("fx"===f&&A.unshift("inprogress"),delete X.stop,O.call(b,function(){t.dequeue(b,f)},X));!I&&X&&X.empty.fire()},_queueHooks:function(b,f){var A=f+"queueHooks";return Qa.get(b,A)||Qa.access(b,A,{empty:t.Callbacks("once memory").add(function(){Qa.remove(b,
[f+"queue",A])})})}});t.fn.extend({queue:function(b,f){var A=2;return"string"!=typeof b&&(f=b,b="fx",A--),arguments.length<A?t.queue(this[0],b):void 0===f?this:this.each(function(){var I=t.queue(this,b,f);t._queueHooks(this,b);"fx"===b&&"inprogress"!==I[0]&&t.dequeue(this,b)})},dequeue:function(b){return this.each(function(){t.dequeue(this,b)})},clearQueue:function(b){return this.queue(b||"fx",[])},promise:function(b,f){var A,I=1,O=t.Deferred(),X=this,da=this.length,ma=function(){--I||O.resolveWith(X,
[X])};"string"!=typeof b&&(f=b,b=void 0);for(b=b||"fx";da--;)(A=Qa.get(X[da],b+"queueHooks"))&&A.empty&&(I++,A.empty.add(ma));return ma(),O.promise(f)}});var cc=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,r=new RegExp("^(?:([+-])=|)("+cc+")([a-z%]*)$","i"),E=["Top","Right","Bottom","Left"],ea=fb.documentElement,ja=function(b){return t.contains(b.ownerDocument,b)},va={composed:!0};ea.getRootNode&&(ja=function(b){return t.contains(b.ownerDocument,b)||b.getRootNode(va)===b.ownerDocument});var Aa=function(b,
f){return"none"===(b=f||b).style.display||""===b.style.display&&ja(b)&&"none"===t.css(b,"display")},xa={};t.fn.extend({show:function(){return y(this,!0)},hide:function(){return y(this)},toggle:function(b){return"boolean"==typeof b?b?this.show():this.hide():this.each(function(){Aa(this)?t(this).show():t(this).hide()})}});var Ba,Ea=/^(?:checkbox|radio)$/i,za=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Sa=/^$|^module$|\/(?:java|ecma)script/i;var eb=fb.createDocumentFragment().appendChild(fb.createElement("div"));
(Ba=fb.createElement("input")).setAttribute("type","radio");Ba.setAttribute("checked","checked");Ba.setAttribute("name","t");eb.appendChild(Ba);ab.checkClone=eb.cloneNode(!0).cloneNode(!0).lastChild.checked;eb.innerHTML="<textarea>x</textarea>";ab.noCloneChecked=!!eb.cloneNode(!0).lastChild.defaultValue;eb.innerHTML="<option></option>";ab.option=!!eb.lastChild;var Ma={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,
"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead;Ma.th=Ma.td;ab.option||(Ma.optgroup=Ma.option=[1,"<select multiple='multiple'>","</select>"]);var sb=/<|&#?\w+;/,Yb=/^key/,nc=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oc=/^([^.]*)(?:\.(.+)|)/;t.event={global:{},add:function(b,f,A,I,O){var X,da,ma,oa,wa,Da,ua,Pa;var cb=Qa.get(b);if(zb(b))for(A.handler&&(A=(X=A).handler,O=X.selector),O&&t.find.matchesSelector(ea,O),A.guid||(A.guid=
t.guid++),(oa=cb.events)||(oa=cb.events=Object.create(null)),(da=cb.handle)||(da=cb.handle=function(ub){return void 0!==t&&t.event.triggered!==ub.type?t.event.dispatch.apply(b,arguments):void 0}),cb=(f=(f||"").match(mb)||[""]).length;cb--;){var Wa=Pa=(ma=oc.exec(f[cb])||[])[1];ma=(ma[2]||"").split(".").sort();Wa&&(Da=t.event.special[Wa]||{},Wa=(O?Da.delegateType:Da.bindType)||Wa,Da=t.event.special[Wa]||{},wa=t.extend({type:Wa,origType:Pa,data:I,handler:A,guid:A.guid,selector:O,needsContext:O&&t.expr.match.needsContext.test(O),
namespace:ma.join(".")},X),(ua=oa[Wa])||((ua=oa[Wa]=[]).delegateCount=0,Da.setup&&!1!==Da.setup.call(b,I,ma,da)||b.addEventListener&&b.addEventListener(Wa,da)),Da.add&&(Da.add.call(b,wa),wa.handler.guid||(wa.handler.guid=A.guid)),O?ua.splice(ua.delegateCount++,0,wa):ua.push(wa),t.event.global[Wa]=!0)}},remove:function(b,f,A,I,O){var X,da,ma,oa,wa,Da,ua,Pa,cb=Qa.hasData(b)&&Qa.get(b);if(cb&&(oa=cb.events)){for(wa=(f=(f||"").match(mb)||[""]).length;wa--;)if(Da=Pa=(ma=oc.exec(f[wa])||[])[1],ua=(ma[2]||
"").split(".").sort(),Da){var Wa=t.event.special[Da]||{};var ub=oa[Da=(I?Wa.delegateType:Wa.bindType)||Da]||[];ma=ma[2]&&new RegExp("(^|\\.)"+ua.join("\\.(?:.*\\.|)")+"(\\.|$)");for(da=X=ub.length;X--;){var pc=ub[X];!O&&Pa!==pc.origType||A&&A.guid!==pc.guid||ma&&!ma.test(pc.namespace)||I&&I!==pc.selector&&("**"!==I||!pc.selector)||(ub.splice(X,1),pc.selector&&ub.delegateCount--,Wa.remove&&Wa.remove.call(b,pc))}da&&!ub.length&&(Wa.teardown&&!1!==Wa.teardown.call(b,ua,cb.handle)||t.removeEvent(b,Da,
cb.handle),delete oa[Da])}else for(Da in oa)t.event.remove(b,Da+f[wa],A,I,!0);t.isEmptyObject(oa)&&Qa.remove(b,"handle events")}},dispatch:function(b){var f,A,I,O,X=Array(arguments.length),da=t.event.fix(b);var ma=(Qa.get(this,"events")||Object.create(null))[da.type]||[];var oa=t.event.special[da.type]||{};X[0]=da;for(f=1;f<arguments.length;f++)X[f]=arguments[f];if(da.delegateTarget=this,!oa.preDispatch||!1!==oa.preDispatch.call(this,da)){var wa=t.event.handlers.call(this,da,ma);for(f=0;(I=wa[f++])&&
!da.isPropagationStopped();)for(da.currentTarget=I.elem,ma=0;(O=I.handlers[ma++])&&!da.isImmediatePropagationStopped();)da.rnamespace&&!1!==O.namespace&&!da.rnamespace.test(O.namespace)||(da.handleObj=O,da.data=O.data,void 0!==(A=((t.event.special[O.origType]||{}).handle||O.handler).apply(I.elem,X))&&!1===(da.result=A)&&(da.preventDefault(),da.stopPropagation()));return oa.postDispatch&&oa.postDispatch.call(this,da),da.result}},handlers:function(b,f){var A,I,O,X=[],da=f.delegateCount,ma=b.target;
if(da&&ma.nodeType&&!("click"===b.type&&1<=b.button))for(;ma!==this;ma=ma.parentNode||this)if(1===ma.nodeType&&("click"!==b.type||!0!==ma.disabled)){var oa=[];var wa={};for(A=0;A<da;A++)void 0===wa[O=(I=f[A]).selector+" "]&&(wa[O]=I.needsContext?-1<t(O,this).index(ma):t.find(O,this,null,[ma]).length),wa[O]&&oa.push(I);oa.length&&X.push({elem:ma,handlers:oa})}return ma=this,da<f.length&&X.push({elem:ma,handlers:f.slice(da)}),X},addProp:function(b,f){Object.defineProperty(t.Event.prototype,b,{enumerable:!0,
configurable:!0,get:Va(f)?function(){if(this.originalEvent)return f(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[b]},set:function(A){Object.defineProperty(this,b,{enumerable:!0,configurable:!0,writable:!0,value:A})}})},fix:function(b){return b[t.expando]?b:new t.Event(b)},special:{load:{noBubble:!0},click:{setup:function(b){b=this||b;return Ea.test(b.type)&&b.click&&x(b,"input")&&N(b,"click",k),!1},trigger:function(b){b=this||b;return Ea.test(b.type)&&b.click&&x(b,
"input")&&N(b,"click"),!0},_default:function(b){b=b.target;return Ea.test(b.type)&&b.click&&x(b,"input")&&Qa.get(b,"click")||x(b,"a")}},beforeunload:{postDispatch:function(b){void 0!==b.result&&b.originalEvent&&(b.originalEvent.returnValue=b.result)}}}};t.removeEvent=function(b,f,A){b.removeEventListener&&b.removeEventListener(f,A)};t.Event=function(b,f){if(!(this instanceof t.Event))return new t.Event(b,f);b&&b.type?(this.originalEvent=b,this.type=b.type,this.isDefaultPrevented=b.defaultPrevented||
void 0===b.defaultPrevented&&!1===b.returnValue?k:J,this.target=b.target&&3===b.target.nodeType?b.target.parentNode:b.target,this.currentTarget=b.currentTarget,this.relatedTarget=b.relatedTarget):this.type=b;f&&t.extend(this,f);this.timeStamp=b&&b.timeStamp||Date.now();this[t.expando]=!0};t.Event.prototype={constructor:t.Event,isDefaultPrevented:J,isPropagationStopped:J,isImmediatePropagationStopped:J,isSimulated:!1,preventDefault:function(){var b=this.originalEvent;this.isDefaultPrevented=k;b&&!this.isSimulated&&
b.preventDefault()},stopPropagation:function(){var b=this.originalEvent;this.isPropagationStopped=k;b&&!this.isSimulated&&b.stopPropagation()},stopImmediatePropagation:function(){var b=this.originalEvent;this.isImmediatePropagationStopped=k;b&&!this.isSimulated&&b.stopImmediatePropagation();this.stopPropagation()}};t.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,
button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(b){var f=b.button;return null==b.which&&Yb.test(b.type)?null!=b.charCode?b.charCode:b.keyCode:!b.which&&void 0!==f&&nc.test(b.type)?1&f?1:2&f?3:4&f?2:0:b.which}},t.event.addProp);t.each({focus:"focusin",blur:"focusout"},function(b,f){t.event.special[b]={setup:function(){return N(this,b,m),!1},trigger:function(){return N(this,b),
!0},delegateType:f}});t.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(b,f){t.event.special[b]={delegateType:f,bindType:f,handle:function(A){var I,O=A.relatedTarget,X=A.handleObj;return O&&(O===this||t.contains(this,O))||(A.type=X.origType,I=X.handler.apply(this,arguments),A.type=f),I}}});t.fn.extend({on:function(b,f,A,I){return K(this,b,f,A,I)},one:function(b,f,A,I){return K(this,b,f,A,I,1)},off:function(b,f,A){var I,O;if(b&&b.preventDefault&&
b.handleObj)return I=b.handleObj,t(b.delegateTarget).off(I.namespace?I.origType+"."+I.namespace:I.origType,I.selector,I.handler),this;if("object"==typeof b){for(O in b)this.off(O,f,b[O]);return this}return!1!==f&&"function"!=typeof f||(A=f,f=void 0),!1===A&&(A=J),this.each(function(){t.event.remove(this,b,A,f)})}});var Nb=/<script|<style|<link/i,sc=/checked\s*(?:[^=]|=\s*.checked.)/i,xc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;t.extend({htmlPrefilter:function(b){return b},clone:function(b,f,A){var I,
O,X=b.cloneNode(!0),da=ja(b);if(!(ab.noCloneChecked||1!==b.nodeType&&11!==b.nodeType||t.isXMLDoc(b))){var ma=D(X);var oa=0;for(I=(O=D(b)).length;oa<I;oa++){var wa=O[oa],Da=ma[oa],ua=Da.nodeName.toLowerCase();"input"===ua&&Ea.test(wa.type)?Da.checked=wa.checked:"input"!==ua&&"textarea"!==ua||(Da.defaultValue=wa.defaultValue)}}if(f)if(A)for(O=O||D(b),ma=ma||D(X),oa=0,I=O.length;oa<I;oa++)W(O[oa],ma[oa]);else W(b,X);return 0<(ma=D(X,"script")).length&&l(ma,!da&&D(b,"script")),X},cleanData:function(b){for(var f,
A,I,O=t.event.special,X=0;void 0!==(A=b[X]);X++)if(zb(A)){if(f=A[Qa.expando]){if(f.events)for(I in f.events)O[I]?t.event.remove(A,I):t.removeEvent(A,I,f.handle);A[Qa.expando]=void 0}A[Ab.expando]&&(A[Ab.expando]=void 0)}}});t.fn.extend({detach:function(b){return U(this,b,!0)},remove:function(b){return U(this,b)},text:function(b){return Hb(this,function(f){return void 0===f?t.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=f)})},null,
b,arguments.length)},append:function(){return ha(this,arguments,function(b){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Q(this,b).appendChild(b)})},prepend:function(){return ha(this,arguments,function(b){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var f=Q(this,b);f.insertBefore(b,f.firstChild)}})},before:function(){return ha(this,arguments,function(b){this.parentNode&&this.parentNode.insertBefore(b,this)})},after:function(){return ha(this,arguments,function(b){this.parentNode&&
this.parentNode.insertBefore(b,this.nextSibling)})},empty:function(){for(var b,f=0;null!=(b=this[f]);f++)1===b.nodeType&&(t.cleanData(D(b,!1)),b.textContent="");return this},clone:function(b,f){return b=null!=b&&b,f=null==f?b:f,this.map(function(){return t.clone(this,b,f)})},html:function(b){return Hb(this,function(f){var A=this[0]||{},I=0,O=this.length;if(void 0===f&&1===A.nodeType)return A.innerHTML;if("string"==typeof f&&!Nb.test(f)&&!Ma[(za.exec(f)||["",""])[1].toLowerCase()]){f=t.htmlPrefilter(f);
try{for(;I<O;I++)1===(A=this[I]||{}).nodeType&&(t.cleanData(D(A,!1)),A.innerHTML=f);A=0}catch(X){}}A&&this.empty().append(f)},null,b,arguments.length)},replaceWith:function(){var b=[];return ha(this,arguments,function(f){var A=this.parentNode;0>t.inArray(this,b)&&(t.cleanData(D(this)),A&&A.replaceChild(f,this))},b)}});t.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(b,f){t.fn[b]=function(A){for(var I=[],O=t(A),X=O.length-1,
da=0;da<=X;da++)A=da===X?this:this.clone(!0),t(O[da])[f](A),Pb.apply(I,A.get());return this.pushStack(I)}});var Gc=new RegExp("^("+cc+")(?!px)[a-z%]+$","i"),$b=function(b){var f=b.ownerDocument.defaultView;return f&&f.opener||(f=$a),f.getComputedStyle(b)},Cc=function(b,f,A){var I,O={};for(I in f)O[I]=b.style[I],b.style[I]=f[I];for(I in A=A.call(b),f)b.style[I]=O[I];return A},kc=new RegExp(E.join("|"),"i");!function(){function b(){if(oa){ma.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0";
oa.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%";ea.appendChild(ma).appendChild(oa);var wa=$a.getComputedStyle(oa);f="1%"!==wa.top;da=12===Math.round(parseFloat(wa.marginLeft));oa.style.right="60%";O=36===Math.round(parseFloat(wa.right));A=36===Math.round(parseFloat(wa.width));oa.style.position="absolute";I=12===Math.round(parseFloat(oa.offsetWidth/3));ea.removeChild(ma);oa=null}}var f,A,I,O,X,da,ma=fb.createElement("div"),
oa=fb.createElement("div");oa.style&&(oa.style.backgroundClip="content-box",oa.cloneNode(!0).style.backgroundClip="",ab.clearCloneStyle="content-box"===oa.style.backgroundClip,t.extend(ab,{boxSizingReliable:function(){return b(),A},pixelBoxStyles:function(){return b(),O},pixelPosition:function(){return b(),f},reliableMarginLeft:function(){return b(),da},scrollboxSize:function(){return b(),I},reliableTrDimensions:function(){var wa,Da,ua,Pa;return null==X&&(wa=fb.createElement("table"),Da=fb.createElement("tr"),
ua=fb.createElement("div"),wa.style.cssText="position:absolute;left:-11111px",Da.style.height="1px",ua.style.height="9px",ea.appendChild(wa).appendChild(Da).appendChild(ua),Pa=$a.getComputedStyle(Da),X=3<parseInt(Pa.height),ea.removeChild(wa)),X}}))}();var lb=["Webkit","Moz","ms"],Vc=fb.createElement("div").style,Sb={},Eb=/^(none|table(?!-c[ea]).+)/,hc=/^--/,Ib={position:"absolute",visibility:"hidden",display:"block"},lc={letterSpacing:"0",fontWeight:"400"};t.extend({cssHooks:{opacity:{get:function(b,
f){if(f)return b=S(b,"opacity"),""===b?"1":b}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(b,f,A,I){if(b&&3!==b.nodeType&&8!==b.nodeType&&b.style){var O,X,da,ma=e(f),oa=hc.test(f),wa=b.style;if(oa||(f=Y(ma)),da=t.cssHooks[f]||t.cssHooks[ma],
void 0===A)return da&&"get"in da&&void 0!==(O=da.get(b,!1,I))?O:wa[f];"string"==(X=typeof A)&&(O=r.exec(A))&&O[1]&&(A=n(b,f,O),X="number");null!=A&&A==A&&("number"!==X||oa||(A+=O&&O[3]||(t.cssNumber[ma]?"":"px")),ab.clearCloneStyle||""!==A||0!==f.indexOf("background")||(wa[f]="inherit"),da&&"set"in da&&void 0===(A=da.set(b,A,I))||(oa?wa.setProperty(f,A):wa[f]=A))}},css:function(b,f,A,I){var O,X,da,ma=e(f);return hc.test(f)||(f=Y(ma)),(da=t.cssHooks[f]||t.cssHooks[ma])&&"get"in da&&(O=da.get(b,!0,
A)),void 0===O&&(O=S(b,f,I)),"normal"===O&&f in lc&&(O=lc[f]),""===A||A?(X=parseFloat(O),!0===A||isFinite(X)?X||0:O):O}});t.each(["height","width"],function(b,f){t.cssHooks[f]={get:function(A,I,O){if(I)return!Eb.test(t.css(A,"display"))||A.getClientRects().length&&A.getBoundingClientRect().width?z(A,f,O):Cc(A,Ib,function(){return z(A,f,O)})},set:function(A,I,O){var X,da=$b(A),ma=!ab.scrollboxSize()&&"absolute"===da.position,oa=(ma||O)&&"border-box"===t.css(A,"boxSizing",!1,da);O=O?ia(A,f,O,oa,da):
0;return oa&&ma&&(O-=Math.ceil(A["offset"+f[0].toUpperCase()+f.slice(1)]-parseFloat(da[f])-ia(A,f,"border",!1,da)-.5)),O&&(X=r.exec(I))&&"px"!==(X[3]||"px")&&(A.style[f]=I,I=t.css(A,f)),aa(0,I,O)}}});t.cssHooks.marginLeft=ba(ab.reliableMarginLeft,function(b,f){if(f)return(parseFloat(S(b,"marginLeft"))||b.getBoundingClientRect().left-Cc(b,{marginLeft:0},function(){return b.getBoundingClientRect().left}))+"px"});t.each({margin:"",padding:"",border:"Width"},function(b,f){t.cssHooks[b+f]={expand:function(A){var I=
0,O={};for(A="string"==typeof A?A.split(" "):[A];4>I;I++)O[b+E[I]+f]=A[I]||A[I-2]||A[0];return O}};"margin"!==b&&(t.cssHooks[b+f].set=aa)});t.fn.extend({css:function(b,f){return Hb(this,function(A,I,O){var X,da={},ma=0;if(Array.isArray(I)){O=$b(A);for(X=I.length;ma<X;ma++)da[I[ma]]=t.css(A,I[ma],!1,O);return da}return void 0!==O?t.style(A,I,O):t.css(A,I)},b,f,1<arguments.length)}});t.Tween=G;G.prototype={constructor:G,init:function(b,f,A,I,O,X){this.elem=b;this.prop=A;this.easing=O||t.easing._default;
this.options=f;this.start=this.now=this.cur();this.end=I;this.unit=X||(t.cssNumber[A]?"":"px")},cur:function(){var b=G.propHooks[this.prop];return b&&b.get?b.get(this):G.propHooks._default.get(this)},run:function(b){var f,A=G.propHooks[this.prop];return this.options.duration?this.pos=f=t.easing[this.easing](b,this.options.duration*b,0,1,this.options.duration):this.pos=f=b,this.now=(this.end-this.start)*f+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),A&&A.set?A.set(this):
G.propHooks._default.set(this),this}};G.prototype.init.prototype=G.prototype;G.propHooks={_default:{get:function(b){var f;return 1!==b.elem.nodeType||null!=b.elem[b.prop]&&null==b.elem.style[b.prop]?b.elem[b.prop]:(f=t.css(b.elem,b.prop,""))&&"auto"!==f?f:0},set:function(b){t.fx.step[b.prop]?t.fx.step[b.prop](b):1!==b.elem.nodeType||!t.cssHooks[b.prop]&&null==b.elem.style[Y(b.prop)]?b.elem[b.prop]=b.now:t.style(b.elem,b.prop,b.now+b.unit)}}};G.propHooks.scrollTop=G.propHooks.scrollLeft={set:function(b){b.elem.nodeType&&
b.elem.parentNode&&(b.elem[b.prop]=b.now)}};t.easing={linear:function(b){return b},swing:function(b){return.5-Math.cos(b*Math.PI)/2},_default:"swing"};t.fx=G.prototype.init;t.fx.step={};var Ob,yb,Ta=/^(?:toggle|show|hide)$/,Rb=/queueHooks$/;t.Animation=t.extend(Z,{tweeners:{"*":[function(b,f){var A=this.createTween(b,f);return n(A.elem,b,r.exec(f),A),A}]},tweener:function(b,f){Va(b)?(f=b,b=["*"]):b=b.match(mb);for(var A,I=0,O=b.length;I<O;I++)A=b[I],Z.tweeners[A]=Z.tweeners[A]||[],Z.tweeners[A].unshift(f)},
prefilters:[function(b,f,A){var I,O,X,da,ma,oa,wa,Da="width"in f||"height"in f,ua=this,Pa={},cb=b.style,Wa=b.nodeType&&Aa(b),ub=Qa.get(b,"fxshow");for(I in A.queue||(null==(da=t._queueHooks(b,"fx")).unqueued&&(da.unqueued=0,ma=da.empty.fire,da.empty.fire=function(){da.unqueued||ma()}),da.unqueued++,ua.always(function(){ua.always(function(){da.unqueued--;t.queue(b,"fx").length||da.empty.fire()})})),f)if(O=f[I],Ta.test(O)){if(delete f[I],X=X||"toggle"===O,O===(Wa?"hide":"show")){if("show"!==O||!ub||
void 0===ub[I])continue;Wa=!0}Pa[I]=ub&&ub[I]||t.style(b,I)}if((f=!t.isEmptyObject(f))||!t.isEmptyObject(Pa))for(I in Da&&1===b.nodeType&&(A.overflow=[cb.overflow,cb.overflowX,cb.overflowY],null==(oa=ub&&ub.display)&&(oa=Qa.get(b,"display")),"none"===(wa=t.css(b,"display"))&&(oa?wa=oa:(y([b],!0),oa=b.style.display||oa,wa=t.css(b,"display"),y([b]))),("inline"===wa||"inline-block"===wa&&null!=oa)&&"none"===t.css(b,"float")&&(f||(ua.done(function(){cb.display=oa}),null==oa&&(wa=cb.display,oa="none"===
wa?"":wa)),cb.display="inline-block")),A.overflow&&(cb.overflow="hidden",ua.always(function(){cb.overflow=A.overflow[0];cb.overflowX=A.overflow[1];cb.overflowY=A.overflow[2]})),f=!1,Pa)f||(ub?"hidden"in ub&&(Wa=ub.hidden):ub=Qa.access(b,"fxshow",{display:oa}),X&&(ub.hidden=!Wa),Wa&&y([b],!0),ua.done(function(){for(I in Wa||y([b]),Qa.remove(b,"fxshow"),Pa)t.style(b,I,Pa[I])})),f=fa(Wa?ub[I]:0,I,ua),I in ub||(ub[I]=f.start,Wa&&(f.end=f.start,f.start=0))}],prefilter:function(b,f){f?Z.prefilters.unshift(b):
Z.prefilters.push(b)}});t.speed=function(b,f,A){var I=b&&"object"==typeof b?t.extend({},b):{complete:A||!A&&f||Va(b)&&b,duration:b,easing:A&&f||f&&!Va(f)&&f};return t.fx.off?I.duration=0:"number"!=typeof I.duration&&(I.duration in t.fx.speeds?I.duration=t.fx.speeds[I.duration]:I.duration=t.fx.speeds._default),null!=I.queue&&!0!==I.queue||(I.queue="fx"),I.old=I.complete,I.complete=function(){Va(I.old)&&I.old.call(this);I.queue&&t.dequeue(this,I.queue)},I};t.fn.extend({fadeTo:function(b,f,A,I){return this.filter(Aa).css("opacity",
0).show().end().animate({opacity:f},b,A,I)},animate:function(b,f,A,I){var O=t.isEmptyObject(b),X=t.speed(f,A,I);f=function(){var da=Z(this,t.extend({},b),X);(O||Qa.get(this,"finish"))&&da.stop(!0)};return f.finish=f,O||!1===X.queue?this.each(f):this.queue(X.queue,f)},stop:function(b,f,A){var I=function(O){var X=O.stop;delete O.stop;X(A)};return"string"!=typeof b&&(A=f,f=b,b=void 0),f&&this.queue(b||"fx",[]),this.each(function(){var O=!0,X=null!=b&&b+"queueHooks",da=t.timers,ma=Qa.get(this);if(X)ma[X]&&
ma[X].stop&&I(ma[X]);else for(X in ma)ma[X]&&ma[X].stop&&Rb.test(X)&&I(ma[X]);for(X=da.length;X--;)da[X].elem!==this||null!=b&&da[X].queue!==b||(da[X].anim.stop(A),O=!1,da.splice(X,1));!O&&A||t.dequeue(this,b)})},finish:function(b){return!1!==b&&(b=b||"fx"),this.each(function(){var f=Qa.get(this),A=f[b+"queue"];var I=f[b+"queueHooks"];var O=t.timers,X=A?A.length:0;f.finish=!0;t.queue(this,b,[]);I&&I.stop&&I.stop.call(this,!0);for(I=O.length;I--;)O[I].elem===this&&O[I].queue===b&&(O[I].anim.stop(!0),
O.splice(I,1));for(I=0;I<X;I++)A[I]&&A[I].finish&&A[I].finish.call(this);delete f.finish})}});t.each(["toggle","show","hide"],function(b,f){var A=t.fn[f];t.fn[f]=function(I,O,X){return null==I||"boolean"==typeof I?A.apply(this,arguments):this.animate(T(f,!0),I,O,X)}});t.each({slideDown:T("show"),slideUp:T("hide"),slideToggle:T("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,f){t.fn[b]=function(A,I,O){return this.animate(f,A,I,O)}});t.timers=[];
t.fx.tick=function(){var b,f=0,A=t.timers;for(Ob=Date.now();f<A.length;f++)(b=A[f])()||A[f]!==b||A.splice(f--,1);A.length||t.fx.stop();Ob=void 0};t.fx.timer=function(b){t.timers.push(b);t.fx.start()};t.fx.interval=13;t.fx.start=function(){yb||(yb=!0,F())};t.fx.stop=function(){yb=null};t.fx.speeds={slow:600,fast:200,_default:400};t.fn.delay=function(b,f){return b=t.fx&&t.fx.speeds[b]||b,f=f||"fx",this.queue(f,function(A,I){var O=$a.setTimeout(A,b);I.stop=function(){$a.clearTimeout(O)}})};(function(){var b=
fb.createElement("input"),f=fb.createElement("select").appendChild(fb.createElement("option"));b.type="checkbox";ab.checkOn=""!==b.value;ab.optSelected=f.selected;(b=fb.createElement("input")).value="t";b.type="radio";ab.radioValue="t"===b.value})();var Fb=t.expr.attrHandle;t.fn.extend({attr:function(b,f){return Hb(this,t.attr,b,f,1<arguments.length)},removeAttr:function(b){return this.each(function(){t.removeAttr(this,b)})}});t.extend({attr:function(b,f,A){var I,O,X=b.nodeType;if(3!==X&&8!==X&&2!==
X)return void 0===b.getAttribute?t.prop(b,f,A):(1===X&&t.isXMLDoc(b)||(O=t.attrHooks[f.toLowerCase()]||(t.expr.match.bool.test(f)?Yc:void 0)),void 0!==A?null===A?void t.removeAttr(b,f):O&&"set"in O&&void 0!==(I=O.set(b,A,f))?I:(b.setAttribute(f,A+""),A):O&&"get"in O&&null!==(I=O.get(b,f))?I:null==(I=t.find.attr(b,f))?void 0:I)},attrHooks:{type:{set:function(b,f){if(!ab.radioValue&&"radio"===f&&x(b,"input")){var A=b.value;return b.setAttribute("type",f),A&&(b.value=A),f}}}},removeAttr:function(b,f){var A=
0,I=f&&f.match(mb);if(I&&1===b.nodeType)for(;f=I[A++];)b.removeAttribute(f)}});var Yc={set:function(b,f,A){return!1===f?t.removeAttr(b,A):b.setAttribute(A,A),A}};t.each(t.expr.match.bool.source.match(/\w+/g),function(b,f){var A=Fb[f]||t.find.attr;Fb[f]=function(I,O,X){var da,ma,oa=O.toLowerCase();return X||(ma=Fb[oa],Fb[oa]=da,da=null!=A(I,O,X)?oa:null,Fb[oa]=ma),da}});var kb=/^(?:input|select|textarea|button)$/i,Db=/^(?:a|area)$/i;t.fn.extend({prop:function(b,f){return Hb(this,t.prop,b,f,1<arguments.length)},
removeProp:function(b){return this.each(function(){delete this[t.propFix[b]||b]})}});t.extend({prop:function(b,f,A){var I,O,X=b.nodeType;if(3!==X&&8!==X&&2!==X)return 1===X&&t.isXMLDoc(b)||(f=t.propFix[f]||f,O=t.propHooks[f]),void 0!==A?O&&"set"in O&&void 0!==(I=O.set(b,A,f))?I:b[f]=A:O&&"get"in O&&null!==(I=O.get(b,f))?I:b[f]},propHooks:{tabIndex:{get:function(b){var f=t.find.attr(b,"tabindex");return f?parseInt(f,10):kb.test(b.nodeName)||Db.test(b.nodeName)&&b.href?0:-1}}},propFix:{for:"htmlFor",
class:"className"}});ab.optSelected||(t.propHooks.selected={get:function(b){b=b.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(b){b=b.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}});t.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){t.propFix[this.toLowerCase()]=this});t.fn.extend({addClass:function(b){var f,A,I,O,X,da,ma,oa=0;if(Va(b))return this.each(function(wa){t(this).addClass(b.call(this,
wa,na(this)))});if((f=ta(b)).length)for(;A=this[oa++];)if(O=na(A),I=1===A.nodeType&&" "+qa(O)+" "){for(da=0;X=f[da++];)0>I.indexOf(" "+X+" ")&&(I+=X+" ");O!==(ma=qa(I))&&A.setAttribute("class",ma)}return this},removeClass:function(b){var f,A,I,O,X,da,ma,oa=0;if(Va(b))return this.each(function(wa){t(this).removeClass(b.call(this,wa,na(this)))});if(!arguments.length)return this.attr("class","");if((f=ta(b)).length)for(;A=this[oa++];)if(O=na(A),I=1===A.nodeType&&" "+qa(O)+" "){for(da=0;X=f[da++];)for(;-1<
I.indexOf(" "+X+" ");)I=I.replace(" "+X+" "," ");O!==(ma=qa(I))&&A.setAttribute("class",ma)}return this},toggleClass:function(b,f){var A=typeof b,I="string"===A||Array.isArray(b);return"boolean"==typeof f&&I?f?this.addClass(b):this.removeClass(b):Va(b)?this.each(function(O){t(this).toggleClass(b.call(this,O,na(this),f),f)}):this.each(function(){var O,X;if(I){var da=0;var ma=t(this);for(X=ta(b);O=X[da++];)ma.hasClass(O)?ma.removeClass(O):ma.addClass(O)}else void 0!==b&&"boolean"!==A||((O=na(this))&&
Qa.set(this,"__className__",O),this.setAttribute&&this.setAttribute("class",O||!1===b?"":Qa.get(this,"__className__")||""))})},hasClass:function(b){var f,A=0;for(b=" "+b+" ";f=this[A++];)if(1===f.nodeType&&-1<(" "+qa(na(f))+" ").indexOf(b))return!0;return!1}});var Ub=/\r/g;t.fn.extend({val:function(b){var f,A,I,O=this[0];return arguments.length?(I=Va(b),this.each(function(X){var da;1===this.nodeType&&(null==(da=I?b.call(this,X,t(this).val()):b)?da="":"number"==typeof da?da+="":Array.isArray(da)&&
(da=t.map(da,function(ma){return null==ma?"":ma+""})),(f=t.valHooks[this.type]||t.valHooks[this.nodeName.toLowerCase()])&&"set"in f&&void 0!==f.set(this,da,"value")||(this.value=da))})):O?(f=t.valHooks[O.type]||t.valHooks[O.nodeName.toLowerCase()])&&"get"in f&&void 0!==(A=f.get(O,"value"))?A:"string"==typeof(A=O.value)?A.replace(Ub,""):null==A?"":A:void 0}});t.extend({valHooks:{option:{get:function(b){var f=t.find.attr(b,"value");return null!=f?f:qa(t.text(b))}},select:{get:function(b){var f,A,I=
b.options,O=b.selectedIndex,X="select-one"===b.type,da=X?null:[],ma=X?O+1:I.length;for(A=0>O?ma:X?O:0;A<ma;A++)if(!(!(f=I[A]).selected&&A!==O||f.disabled||f.parentNode.disabled&&x(f.parentNode,"optgroup"))){if(b=t(f).val(),X)return b;da.push(b)}return da},set:function(b,f){var A,I,O=b.options;f=t.makeArray(f);for(var X=O.length;X--;)((I=O[X]).selected=-1<t.inArray(t.valHooks.option.get(I),f))&&(A=!0);return A||(b.selectedIndex=-1),f}}}});t.each(["radio","checkbox"],function(){t.valHooks[this]={set:function(b,
f){if(Array.isArray(f))return b.checked=-1<t.inArray(t(b).val(),f)}};ab.checkOn||(t.valHooks[this].get=function(b){return null===b.getAttribute("value")?"on":b.value})});ab.focusin="onfocusin"in $a;var Nc=/^(?:focusinfocus|focusoutblur)$/,yd=function(b){b.stopPropagation()};t.extend(t.event,{trigger:function(b,f,A,I){var O,X,da,ma,oa,wa,Da=[A||fb],ua=qb.call(b,"type")?b.type:b;var Pa=qb.call(b,"namespace")?b.namespace.split("."):[];if(O=wa=X=A=A||fb,3!==A.nodeType&&8!==A.nodeType&&!Nc.test(ua+t.event.triggered)&&
(-1<ua.indexOf(".")&&(Pa=ua.split("."),ua=Pa.shift(),Pa.sort()),da=0>ua.indexOf(":")&&"on"+ua,(b=b[t.expando]?b:new t.Event(ua,"object"==typeof b&&b)).isTrigger=I?2:3,b.namespace=Pa.join("."),b.rnamespace=b.namespace?new RegExp("(^|\\.)"+Pa.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=A),f=null==f?[b]:t.makeArray(f,[b]),oa=t.event.special[ua]||{},I||!oa.trigger||!1!==oa.trigger.apply(A,f))){if(!I&&!oa.noBubble&&!ob(A)){var cb=oa.delegateType||ua;for(Nc.test(cb+ua)||(O=
O.parentNode);O;O=O.parentNode)Da.push(O),X=O;X===(A.ownerDocument||fb)&&Da.push(X.defaultView||X.parentWindow||$a)}for(Pa=0;(O=Da[Pa++])&&!b.isPropagationStopped();)wa=O,b.type=1<Pa?cb:oa.bindType||ua,(ma=(Qa.get(O,"events")||Object.create(null))[b.type]&&Qa.get(O,"handle"))&&ma.apply(O,f),(ma=da&&O[da])&&ma.apply&&zb(O)&&(b.result=ma.apply(O,f),!1===b.result&&b.preventDefault());return b.type=ua,I||b.isDefaultPrevented()||oa._default&&!1!==oa._default.apply(Da.pop(),f)||!zb(A)||da&&Va(A[ua])&&!ob(A)&&
((X=A[da])&&(A[da]=null),t.event.triggered=ua,b.isPropagationStopped()&&wa.addEventListener(ua,yd),A[ua](),b.isPropagationStopped()&&wa.removeEventListener(ua,yd),t.event.triggered=void 0,X&&(A[da]=X)),b.result}},simulate:function(b,f,A){b=t.extend(new t.Event,A,{type:b,isSimulated:!0});t.event.trigger(b,null,f)}});t.fn.extend({trigger:function(b,f){return this.each(function(){t.event.trigger(b,f,this)})},triggerHandler:function(b,f){var A=this[0];if(A)return t.event.trigger(b,f,A,!0)}});ab.focusin||
t.each({focus:"focusin",blur:"focusout"},function(b,f){var A=function(I){t.event.simulate(f,I.target,t.event.fix(I))};t.event.special[f]={setup:function(){var I=this.ownerDocument||this.document||this,O=Qa.access(I,f);O||I.addEventListener(b,A,!0);Qa.access(I,f,(O||0)+1)},teardown:function(){var I=this.ownerDocument||this.document||this,O=Qa.access(I,f)-1;O?Qa.access(I,f,O):(I.removeEventListener(b,A,!0),Qa.remove(I,f))}}});var id=$a.location,zd=Date.now(),Mc=/\?/;t.parseXML=function(b){if(!b||"string"!=
typeof b)return null;try{var f=(new $a.DOMParser).parseFromString(b,"text/xml")}catch(A){f=void 0}return f&&!f.getElementsByTagName("parsererror").length||t.error("Invalid XML: "+b),f};var Oc=/\[\]$/,Jb=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;t.param=function(b,f){var A,I=[],O=function(X,da){da=Va(da)?da():da;I[I.length]=encodeURIComponent(X)+"="+encodeURIComponent(null==da?"":da)};if(null==b)return"";if(Array.isArray(b)||b.jquery&&!t.isPlainObject(b))t.each(b,
function(){O(this.name,this.value)});else for(A in b)pa(A,b[A],f,O);return I.join("&")};t.fn.extend({serialize:function(){return t.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var b=t.prop(this,"elements");return b?t.makeArray(b):this}).filter(function(){var b=this.type;return this.name&&!t(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(b)&&(this.checked||!Ea.test(b))}).map(function(b,f){b=t(this).val();return null==b?null:Array.isArray(b)?t.map(b,function(A){return{name:f.name,
value:A.replace(Jb,"\r\n")}}):{name:f.name,value:b.replace(Jb,"\r\n")}}).get()}});var Ec=/%20/g,Fc=/#.*$/,dd=/([?&])_=[^&]*/,Rc=/^(.*?):[ \t]*([^\r\n]*)$/gm,nd=/^(?:GET|HEAD)$/,od=/^\/\//,pd={},Sc={},Zc="*/".concat("*"),Uc=fb.createElement("a");Uc.href=id.href;t.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:id.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(id.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",
accepts:{"*":Zc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":t.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(b,f){return f?Ha(Ha(b,t.ajaxSettings),f):Ha(t.ajaxSettings,b)},ajaxPrefilter:Fa(pd),ajaxTransport:Fa(Sc),
ajax:function(b,f){function A(wb,rc,bd,ld){var Pc,cd,Kc,Lc,Hc,pb=rc;nb||(nb=!0,ma&&$a.clearTimeout(ma),I=void 0,X=ld||"",Ya.readyState=0<wb?4:0,Pc=200<=wb&&300>wb||304===wb,bd&&(Lc=function(Wb,ic,ac){for(var Dc,vc,Tb,rb,mc=Wb.contents,Vb=Wb.dataTypes;"*"===Vb[0];)Vb.shift(),void 0===Dc&&(Dc=Wb.mimeType||ic.getResponseHeader("Content-Type"));if(Dc)for(vc in mc)if(mc[vc]&&mc[vc].test(Dc)){Vb.unshift(vc);break}if(Vb[0]in ac)Tb=Vb[0];else{for(vc in ac){if(!Vb[0]||Wb.converters[vc+" "+Vb[0]]){Tb=vc;break}rb||=
vc}Tb=Tb||rb}if(Tb)return Tb!==Vb[0]&&Vb.unshift(Tb),ac[Tb]}(ua,Ya,bd)),!Pc&&-1<t.inArray("script",ua.dataTypes)&&(ua.converters["text script"]=function(){}),Lc=function(Wb,ic,ac,Dc){var vc,Tb,rb,mc,Vb,Tc={},fd=Wb.dataTypes.slice();if(fd[1])for(rb in Wb.converters)Tc[rb.toLowerCase()]=Wb.converters[rb];for(Tb=fd.shift();Tb;)if(Wb.responseFields[Tb]&&(ac[Wb.responseFields[Tb]]=ic),!Vb&&Dc&&Wb.dataFilter&&(ic=Wb.dataFilter(ic,Wb.dataType)),Vb=Tb,Tb=fd.shift())if("*"===Tb)Tb=Vb;else if("*"!==Vb&&Vb!==
Tb){if(!(rb=Tc[Vb+" "+Tb]||Tc["* "+Tb]))for(vc in Tc)if((mc=vc.split(" "))[1]===Tb&&(rb=Tc[Vb+" "+mc[0]]||Tc["* "+mc[0]])){!0===rb?rb=Tc[vc]:!0!==Tc[vc]&&(Tb=mc[0],fd.unshift(mc[1]));break}if(!0!==rb)if(rb&&Wb.throws)ic=rb(ic);else try{ic=rb(ic)}catch(vd){return{state:"parsererror",error:rb?vd:"No conversion from "+Vb+" to "+Tb}}}return{state:"success",data:ic}}(ua,Lc,Ya,Pc),Pc?(ua.ifModified&&((Hc=Ya.getResponseHeader("Last-Modified"))&&(t.lastModified[O]=Hc),(Hc=Ya.getResponseHeader("etag"))&&(t.etag[O]=
Hc)),204===wb||"HEAD"===ua.type?pb="nocontent":304===wb?pb="notmodified":(pb=Lc.state,cd=Lc.data,Pc=!(Kc=Lc.error))):(Kc=pb,!wb&&pb||(pb="error",0>wb&&(wb=0))),Ya.status=wb,Ya.statusText=(rc||pb)+"",Pc?Wa.resolveWith(Pa,[cd,pb,Ya]):Wa.rejectWith(Pa,[Ya,pb,Kc]),Ya.statusCode(pc),pc=void 0,oa&&cb.trigger(Pc?"ajaxSuccess":"ajaxError",[Ya,ua,Pc?cd:Kc]),ub.fireWith(Pa,[Ya,pb]),oa&&(cb.trigger("ajaxComplete",[Ya,ua]),--t.active||t.event.trigger("ajaxStop")))}"object"==typeof b&&(f=b,b=void 0);f=f||{};var I,
O,X,da,ma,oa,wa,Da,ua=t.ajaxSetup({},f),Pa=ua.context||ua,cb=ua.context&&(Pa.nodeType||Pa.jquery)?t(Pa):t.event,Wa=t.Deferred(),ub=t.Callbacks("once memory"),pc=ua.statusCode||{},Qc={},uc={},Jc="canceled",Ya={readyState:0,getResponseHeader:function(wb){var rc;if(nb){if(!da)for(da={};rc=Rc.exec(X);)da[rc[1].toLowerCase()+" "]=(da[rc[1].toLowerCase()+" "]||[]).concat(rc[2]);rc=da[wb.toLowerCase()+" "]}return null==rc?null:rc.join(", ")},getAllResponseHeaders:function(){return nb?X:null},setRequestHeader:function(wb,
rc){return null==nb&&(wb=uc[wb.toLowerCase()]=uc[wb.toLowerCase()]||wb,Qc[wb]=rc),this},overrideMimeType:function(wb){return null==nb&&(ua.mimeType=wb),this},statusCode:function(wb){var rc;if(wb)if(nb)Ya.always(wb[Ya.status]);else for(rc in wb)pc[rc]=[pc[rc],wb[rc]];return this},abort:function(wb){wb=wb||Jc;return I&&I.abort(wb),A(0,wb),this}};if(Wa.promise(Ya),ua.url=((b||ua.url||id.href)+"").replace(od,id.protocol+"//"),ua.type=f.method||f.type||ua.method||ua.type,ua.dataTypes=(ua.dataType||"*").toLowerCase().match(mb)||
[""],null==ua.crossDomain){b=fb.createElement("a");try{b.href=ua.url,b.href=b.href,ua.crossDomain=Uc.protocol+"//"+Uc.host!=b.protocol+"//"+b.host}catch(wb){ua.crossDomain=!0}}if(ua.data&&ua.processData&&"string"!=typeof ua.data&&(ua.data=t.param(ua.data,ua.traditional)),Ga(pd,ua,f,Ya),nb)return Ya;for(wa in(oa=t.event&&ua.global)&&0==t.active++&&t.event.trigger("ajaxStart"),ua.type=ua.type.toUpperCase(),ua.hasContent=!nd.test(ua.type),O=ua.url.replace(Fc,""),ua.hasContent?ua.data&&ua.processData&&
0===(ua.contentType||"").indexOf("application/x-www-form-urlencoded")&&(ua.data=ua.data.replace(Ec,"+")):(Da=ua.url.slice(O.length),ua.data&&(ua.processData||"string"==typeof ua.data)&&(O+=(Mc.test(O)?"&":"?")+ua.data,delete ua.data),!1===ua.cache&&(O=O.replace(dd,"$1"),Da=(Mc.test(O)?"&":"?")+"_="+zd++ +Da),ua.url=O+Da),ua.ifModified&&(t.lastModified[O]&&Ya.setRequestHeader("If-Modified-Since",t.lastModified[O]),t.etag[O]&&Ya.setRequestHeader("If-None-Match",t.etag[O])),(ua.data&&ua.hasContent&&
!1!==ua.contentType||f.contentType)&&Ya.setRequestHeader("Content-Type",ua.contentType),Ya.setRequestHeader("Accept",ua.dataTypes[0]&&ua.accepts[ua.dataTypes[0]]?ua.accepts[ua.dataTypes[0]]+("*"!==ua.dataTypes[0]?", "+Zc+"; q=0.01":""):ua.accepts["*"]),ua.headers)Ya.setRequestHeader(wa,ua.headers[wa]);if(ua.beforeSend&&(!1===ua.beforeSend.call(Pa,Ya,ua)||nb))return Ya.abort();if(Jc="abort",ub.add(ua.complete),Ya.done(ua.success),Ya.fail(ua.error),I=Ga(Sc,ua,f,Ya)){if(Ya.readyState=1,oa&&cb.trigger("ajaxSend",
[Ya,ua]),nb)return Ya;ua.async&&0<ua.timeout&&(ma=$a.setTimeout(function(){Ya.abort("timeout")},ua.timeout));try{var nb=!1;I.send(Qc,A)}catch(wb){if(nb)throw wb;A(-1,wb)}}else A(-1,"No Transport");return Ya},getJSON:function(b,f,A){return t.get(b,f,A,"json")},getScript:function(b,f){return t.get(b,void 0,f,"script")}});t.each(["get","post"],function(b,f){t[f]=function(A,I,O,X){return Va(I)&&(X=X||O,O=I,I=void 0),t.ajax(t.extend({url:A,type:f,dataType:X,data:I,success:O},t.isPlainObject(A)&&A))}});
t.ajaxPrefilter(function(b){for(var f in b.headers)"content-type"===f.toLowerCase()&&(b.contentType=b.headers[f]||"")});t._evalUrl=function(b,f,A){return t.ajax({url:b,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(I){t.globalEval(I,f,A)}})};t.fn.extend({wrapAll:function(b){var f;return this[0]&&(Va(b)&&(b=b.call(this[0])),f=t(b,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&f.insertBefore(this[0]),f.map(function(){for(var A=
this;A.firstElementChild;)A=A.firstElementChild;return A}).append(this)),this},wrapInner:function(b){return Va(b)?this.each(function(f){t(this).wrapInner(b.call(this,f))}):this.each(function(){var f=t(this),A=f.contents();A.length?A.wrapAll(b):f.append(b)})},wrap:function(b){var f=Va(b);return this.each(function(A){t(this).wrapAll(f?b.call(this,A):b)})},unwrap:function(b){return this.parent(b).not("body").each(function(){t(this).replaceWith(this.childNodes)}),this}});t.expr.pseudos.hidden=function(b){return!t.expr.pseudos.visible(b)};
t.expr.pseudos.visible=function(b){return!!(b.offsetWidth||b.offsetHeight||b.getClientRects().length)};t.ajaxSettings.xhr=function(){try{return new $a.XMLHttpRequest}catch(b){}};var jd={0:200,1223:204},Ac=t.ajaxSettings.xhr();ab.cors=!!Ac&&"withCredentials"in Ac;ab.ajax=Ac=!!Ac;t.ajaxTransport(function(b){var f,A;if(ab.cors||Ac&&!b.crossDomain)return{send:function(I,O){var X,da=b.xhr();if(da.open(b.type,b.url,b.async,b.username,b.password),b.xhrFields)for(X in b.xhrFields)da[X]=b.xhrFields[X];for(X in b.mimeType&&
da.overrideMimeType&&da.overrideMimeType(b.mimeType),b.crossDomain||I["X-Requested-With"]||(I["X-Requested-With"]="XMLHttpRequest"),I)da.setRequestHeader(X,I[X]);f=function(ma){return function(){f&&(f=A=da.onload=da.onerror=da.onabort=da.ontimeout=da.onreadystatechange=null,"abort"===ma?da.abort():"error"===ma?"number"!=typeof da.status?O(0,"error"):O(da.status,da.statusText):O(jd[da.status]||da.status,da.statusText,"text"!==(da.responseType||"text")||"string"!=typeof da.responseText?{binary:da.response}:
{text:da.responseText},da.getAllResponseHeaders()))}};da.onload=f();A=da.onerror=da.ontimeout=f("error");void 0!==da.onabort?da.onabort=A:da.onreadystatechange=function(){4===da.readyState&&$a.setTimeout(function(){f&&A()})};f=f("abort");try{da.send(b.hasContent&&b.data||null)}catch(ma){if(f)throw ma;}},abort:function(){f&&f()}}});t.ajaxPrefilter(function(b){b.crossDomain&&(b.contents.script=!1)});t.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},
contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(b){return t.globalEval(b),b}}});t.ajaxPrefilter("script",function(b){void 0===b.cache&&(b.cache=!1);b.crossDomain&&(b.type="GET")});t.ajaxTransport("script",function(b){var f,A;if(b.crossDomain||b.scriptAttrs)return{send:function(I,O){f=t("<script>").attr(b.scriptAttrs||{}).prop({charset:b.scriptCharset,src:b.url}).on("load error",A=function(X){f.remove();A=null;X&&O("error"===X.type?404:200,X.type)});fb.head.appendChild(f[0])},
abort:function(){A&&A()}}});var kd,Ad=[],qd=/(=)\?(?=&|$)|\?\?/;t.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var b=Ad.pop()||t.expando+"_"+zd++;return this[b]=!0,b}});t.ajaxPrefilter("json jsonp",function(b,f,A){var I,O,X,da=!1!==b.jsonp&&(qd.test(b.url)?"url":"string"==typeof b.data&&0===(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&qd.test(b.data)&&"data");if(da||"jsonp"===b.dataTypes[0])return I=b.jsonpCallback=Va(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,
da?b[da]=b[da].replace(qd,"$1"+I):!1!==b.jsonp&&(b.url+=(Mc.test(b.url)?"&":"?")+b.jsonp+"="+I),b.converters["script json"]=function(){return X||t.error(I+" was not called"),X[0]},b.dataTypes[0]="json",O=$a[I],$a[I]=function(){X=arguments},A.always(function(){void 0===O?t($a).removeProp(I):$a[I]=O;b[I]&&(b.jsonpCallback=f.jsonpCallback,Ad.push(I));X&&Va(O)&&O(X[0]);X=O=void 0}),"script"});ab.createHTMLDocument=((kd=fb.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",
2===kd.childNodes.length);t.parseHTML=function(b,f,A){return"string"!=typeof b?[]:("boolean"==typeof f&&(A=f,f=!1),f||(ab.createHTMLDocument?((I=(f=fb.implementation.createHTMLDocument("")).createElement("base")).href=fb.location.href,f.head.appendChild(I)):f=fb),X=!A&&[],(O=Ua.exec(b))?[f.createElement(O[1])]:(O=B([b],f,X),X&&X.length&&t(X).remove(),t.merge([],O.childNodes)));var I,O,X};t.fn.load=function(b,f,A){var I,O,X,da=this,ma=b.indexOf(" ");return-1<ma&&(I=qa(b.slice(ma)),b=b.slice(0,ma)),
Va(f)?(A=f,f=void 0):f&&"object"==typeof f&&(O="POST"),0<da.length&&t.ajax({url:b,type:O||"GET",dataType:"html",data:f}).done(function(oa){X=arguments;da.html(I?t("<div>").append(t.parseHTML(oa)).find(I):oa)}).always(A&&function(oa,wa){da.each(function(){A.apply(this,X||[oa.responseText,wa,oa])})}),this};t.expr.pseudos.animated=function(b){return t.grep(t.timers,function(f){return b===f.elem}).length};t.offset={setOffset:function(b,f,A){var I,O,X,da=t.css(b,"position"),ma=t(b),oa={};"static"===da&&
(b.style.position="relative");var wa=ma.offset();var Da=t.css(b,"top");var ua=t.css(b,"left");("absolute"===da||"fixed"===da)&&-1<(Da+ua).indexOf("auto")?(X=(I=ma.position()).top,O=I.left):(X=parseFloat(Da)||0,O=parseFloat(ua)||0);Va(f)&&(f=f.call(b,A,t.extend({},wa)));null!=f.top&&(oa.top=f.top-wa.top+X);null!=f.left&&(oa.left=f.left-wa.left+O);"using"in f?f.using.call(b,oa):("number"==typeof oa.top&&(oa.top+="px"),"number"==typeof oa.left&&(oa.left+="px"),ma.css(oa))}};t.fn.extend({offset:function(b){if(arguments.length)return void 0===
b?this:this.each(function(O){t.offset.setOffset(this,b,O)});var f,A,I=this[0];return I?I.getClientRects().length?(f=I.getBoundingClientRect(),A=I.ownerDocument.defaultView,{top:f.top+A.pageYOffset,left:f.left+A.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var b,f=this[0],A={top:0,left:0};if("fixed"===t.css(f,"position"))var I=f.getBoundingClientRect();else{I=this.offset();var O=f.ownerDocument;for(b=f.offsetParent||O.documentElement;b&&(b===O.body||b===O.documentElement)&&
"static"===t.css(b,"position");)b=b.parentNode;b&&b!==f&&1===b.nodeType&&((A=t(b).offset()).top+=t.css(b,"borderTopWidth",!0),A.left+=t.css(b,"borderLeftWidth",!0))}return{top:I.top-A.top-t.css(f,"marginTop",!0),left:I.left-A.left-t.css(f,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var b=this.offsetParent;b&&"static"===t.css(b,"position");)b=b.offsetParent;return b||ea})}});t.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,f){var A="pageYOffset"===
f;t.fn[b]=function(I){return Hb(this,function(O,X,da){var ma;if(ob(O)?ma=O:9===O.nodeType&&(ma=O.defaultView),void 0===da)return ma?ma[f]:O[X];ma?ma.scrollTo(A?ma.pageXOffset:da,A?da:ma.pageYOffset):O[X]=da},b,I,arguments.length)}});t.each(["top","left"],function(b,f){t.cssHooks[f]=ba(ab.pixelPosition,function(A,I){if(I)return I=S(A,f),Gc.test(I)?t(A).position()[f]+"px":I})});t.each({Height:"height",Width:"width"},function(b,f){t.each({padding:"inner"+b,content:f,"":"outer"+b},function(A,I){t.fn[I]=
function(O,X){var da=arguments.length&&(A||"boolean"!=typeof O),ma=A||(!0===O||!0===X?"margin":"border");return Hb(this,function(oa,wa,Da){var ua;return ob(oa)?0===I.indexOf("outer")?oa["inner"+b]:oa.document.documentElement["client"+b]:9===oa.nodeType?(ua=oa.documentElement,Math.max(oa.body["scroll"+b],ua["scroll"+b],oa.body["offset"+b],ua["offset"+b],ua["client"+b])):void 0===Da?t.css(oa,wa,ma):t.style(oa,wa,Da,ma)},f,da?O:void 0,da)}})});t.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),
function(b,f){t.fn[f]=function(A){return this.on(f,A)}});t.fn.extend({bind:function(b,f,A){return this.on(b,null,f,A)},unbind:function(b,f){return this.off(b,null,f)},delegate:function(b,f,A,I){return this.on(f,b,A,I)},undelegate:function(b,f,A){return 1===arguments.length?this.off(b,"**"):this.off(f,b||"**",A)},hover:function(b,f){return this.mouseenter(b).mouseleave(f||b)}});t.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),
function(b,f){t.fn[f]=function(A,I){return 0<arguments.length?this.on(f,null,A,I):this.trigger(f)}});var rd=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;t.proxy=function(b,f){var A,I,O;if("string"==typeof f&&(A=b[f],f=b,b=A),Va(b))return I=hb.call(arguments,2),(O=function(){return b.apply(f||this,I.concat(hb.call(arguments)))}).guid=b.guid=b.guid||t.guid++,O};t.holdReady=function(b){b?t.readyWait++:t.ready(!0)};t.isArray=Array.isArray;t.parseJSON=JSON.parse;t.nodeName=x;t.isFunction=Va;t.isWindow=ob;t.camelCase=
e;t.type=h;t.now=Date.now;t.isNumeric=function(b){var f=t.type(b);return("number"===f||"string"===f)&&!isNaN(b-parseFloat(b))};t.trim=function(b){return null==b?"":(b+"").replace(rd,"")};void 0===(Bd=function(){return t}.apply(Hd,Sd=[]))||($c.exports=Bd);var sd=$a.jQuery,Fd=$a.$;return t.noConflict=function(b){return $a.$===t&&($a.$=Fd),b&&$a.jQuery===t&&($a.jQuery=sd),t},void 0===a&&($a.jQuery=$a.$=t),t});(function($a){function a(U,S,ba){U.byteLength;for(var Y=0,aa=ba.length;Y<aa;Y++){var ia=ba.charCodeAt(Y);
if(128>ia)U.setUint8(S++,ia>>>0&127|0);else{if(2048>ia)U.setUint8(S++,ia>>>6&31|192);else{if(65536>ia)U.setUint8(S++,ia>>>12&15|224);else{if(!(1114112>ia))throw Error("bad codepoint "+ia);U.setUint8(S++,ia>>>18&7|240);U.setUint8(S++,ia>>>12&63|128)}U.setUint8(S++,ia>>>6&63|128)}U.setUint8(S++,ia>>>0&63|128)}}}function d(U){for(var S=0,ba=0,Y=U.length;ba<Y;ba++){var aa=U.charCodeAt(ba);if(128>aa)S+=1;else if(2048>aa)S+=2;else if(65536>aa)S+=3;else{if(!(1114112>aa))throw Error("bad codepoint "+aa);
S+=4}}return S}function h(U){var S=new ArrayBuffer(function aa(Y){var ia=typeof Y;if("string"===ia){if(32>(z=d(Y)))return 1+z;if(256>z)return 2+z;if(65536>z)return 3+z;if(4294967296>z)return 5+z}if(Y instanceof Uint8Array){if(256>(z=Y.byteLength))return 2+z;if(65536>z)return 3+z;if(4294967296>z)return 5+z}if("number"===ia){if(Math.floor(Y)!==Y)return 9;if(0<=Y){if(128>Y)return 1;if(256>Y)return 2;if(65536>Y)return 3;if(4294967296>Y)return 5;throw Error("Number too big 0x"+Y.toString(16));}if(-32<=
Y)return 1;if(-128<=Y)return 2;if(-32768<=Y)return 3;if(-2147483648<=Y)return 5;throw Error("Number too small -0x"+Y.toString(16).substr(1));}if("boolean"===ia||null===Y)return 1;if("object"===ia){var z;ia=0;if(Array.isArray(Y)){z=Y.length;for(var G=0;G<z;G++)ia+=aa(Y[G])}else{var F=Object.keys(Y);z=F.length;for(G=0;G<z;G++){var R=F[G];ia+=aa(R)+aa(Y[R])}}if(16>z)return 1+ia;if(65536>z)return 3+ia;if(4294967296>z)return 5+ia;throw Error("Array or object too long 0x"+z.toString(16));}throw Error("Unknown type "+
ia);}(U));return function G(aa,ia,z){var F=typeof aa;if("string"===F){if(32>(R=d(aa)))return ia.setUint8(z,160|R),a(ia,z+1,aa),1+R;if(256>R)return ia.setUint8(z,217),ia.setUint8(z+1,R),a(ia,z+2,aa),2+R;if(65536>R)return ia.setUint8(z,218),ia.setUint16(z+1,R),a(ia,z+3,aa),3+R;if(4294967296>R)return ia.setUint8(z,219),ia.setUint32(z+1,R),a(ia,z+5,aa),5+R}if(aa instanceof Uint8Array){var R=aa.byteLength,T=new Uint8Array(ia.buffer);if(256>R)return ia.setUint8(z,196),ia.setUint8(z+1,R),T.set(aa,z+2),2+
R;if(65536>R)return ia.setUint8(z,197),ia.setUint16(z+1,R),T.set(aa,z+3),3+R;if(4294967296>R)return ia.setUint8(z,198),ia.setUint32(z+1,R),T.set(aa,z+5),5+R}if("number"===F){if(!isFinite(aa))throw Error("Number not finite: "+aa);if(Math.floor(aa)!==aa)return ia.setUint8(z,203),ia.setFloat64(z+1,aa),9;if(0<=aa){if(128>aa)return ia.setUint8(z,aa),1;if(256>aa)return ia.setUint8(z,204),ia.setUint8(z+1,aa),2;if(65536>aa)return ia.setUint8(z,205),ia.setUint16(z+1,aa),3;if(4294967296>aa)return ia.setUint8(z,
206),ia.setUint32(z+1,aa),5;throw Error("Number too big 0x"+aa.toString(16));}if(-32<=aa)return ia.setInt8(z,aa),1;if(-128<=aa)return ia.setUint8(z,208),ia.setInt8(z+1,aa),2;if(-32768<=aa)return ia.setUint8(z,209),ia.setInt16(z+1,aa),3;if(-2147483648<=aa)return ia.setUint8(z,210),ia.setInt32(z+1,aa),5;throw Error("Number too small -0x"+(-aa).toString(16).substr(1));}if(null===aa)return ia.setUint8(z,192),1;if("boolean"===F)return ia.setUint8(z,aa?195:194),1;if("object"===F){F=0;if(T=Array.isArray(aa))R=
aa.length;else{var fa=Object.keys(aa);R=fa.length}if(16>R?(ia.setUint8(z,R|(T?144:128)),F=1):65536>R?(ia.setUint8(z,T?220:222),ia.setUint16(z+1,R),F=3):4294967296>R&&(ia.setUint8(z,T?221:223),ia.setUint32(z+1,R),F=5),T)for(T=0;T<R;T++)F+=G(aa[T],ia,z+F);else for(T=0;T<R;T++){var Z=fa[T];F+=G(Z,ia,z+F);F+=G(aa[Z],ia,z+F)}return F}throw Error("Unknown type "+F);}(U,new DataView(S),0),new Uint8Array(S)}function q(U,S,ba){return S?new U(S.buffer,S.byteOffset,S.byteLength/(ba||1)):void 0}function x(U,
S){var ba=U.length/2;S||=new Int16Array(ba);for(var Y=0,aa=0;Y<ba;++Y,aa+=2)S[Y]=U[aa]<<8^U[aa+1]<<0;return S}function p(U,S){var ba=U.length/4;S||=new Int32Array(ba);for(var Y=0,aa=0;Y<ba;++Y,aa+=4)S[Y]=U[aa]<<24^U[aa+1]<<16^U[aa+2]<<8^U[aa+3]<<0;return S}function w(U,S){var ba=U.length;S||=new Uint8Array(4*ba);for(var Y=q(DataView,S),aa=0;aa<ba;++aa)Y.setInt32(4*aa,U[aa]);return q(Uint8Array,S)}function v(U,S,ba){var Y=U.length;S=1/S;ba||=new Float32Array(Y);for(var aa=0;aa<Y;++aa)ba[aa]=U[aa]*
S;return ba}function C(U,S,ba){var Y=U.length;ba||=new Int32Array(Y);for(var aa=0;aa<Y;++aa)ba[aa]=Math.round(U[aa]*S);return ba}function M(U,S){var ba;if(!S){var Y=S=0;for(ba=U.length;Y<ba;Y+=2)S+=U[Y+1];S=new U.constructor(S)}var aa=0;Y=0;for(ba=U.length;Y<ba;Y+=2)for(var ia=U[Y],z=U[Y+1],G=0;G<z;++G)S[aa]=ia,++aa;return S}function L(U){if(0===U.length)return new Int32Array;var S,ba=2;var Y=1;for(S=U.length;Y<S;++Y)U[Y-1]!==U[Y]&&(ba+=2);ba=new Int32Array(ba);var aa=0,ia=1;Y=1;for(S=U.length;Y<
S;++Y)U[Y-1]!==U[Y]?(ba[aa]=U[Y-1],ba[aa+1]=ia,ia=1,aa+=2):++ia;return ba[aa]=U[U.length-1],ba[aa+1]=ia,ba}function P(U,S){var ba=U.length;S||=new U.constructor(ba);ba&&(S[0]=U[0]);for(var Y=1;Y<ba;++Y)S[Y]=U[Y]+S[Y-1];return S}function e(U,S){var ba=U.length;S||=new U.constructor(ba);S[0]=U[0];for(var Y=1;Y<ba;++Y)S[Y]=U[Y]-U[Y-1];return S}function g(U,S){var ba,Y,aa=U instanceof Int8Array?127:32767,ia=-aa-1,z=U.length;if(!S){for(ba=S=0;ba<z;++ba)U[ba]<aa&&U[ba]>ia&&++S;S=new Int32Array(S)}for(Y=
ba=0;ba<z;){for(var G=0;U[ba]===aa||U[ba]===ia;)G+=U[ba],++ba;G+=U[ba];++ba;S[Y]=G;++Y}return S}function u(U,S,ba){return v(g(U,q(Int32Array,ba,4)),S,ba)}function n(U,S,ba,Y){var aa=new ArrayBuffer(12+Y.byteLength),ia=new Uint8Array(aa);aa=new DataView(aa);return aa.setInt32(0,U),aa.setInt32(4,S),ba&&ia.set(ba,8),ia.set(Y,12),ia}function y(U){return n(2,U.length,void 0,q(Uint8Array,U))}function D(U){return n(4,U.length,void 0,w(U))}function l(U,S){return n(5,U.length/S,w([S]),q(Uint8Array,U))}function B(U){return n(6,
U.length,void 0,w(L(U)))}function k(U){return n(8,U.length,void 0,w(L(e(U))))}function J(U,S){return n(10,U.length,w([S]),function(ba,Y){var aa=ba.length;Y||=new Uint8Array(2*aa);for(var ia=q(DataView,Y),z=0;z<aa;++z)ia.setInt16(2*z,ba[z]);return q(Uint8Array,Y)}(function(ba,Y,aa){ba=e(C(ba,Y),void 0);var ia=aa?127:32767,z=-ia-1,G=ba.length,F=0;for(Y=0;Y<G;++Y)0===(R=ba[Y])?++F:F+=R===ia||R===z?2:0<R?Math.ceil(R/ia):Math.ceil(R/z);aa=aa?new Int8Array(F):new Int16Array(F);for(Y=F=0;Y<G;++Y){var R;
if(0<=(R=ba[Y]))for(;R>=ia;)aa[F]=ia,++F,R-=ia;else for(;R<=z;)aa[F]=z,++F,R-=z;aa[F]=R;++F}return aa}(U,S)))}function m(U){var S={};return W.forEach(function(ba){void 0!==U[ba]&&(S[ba]=U[ba])}),U.bondAtomList&&(S.bondAtomList=D(U.bondAtomList)),U.bondOrderList&&(S.bondOrderList=y(U.bondOrderList)),S.xCoordList=J(U.xCoordList,1E3),S.yCoordList=J(U.yCoordList,1E3),S.zCoordList=J(U.zCoordList,1E3),U.bFactorList&&(S.bFactorList=J(U.bFactorList,100)),U.atomIdList&&(S.atomIdList=k(U.atomIdList)),U.altLocList&&
(S.altLocList=B(U.altLocList)),U.occupancyList&&(S.occupancyList=function(ba,Y){return n(9,ba.length,w([Y]),w(L(C(ba,Y))))}(U.occupancyList,100)),S.groupIdList=k(U.groupIdList),S.groupTypeList=D(U.groupTypeList),U.secStructList&&(S.secStructList=y(U.secStructList)),U.insCodeList&&(S.insCodeList=B(U.insCodeList)),U.sequenceIndexList&&(S.sequenceIndexList=k(U.sequenceIndexList)),S.chainIdList=l(U.chainIdList,4),U.chainNameList&&(S.chainNameList=l(U.chainNameList,4)),S}function K(U){function S(F){for(var R=
{},T=0;T<F;T++)R[ia()]=ia();return R}function ba(F){var R=U.subarray(z,z+F);return z+=F,R}function Y(F){var R=U.subarray(z,z+F);if(z+=F,65535<F){F=[];for(var T=0;T<R.length;T+=65535)F.push(String.fromCharCode.apply(null,R.subarray(T,T+65535)));return F.join("")}return String.fromCharCode.apply(null,R)}function aa(F){for(var R=Array(F),T=0;T<F;T++)R[T]=ia();return R}function ia(){var F,R,T=U[z];if(0==(128&T))return z++,T;if(128==(240&T))return z++,S(15&T);if(144==(240&T))return z++,aa(15&T);if(160==
(224&T))return z++,Y(31&T);if(224==(224&T))return F=G.getInt8(z),z++,F;switch(T){case 192:return z++,null;case 194:return z++,!1;case 195:return z++,!0;case 196:return R=G.getUint8(z+1),z+=2,ba(R);case 197:return R=G.getUint16(z+1),z+=3,ba(R);case 198:return R=G.getUint32(z+1),z+=5,ba(R);case 202:return F=G.getFloat32(z+1),z+=5,F;case 203:return F=G.getFloat64(z+1),z+=9,F;case 204:return F=U[z+1],z+=2,F;case 205:return F=G.getUint16(z+1),z+=3,F;case 206:return F=G.getUint32(z+1),z+=5,F;case 208:return F=
G.getInt8(z+1),z+=2,F;case 209:return F=G.getInt16(z+1),z+=3,F;case 210:return F=G.getInt32(z+1),z+=5,F;case 217:return R=G.getUint8(z+1),z+=2,Y(R);case 218:return R=G.getUint16(z+1),z+=3,Y(R);case 219:return R=G.getUint32(z+1),z+=5,Y(R);case 220:return R=G.getUint16(z+1),z+=3,aa(R);case 221:return R=G.getUint32(z+1),z+=5,aa(R);case 222:return R=G.getUint16(z+1),z+=3,S(R);case 223:return R=G.getUint32(z+1),z+=5,S(R)}throw Error("Unknown type 0x"+T.toString(16));}var z=0,G=new DataView(U.buffer);return ia()}
function N(U,S,ba,Y){switch(U){case 1:return function(aa,ia){var z=aa.length;ia||=new Float32Array(z/4);var G=q(DataView,ia);aa=q(DataView,aa);var F=0,R=0;for(z/=4;F<z;++F,R+=4)G.setFloat32(R,aa.getFloat32(R),!0);return ia}(S);case 2:return q(Int8Array,S);case 3:return x(S);case 4:return p(S);case 5:return q(Uint8Array,S);case 6:return M(p(S),new Uint8Array(ba));case 7:return M(p(S));case 8:return P(M(p(S)),void 0);case 9:return function(aa,ia,z){return v(M(aa,q(Int32Array,z,4)),ia,z)}(p(S),p(Y)[0]);
case 10:return function(aa,ia,z){aa=g(aa,q(Int32Array,z,4));z=q(Float32Array,aa,4);return v(P(aa,q(Int32Array,z,4)),ia,z)}(x(S),p(Y)[0]);case 11:return v(x(S),p(Y)[0]);case 12:return u(x(S),p(Y)[0]);case 13:return u(q(Int8Array,S),p(Y)[0]);case 14:return g(x(S));case 15:return g(q(Int8Array,S))}}function Q(U,S){var ba=(S=S||{}).ignoreFields,Y={};return ha.forEach(function(aa){var ia,z,G,F,R=!!ba&&-1!==ba.indexOf(aa),T=U[aa];R||void 0===T||(T instanceof Uint8Array?Y[aa]=N.apply(null,(z=(ia=q(DataView,
T)).getInt32(0),G=ia.getInt32(4),F=T.subarray(8,12),[z,T.subarray(12),G,F])):Y[aa]=T)}),Y}function H(U,S){return U instanceof ArrayBuffer&&(U=new Uint8Array(U)),Q(U instanceof Uint8Array?K(U):U,S)}function V(U,S,ba,Y){var aa=new XMLHttpRequest;aa.addEventListener("load",function(){try{var ia=H(aa.response);ba(ia)}catch(z){Y(z)}},!0);aa.addEventListener("error",Y,!0);aa.responseType="arraybuffer";aa.open("GET",S+U.toUpperCase());aa.send()}var W="mmtfVersion mmtfProducer unitCell spaceGroup structureId title depositionDate releaseDate experimentalMethods resolution rFree rWork bioAssemblyList ncsOperatorList entityList groupList numBonds numAtoms numGroups numChains numModels groupsPerChain chainsPerModel".split(" "),
ha=W.concat("xCoordList yCoordList zCoordList groupIdList groupTypeList chainIdList bFactorList atomIdList altLocList occupancyList secStructList insCodeList sequenceIndexList chainNameList bondAtomList bondOrderList".split(" "));$a.encode=function(U){return h(m(U))};$a.decode=H;$a.traverse=function(U,S,ba){var Y,aa;ba=(ba||{}).firstModelOnly;var ia=S.onModel,z=S.onChain,G=S.onGroup,F=S.onAtom,R=S.onBond,T=0,fa=0,Z=0,qa=0,na=-1,ta=U.chainNameList,pa=U.secStructList,Fa=U.insCodeList,Ga=U.sequenceIndexList,
Ha=U.atomIdList,Ja=U.bFactorList,Na=U.altLocList,hb=U.occupancyList,Xb=U.bondAtomList,Pb=U.bondOrderList;S=0;for(Y=U.chainsPerModel.length;S<Y&&!(ba&&0<T);++S){var Lb=U.chainsPerModel[T];ia&&ia({chainCount:Lb,modelIndex:T});for(aa=0;aa<Lb;++aa){var xb=U.groupsPerChain[fa];if(z){var Kb=String.fromCharCode.apply(null,U.chainIdList.subarray(4*fa,4*fa+4)).replace(/\0/g,"");var qb=null;ta&&(qb=String.fromCharCode.apply(null,ta.subarray(4*fa,4*fa+4)).replace(/\0/g,""));z({groupCount:xb,chainIndex:fa,modelIndex:T,
chainId:Kb,chainName:qb})}for(Kb=0;Kb<xb;++Kb){var dc=U.groupList[U.groupTypeList[Z]],tc=dc.atomNameList.length;if(G){qb=null;pa&&(qb=pa[Z]);var ab=null;U.insCodeList&&(ab=String.fromCharCode(Fa[Z]));var Va=null;Ga&&(Va=Ga[Z]);G({atomCount:tc,groupIndex:Z,chainIndex:fa,modelIndex:T,groupId:U.groupIdList[Z],groupType:U.groupTypeList[Z],groupName:dc.groupName,singleLetterCode:dc.singleLetterCode,chemCompType:dc.chemCompType,secStruct:qb,insCode:ab,sequenceIndex:Va})}for(qb=0;qb<tc;++qb){if(F){ab=null;
Ha&&(ab=Ha[qa]);Va=null;Ja&&(Va=Ja[qa]);var ob=null;Na&&(ob=String.fromCharCode(Na[qa]));var fb=null;hb&&(fb=hb[qa]);F({atomIndex:qa,groupIndex:Z,chainIndex:fa,modelIndex:T,atomId:ab,element:dc.elementList[qb],atomName:dc.atomNameList[qb],formalCharge:dc.formalChargeList[qb],xCoord:U.xCoordList[qa],yCoord:U.yCoordList[qa],zCoord:U.zCoordList[qa],bFactor:Va,altLoc:ob,occupancy:fb})}qa+=1}if(R)for(Va=dc.bondAtomList,qb=0,ab=dc.bondOrderList.length;qb<ab;++qb)R({atomIndex1:qa-tc+Va[2*qb],atomIndex2:qa-
tc+Va[2*qb+1],bondOrder:dc.bondOrderList[qb]});Z+=1}fa+=1}if(aa=na+1,na=qa-1,R&&Xb)for(qb=0,ab=Xb.length;qb<ab;qb+=2)Lb=Xb[qb],xb=Xb[qb+1],(Lb>=aa&&Lb<=na||xb>=aa&&xb<=na)&&R({atomIndex1:Lb,atomIndex2:xb,bondOrder:Pb?Pb[qb/2]:null});T+=1}};$a.fetch=function(U,S,ba){V(U,"http://mmtf.rcsb.org/v1.0/full/",S,ba)};$a.fetchReduced=function(U,S,ba){V(U,"http://mmtf.rcsb.org/v1.0/reduced/",S,ba)};$a.version="v1.0.0";$a.fetchUrl="http://mmtf.rcsb.org/v1.0/full/";$a.fetchReducedUrl="http://mmtf.rcsb.org/v1.0/reduced/";
$a.encodeMsgpack=h;$a.encodeMmtf=m;$a.decodeMsgpack=K;$a.decodeMmtf=Q;Object.defineProperty($a,"__esModule",{value:!0})})(this.MMTF=this.MMTF||{});$c.exports=function q(a,d,h){function x(v,C){if(!d[v]){if(!a[v]){if(p)return p(v,!0);C=Error("Cannot find module '"+v+"'");throw C.code="MODULE_NOT_FOUND",C;}C=d[v]={exports:{}};a[v][0].call(C.exports,function(M){return x(a[v][1][M]||M)},C,C.exports,q,a,d,h)}return d[v].exports}for(var p=!1,w=0;w<h.length;w++)x(h[w]);return x}({1:[function(a,d,h){a="undefined"!=
typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;h.assign=function(p){for(var w=Array.prototype.slice.call(arguments,1);w.length;){var v=w.shift();if(v){if("object"!=typeof v)throw new TypeError(v+"must be non-object");for(var C in v)Object.prototype.hasOwnProperty.call(v,C)&&(p[C]=v[C])}}return p};h.shrinkBuf=function(p,w){return p.length===w?p:p.subarray?p.subarray(0,w):(p.length=w,p)};var q={arraySet:function(p,w,v,C,M){if(w.subarray&&p.subarray)p.set(w.subarray(v,
v+C),M);else for(var L=0;L<C;L++)p[M+L]=w[v+L]},flattenChunks:function(p){var w,v;var C=v=0;for(w=p.length;C<w;C++)v+=p[C].length;var M=new Uint8Array(v);C=v=0;for(w=p.length;C<w;C++){var L=p[C];M.set(L,v);v+=L.length}return M}},x={arraySet:function(p,w,v,C,M){for(var L=0;L<C;L++)p[M+L]=w[v+L]},flattenChunks:function(p){return[].concat.apply([],p)}};h.setTyped=function(p){p?(h.Buf8=Uint8Array,h.Buf16=Uint16Array,h.Buf32=Int32Array,h.assign(h,q)):(h.Buf8=Array,h.Buf16=Array,h.Buf32=Array,h.assign(h,
x))};h.setTyped(a)},{}],2:[function(a,d,h){function q(C,M){if(65534>M&&(C.subarray&&w||!C.subarray&&p))return String.fromCharCode.apply(null,x.shrinkBuf(C,M));for(var L="",P=0;P<M;P++)L+=String.fromCharCode(C[P]);return L}var x=a("./common"),p=!0,w=!0;try{String.fromCharCode.apply(null,[0])}catch(C){p=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(C){w=!1}var v=new x.Buf8(256);for(a=0;256>a;a++)v[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;v[254]=v[254]=1;h.string2buf=function(C){var M,
L,P,e,g=C.length,u=0;for(P=0;P<g;P++)55296==(64512&(M=C.charCodeAt(P)))&&P+1<g&&56320==(64512&(L=C.charCodeAt(P+1)))&&(M=65536+(M-55296<<10)+(L-56320),P++),u+=128>M?1:2048>M?2:65536>M?3:4;var n=new x.Buf8(u);for(P=e=0;e<u;P++)55296==(64512&(M=C.charCodeAt(P)))&&P+1<g&&56320==(64512&(L=C.charCodeAt(P+1)))&&(M=65536+(M-55296<<10)+(L-56320),P++),128>M?n[e++]=M:2048>M?(n[e++]=192|M>>>6,n[e++]=128|63&M):65536>M?(n[e++]=224|M>>>12,n[e++]=128|M>>>6&63,n[e++]=128|63&M):(n[e++]=240|M>>>18,n[e++]=128|M>>>12&
63,n[e++]=128|M>>>6&63,n[e++]=128|63&M);return n};h.buf2binstring=function(C){return q(C,C.length)};h.binstring2buf=function(C){for(var M=new x.Buf8(C.length),L=0,P=M.length;L<P;L++)M[L]=C.charCodeAt(L);return M};h.buf2string=function(C,M){var L,P,e,g=M||C.length,u=Array(2*g);for(M=L=0;M<g;)if(128>(P=C[M++]))u[L++]=P;else if(4<(e=v[P]))u[L++]=65533,M+=e-1;else{for(P&=2===e?31:3===e?15:7;1<e&&M<g;)P=P<<6|63&C[M++],e--;1<e?u[L++]=65533:65536>P?u[L++]=P:(P-=65536,u[L++]=55296|P>>10&1023,u[L++]=56320|
1023&P)}return q(u,L)};h.utf8border=function(C,M){var L;(M=M||C.length)>C.length&&(M=C.length);for(L=M-1;0<=L&&128==(192&C[L]);)L--;return 0>L||0===L?M:L+v[C[L]]>M?L:M}},{"./common":1}],3:[function(a,d,h){d.exports=function(q,x,p,w){var v=65535&q|0;q=q>>>16&65535|0;for(var C;0!==p;){p-=C=2E3<p?2E3:p;do q=q+(v=v+x[w++]|0)|0;while(--C);v%=65521;q%=65521}return v|q<<16|0}},{}],4:[function(a,d,h){d.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,
Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(a,d,h){var q=function(){for(var x,p=[],w=0;256>w;w++){x=w;for(var v=0;8>v;v++)x=1&x?3988292384^x>>>1:x>>>1;p[w]=x}return p}();d.exports=function(x,p,w,v){w=v+w;for(x^=-1;v<w;v++)x=x>>>8^q[255&(x^p[v])];
return-1^x}},{}],6:[function(a,d,h){d.exports=function(){this.os=this.xflags=this.time=this.text=0;this.extra=null;this.extra_len=0;this.comment=this.name="";this.hcrc=0;this.done=!1}},{}],7:[function(a,d,h){d.exports=function(q,x){var p,w,v;var C=q.state;var M=q.next_in;var L=q.input;var P=M+(q.avail_in-5);var e=q.next_out;var g=q.output;x=e-(x-q.avail_out);var u=e+(q.avail_out-257);var n=C.dmax;var y=C.wsize;var D=C.whave;var l=C.wnext;var B=C.window;var k=C.hold;var J=C.bits;var m=C.lencode;var K=
C.distcode;var N=(1<<C.lenbits)-1;var Q=(1<<C.distbits)-1;a:do{15>J&&(k+=L[M++]<<J,J+=8,k+=L[M++]<<J,J+=8);var H=m[k&N];b:for(;;){if(k>>>=p=H>>>24,J-=p,0==(p=H>>>16&255))g[e++]=65535&H;else{if(!(16&p)){if(0==(64&p)){H=m[(65535&H)+(k&(1<<p)-1)];continue b}if(32&p){C.mode=12;break a}q.msg="invalid literal/length code";C.mode=30;break a}var V=65535&H;(p&=15)&&(J<p&&(k+=L[M++]<<J,J+=8),V+=k&(1<<p)-1,k>>>=p,J-=p);15>J&&(k+=L[M++]<<J,J+=8,k+=L[M++]<<J,J+=8);H=K[k&Q];c:for(;;){if(k>>>=p=H>>>24,J-=p,!(16&
(p=H>>>16&255))){if(0==(64&p)){H=K[(65535&H)+(k&(1<<p)-1)];continue c}q.msg="invalid distance code";C.mode=30;break a}if(w=65535&H,J<(p&=15)&&(k+=L[M++]<<J,(J+=8)<p&&(k+=L[M++]<<J,J+=8)),(w+=k&(1<<p)-1)>n){q.msg="invalid distance too far back";C.mode=30;break a}if(k>>>=p,J-=p,w>(p=e-x)){if((p=w-p)>D&&C.sane){q.msg="invalid distance too far back";C.mode=30;break a}if(H=0,v=B,0===l){if(H+=y-p,p<V){V-=p;do g[e++]=B[H++];while(--p);H=e-w;v=g}}else if(l<p){if(H+=y+l-p,(p-=l)<V){V-=p;do g[e++]=B[H++];while(--p);
if(H=0,l<V){V-=p=l;do g[e++]=B[H++];while(--p);H=e-w;v=g}}}else if(H+=l-p,p<V){V-=p;do g[e++]=B[H++];while(--p);H=e-w;v=g}for(;2<V;)g[e++]=v[H++],g[e++]=v[H++],g[e++]=v[H++],V-=3;V&&(g[e++]=v[H++],1<V&&(g[e++]=v[H++]))}else{H=e-w;do g[e++]=g[H++],g[e++]=g[H++],g[e++]=g[H++],V-=3;while(2<V);V&&(g[e++]=g[H++],1<V&&(g[e++]=g[H++]))}break}}break}}while(M<P&&e<u);M-=V=J>>3;k&=(1<<(J-=V<<3))-1;q.next_in=M;q.next_out=e;q.avail_in=M<P?P-M+5:5-(M-P);q.avail_out=e<u?u-e+257:257-(e-u);C.hold=k;C.bits=J}},{}],
8:[function(a,d,h){function q(l){return(l>>>24&255)+(l>>>8&65280)+((65280&l)<<8)+((255&l)<<24)}function x(){this.mode=0;this.last=!1;this.wrap=0;this.havedict=!1;this.total=this.check=this.dmax=this.flags=0;this.head=null;this.wnext=this.whave=this.wsize=this.wbits=0;this.window=null;this.extra=this.offset=this.length=this.bits=this.hold=0;this.distcode=this.lencode=null;this.have=this.ndist=this.nlen=this.ncode=this.distbits=this.lenbits=0;this.next=null;this.lens=new L.Buf16(320);this.work=new L.Buf16(288);
this.distdyn=this.lendyn=null;this.was=this.back=this.sane=0}function p(l){var B;return l&&l.state?(B=l.state,l.total_in=l.total_out=B.total=0,l.msg="",B.wrap&&(l.adler=1&B.wrap),B.mode=1,B.last=0,B.havedict=0,B.dmax=32768,B.head=null,B.hold=0,B.bits=0,B.lencode=B.lendyn=new L.Buf32(852),B.distcode=B.distdyn=new L.Buf32(592),B.sane=1,B.back=-1,0):-2}function w(l){var B;return l&&l.state?((B=l.state).wsize=0,B.whave=0,B.wnext=0,p(l)):-2}function v(l,B){var k,J;return l&&l.state?(J=l.state,0>B?(k=0,
B=-B):(k=1+(B>>4),48>B&&(B&=15)),B&&(8>B||15<B)?-2:(null!==J.window&&J.wbits!==B&&(J.window=null),J.wrap=k,J.wbits=B,w(l))):-2}function C(l,B){var k,J;return l?(J=new x,l.state=J,J.window=null,0!==(k=v(l,B))&&(l.state=null),k):-2}function M(l,B,k,J){var m;l=l.state;return null===l.window&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new L.Buf8(l.wsize)),J>=l.wsize?(L.arraySet(l.window,B,k-l.wsize,l.wsize,0),l.wnext=0,l.whave=l.wsize):((m=l.wsize-l.wnext)>J&&(m=J),L.arraySet(l.window,B,k-J,m,l.wnext),
(J-=m)?(L.arraySet(l.window,B,k-J,J,0),l.wnext=J,l.whave=l.wsize):(l.wnext+=m,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=m))),0}var L=a("../utils/common"),P=a("./adler32"),e=a("./crc32"),g=a("./inffast"),u=a("./inftrees"),n,y,D=!0;h.inflateReset=w;h.inflateReset2=v;h.inflateResetKeep=p;h.inflateInit=function(l){return C(l,15)};h.inflateInit2=C;h.inflate=function(l,B){var k,J,m,K,N,Q,H,V,W=0,ha=new L.Buf8(4),U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!l||!l.state||!l.output||
!l.input&&0!==l.avail_in)return-2;12===(k=l.state).mode&&(k.mode=13);var S=l.next_out;var ba=l.output;var Y=l.avail_out;var aa=l.next_in;var ia=l.input;var z=l.avail_in;var G=k.hold;var F=k.bits;var R=z;var T=Y;var fa=0;a:for(;;)switch(k.mode){case 1:if(0===k.wrap){k.mode=13;break}for(;16>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(2&k.wrap&&35615===G){k.check=0;ha[0]=255&G;ha[1]=G>>>8&255;k.check=e(k.check,ha,2,0);F=G=0;k.mode=2;break}if(k.flags=0,k.head&&(k.head.done=!1),!(1&k.wrap)||(((255&
G)<<8)+(G>>8))%31){l.msg="incorrect header check";k.mode=30;break}if(8!=(15&G)){l.msg="unknown compression method";k.mode=30;break}if(F-=4,H=8+(15&(G>>>=4)),0===k.wbits)k.wbits=H;else if(H>k.wbits){l.msg="invalid window size";k.mode=30;break}k.dmax=1<<H;l.adler=k.check=1;k.mode=512&G?10:12;F=G=0;break;case 2:for(;16>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(k.flags=G,8!=(255&k.flags)){l.msg="unknown compression method";k.mode=30;break}if(57344&k.flags){l.msg="unknown header flags set";k.mode=
30;break}k.head&&(k.head.text=G>>8&1);512&k.flags&&(ha[0]=255&G,ha[1]=G>>>8&255,k.check=e(k.check,ha,2,0));F=G=0;k.mode=3;case 3:for(;32>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}k.head&&(k.head.time=G);512&k.flags&&(ha[0]=255&G,ha[1]=G>>>8&255,ha[2]=G>>>16&255,ha[3]=G>>>24&255,k.check=e(k.check,ha,4,0));F=G=0;k.mode=4;case 4:for(;16>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}k.head&&(k.head.xflags=255&G,k.head.os=G>>8);512&k.flags&&(ha[0]=255&G,ha[1]=G>>>8&255,k.check=e(k.check,ha,2,0));F=G=
0;k.mode=5;case 5:if(1024&k.flags){for(;16>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}k.length=G;k.head&&(k.head.extra_len=G);512&k.flags&&(ha[0]=255&G,ha[1]=G>>>8&255,k.check=e(k.check,ha,2,0));F=G=0}else k.head&&(k.head.extra=null);k.mode=6;case 6:if(1024&k.flags&&((J=k.length)>z&&(J=z),J&&(k.head&&(H=k.head.extra_len-k.length,k.head.extra||(k.head.extra=Array(k.head.extra_len)),L.arraySet(k.head.extra,ia,aa,J,H)),512&k.flags&&(k.check=e(k.check,ia,J,aa)),z-=J,aa+=J,k.length-=J),k.length))break a;
k.length=0;k.mode=7;case 7:if(2048&k.flags){if(0===z)break a;J=0;do H=ia[aa+J++],k.head&&H&&65536>k.length&&(k.head.name+=String.fromCharCode(H));while(H&&J<z);if(512&k.flags&&(k.check=e(k.check,ia,J,aa)),z-=J,aa+=J,H)break a}else k.head&&(k.head.name=null);k.length=0;k.mode=8;case 8:if(4096&k.flags){if(0===z)break a;J=0;do H=ia[aa+J++],k.head&&H&&65536>k.length&&(k.head.comment+=String.fromCharCode(H));while(H&&J<z);if(512&k.flags&&(k.check=e(k.check,ia,J,aa)),z-=J,aa+=J,H)break a}else k.head&&(k.head.comment=
null);k.mode=9;case 9:if(512&k.flags){for(;16>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(G!==(65535&k.check)){l.msg="header crc mismatch";k.mode=30;break}F=G=0}k.head&&(k.head.hcrc=k.flags>>9&1,k.head.done=!0);l.adler=k.check=0;k.mode=12;break;case 10:for(;32>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}l.adler=k.check=q(G);F=G=0;k.mode=11;case 11:if(0===k.havedict)return l.next_out=S,l.avail_out=Y,l.next_in=aa,l.avail_in=z,k.hold=G,k.bits=F,2;l.adler=k.check=1;k.mode=12;case 12:if(5===B||6===
B)break a;case 13:if(k.last){G>>>=7&F;F-=7&F;k.mode=27;break}for(;3>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}switch(k.last=1&G,--F,3&(G>>>=1)){case 0:k.mode=14;break;case 1:var Z=k;if(D){n=new L.Buf32(512);y=new L.Buf32(32);for(K=0;144>K;)Z.lens[K++]=8;for(;256>K;)Z.lens[K++]=9;for(;280>K;)Z.lens[K++]=7;for(;288>K;)Z.lens[K++]=8;u(1,Z.lens,0,288,n,0,Z.work,{bits:9});for(K=0;32>K;)Z.lens[K++]=5;u(2,Z.lens,0,32,y,0,Z.work,{bits:5});D=!1}Z.lencode=n;Z.lenbits=9;Z.distcode=y;Z.distbits=5;if(k.mode=
20,6===B){G>>>=2;F-=2;break a}break;case 2:k.mode=17;break;case 3:l.msg="invalid block type",k.mode=30}G>>>=2;F-=2;break;case 14:G>>>=7&F;for(F-=7&F;32>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if((65535&G)!=(G>>>16^65535)){l.msg="invalid stored block lengths";k.mode=30;break}if(k.length=65535&G,G=0,F=0,k.mode=15,6===B)break a;case 15:k.mode=16;case 16:if(J=k.length){if(J>z&&(J=z),J>Y&&(J=Y),0===J)break a;L.arraySet(ba,ia,aa,J,S);z-=J;aa+=J;Y-=J;S+=J;k.length-=J;break}k.mode=12;break;case 17:for(;14>
F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(k.nlen=257+(31&G),G>>>=5,F-=5,k.ndist=1+(31&G),G>>>=5,F-=5,k.ncode=4+(15&G),G>>>=4,F-=4,286<k.nlen||30<k.ndist){l.msg="too many length or distance symbols";k.mode=30;break}k.have=0;k.mode=18;case 18:for(;k.have<k.ncode;){for(;3>F;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}k.lens[U[k.have++]]=7&G;G>>>=3;F-=3}for(;19>k.have;)k.lens[U[k.have++]]=0;if(k.lencode=k.lendyn,k.lenbits=7,V={bits:k.lenbits},fa=u(0,k.lens,0,19,k.lencode,0,k.work,V),k.lenbits=V.bits,
fa){l.msg="invalid code lengths set";k.mode=30;break}k.have=0;k.mode=19;case 19:for(;k.have<k.nlen+k.ndist;){for(;W=k.lencode[G&(1<<k.lenbits)-1],N=65535&W,!((K=W>>>24)<=F);){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(16>N)G>>>=K,F-=K,k.lens[k.have++]=N;else{if(16===N){for(Z=K+2;F<Z;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(G>>>=K,F-=K,0===k.have){l.msg="invalid bit length repeat";k.mode=30;break}H=k.lens[k.have-1];J=3+(3&G);G>>>=2;F-=2}else if(17===N){for(Z=K+3;F<Z;){if(0===z)break a;z--;G+=
ia[aa++]<<F;F+=8}F-=K;H=0;J=3+(7&(G>>>=K));G>>>=3;F-=3}else{for(Z=K+7;F<Z;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}F-=K;H=0;J=11+(127&(G>>>=K));G>>>=7;F-=7}if(k.have+J>k.nlen+k.ndist){l.msg="invalid bit length repeat";k.mode=30;break}for(;J--;)k.lens[k.have++]=H}}if(30===k.mode)break;if(0===k.lens[256]){l.msg="invalid code -- missing end-of-block";k.mode=30;break}if(k.lenbits=9,V={bits:k.lenbits},fa=u(1,k.lens,0,k.nlen,k.lencode,0,k.work,V),k.lenbits=V.bits,fa){l.msg="invalid literal/lengths set";
k.mode=30;break}if(k.distbits=6,k.distcode=k.distdyn,V={bits:k.distbits},fa=u(2,k.lens,k.nlen,k.ndist,k.distcode,0,k.work,V),k.distbits=V.bits,fa){l.msg="invalid distances set";k.mode=30;break}if(k.mode=20,6===B)break a;case 20:k.mode=21;case 21:if(6<=z&&258<=Y){l.next_out=S;l.avail_out=Y;l.next_in=aa;l.avail_in=z;k.hold=G;k.bits=F;g(l,T);S=l.next_out;ba=l.output;Y=l.avail_out;aa=l.next_in;ia=l.input;z=l.avail_in;G=k.hold;F=k.bits;12===k.mode&&(k.back=-1);break}for(k.back=0;Z=(W=k.lencode[G&(1<<k.lenbits)-
1])>>>16&255,N=65535&W,!((K=W>>>24)<=F);){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(Z&&0==(240&Z)){var qa=K;var na=Z;for(Q=N;Z=(W=k.lencode[Q+((G&(1<<qa+na)-1)>>qa)])>>>16&255,N=65535&W,!(qa+(K=W>>>24)<=F);){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}G>>>=qa;F-=qa;k.back+=qa}if(G>>>=K,F-=K,k.back+=K,k.length=N,0===Z){k.mode=26;break}if(32&Z){k.back=-1;k.mode=12;break}if(64&Z){l.msg="invalid literal/length code";k.mode=30;break}k.extra=15&Z;k.mode=22;case 22:if(k.extra){for(Z=k.extra;F<Z;){if(0===
z)break a;z--;G+=ia[aa++]<<F;F+=8}k.length+=G&(1<<k.extra)-1;G>>>=k.extra;F-=k.extra;k.back+=k.extra}k.was=k.length;k.mode=23;case 23:for(;Z=(W=k.distcode[G&(1<<k.distbits)-1])>>>16&255,N=65535&W,!((K=W>>>24)<=F);){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}if(0==(240&Z)){qa=K;na=Z;for(Q=N;Z=(W=k.distcode[Q+((G&(1<<qa+na)-1)>>qa)])>>>16&255,N=65535&W,!(qa+(K=W>>>24)<=F);){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}G>>>=qa;F-=qa;k.back+=qa}if(G>>>=K,F-=K,k.back+=K,64&Z){l.msg="invalid distance code";k.mode=
30;break}k.offset=N;k.extra=15&Z;k.mode=24;case 24:if(k.extra){for(Z=k.extra;F<Z;){if(0===z)break a;z--;G+=ia[aa++]<<F;F+=8}k.offset+=G&(1<<k.extra)-1;G>>>=k.extra;F-=k.extra;k.back+=k.extra}if(k.offset>k.dmax){l.msg="invalid distance too far back";k.mode=30;break}k.mode=25;case 25:if(0===Y)break a;if(J=T-Y,k.offset>J){if((J=k.offset-J)>k.whave&&k.sane){l.msg="invalid distance too far back";k.mode=30;break}J>k.wnext?(J-=k.wnext,m=k.wsize-J):m=k.wnext-J;J>k.length&&(J=k.length);K=k.window}else K=ba,
m=S-k.offset,J=k.length;J>Y&&(J=Y);Y-=J;k.length-=J;do ba[S++]=K[m++];while(--J);0===k.length&&(k.mode=21);break;case 26:if(0===Y)break a;ba[S++]=k.length;Y--;k.mode=21;break;case 27:if(k.wrap){for(;32>F;){if(0===z)break a;z--;G|=ia[aa++]<<F;F+=8}if(T-=Y,l.total_out+=T,k.total+=T,T&&(l.adler=k.check=k.flags?e(k.check,ba,T,S-T):P(k.check,ba,T,S-T)),T=Y,(k.flags?G:q(G))!==k.check){l.msg="incorrect data check";k.mode=30;break}F=G=0}k.mode=28;case 28:if(k.wrap&&k.flags){for(;32>F;){if(0===z)break a;z--;
G+=ia[aa++]<<F;F+=8}if(G!==(4294967295&k.total)){l.msg="incorrect length check";k.mode=30;break}F=G=0}k.mode=29;case 29:fa=1;break a;case 30:fa=-3;break a;case 31:return-4;default:return-2}return l.next_out=S,l.avail_out=Y,l.next_in=aa,l.avail_in=z,k.hold=G,k.bits=F,(k.wsize||T!==l.avail_out&&30>k.mode&&(27>k.mode||4!==B))&&M(l,l.output,l.next_out,T-l.avail_out)?(k.mode=31,-4):(R-=l.avail_in,T-=l.avail_out,l.total_in+=R,l.total_out+=T,k.total+=T,k.wrap&&T&&(l.adler=k.check=k.flags?e(k.check,ba,T,
l.next_out-T):P(k.check,ba,T,l.next_out-T)),l.data_type=k.bits+(k.last?64:0)+(12===k.mode?128:0)+(20===k.mode||15===k.mode?256:0),(0===R&&0===T||4===B)&&0===fa&&(fa=-5),fa)};h.inflateEnd=function(l){if(!l||!l.state)return-2;var B=l.state;return B.window&&(B.window=null),l.state=null,0};h.inflateGetHeader=function(l,B){var k;return l&&l.state?0==(2&(k=l.state).wrap)?-2:(k.head=B,B.done=!1,0):-2};h.inflateSetDictionary=function(l,B){var k,J=B.length;return l&&l.state?0!==(k=l.state).wrap&&11!==k.mode?
-2:11===k.mode&&P(1,B,J,0)!==k.check?-3:M(l,B,J,J)?(k.mode=31,-4):(k.havedict=1,0):-2};h.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,d,h){var q=a("../utils/common"),x=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,
385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],v=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];d.exports=function(C,M,L,P,e,g,u,n){var y,D,l,B,k,J,m=n.bits,K,N,Q,H,V,W=0,ha,U=null,S=0,ba=new q.Buf16(16);var Y=new q.Buf16(16);var aa=null,ia=0;for(K=0;15>=K;K++)ba[K]=0;for(N=0;N<P;N++)ba[M[L+N]]++;var z=m;for(Q=15;1<=Q&&0===ba[Q];Q--);if(z>Q&&(z=Q),0===Q)return e[g++]=20971520,e[g++]=20971520,n.bits=1,0;for(m=1;m<Q&&0===ba[m];m++);
z<m&&(z=m);for(K=y=1;15>=K;K++)if(y<<=1,0>(y-=ba[K]))return-1;if(0<y&&(0===C||1!==Q))return-1;Y[1]=0;for(K=1;15>K;K++)Y[K+1]=Y[K]+ba[K];for(N=0;N<P;N++)0!==M[L+N]&&(u[Y[M[L+N]]++]=N);if(0===C?(U=aa=u,B=19):1===C?(U=x,S-=257,aa=p,ia-=257,B=256):(U=w,aa=v,B=-1),ha=0,N=0,K=m,Y=g,H=z,V=0,l=-1,P=(W=1<<z)-1,1===C&&852<W||2===C&&592<W)return 1;for(;;){var G=K-V;u[N]<B?(k=0,J=u[N]):u[N]>B?(k=aa[ia+u[N]],J=U[S+u[N]]):(k=96,J=0);y=1<<K-V;m=D=1<<H;do e[Y+(ha>>V)+(D-=y)]=G<<24|k<<16|J|0;while(0!==D);for(y=1<<
K-1;ha&y;)y>>=1;if(0!==y?(ha&=y-1,ha+=y):ha=0,N++,0==--ba[K]){if(K===Q)break;K=M[L+u[N]]}if(K>z&&(ha&P)!==l){0===V&&(V=z);Y+=m;for(y=1<<(H=K-V);H+V<Q&&!(0>=(y-=ba[H+V]));)H++,y<<=1;if(W+=1<<H,1===C&&852<W||2===C&&592<W)return 1;e[l=ha&P]=z<<24|H<<16|Y-g|0}}return 0!==ha&&(e[Y+ha]=K-V<<24|4194304),n.bits=z,0}},{"../utils/common":1}],10:[function(a,d,h){d.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error",
"-6":"incompatible version"}},{}],11:[function(a,d,h){d.exports=function(){this.input=null;this.total_in=this.avail_in=this.next_in=0;this.output=null;this.total_out=this.avail_out=this.next_out=0;this.msg="";this.state=null;this.data_type=2;this.adler=0}},{}],"/lib/inflate.js":[function(a,d,h){function q(g){if(!(this instanceof q))return new q(g);var u=this.options=w.assign({chunkSize:16384,windowBits:0,to:""},g||{});u.raw&&0<=u.windowBits&&16>u.windowBits&&(u.windowBits=-u.windowBits,0===u.windowBits&&
(u.windowBits=-15));!(0<=u.windowBits&&16>u.windowBits)||g&&g.windowBits||(u.windowBits+=32);15<u.windowBits&&48>u.windowBits&&0==(15&u.windowBits)&&(u.windowBits|=15);this.err=0;this.msg="";this.ended=!1;this.chunks=[];this.strm=new L;this.strm.avail_out=0;g=p.inflateInit2(this.strm,u.windowBits);if(g!==C.Z_OK)throw Error(M[g]);if(this.header=new P,p.inflateGetHeader(this.strm,this.header),u.dictionary&&("string"==typeof u.dictionary?u.dictionary=v.string2buf(u.dictionary):"[object ArrayBuffer]"===
e.call(u.dictionary)&&(u.dictionary=new Uint8Array(u.dictionary)),u.raw&&(g=p.inflateSetDictionary(this.strm,u.dictionary))!==C.Z_OK))throw Error(M[g]);}function x(g,u){u=new q(u);if(u.push(g,!0),u.err)throw u.msg||M[u.err];return u.result}var p=a("./zlib/inflate"),w=a("./utils/common"),v=a("./utils/strings"),C=a("./zlib/constants"),M=a("./zlib/messages"),L=a("./zlib/zstream"),P=a("./zlib/gzheader"),e=Object.prototype.toString;q.prototype.push=function(g,u){var n,y,D,l,B=this.strm,k=this.options.chunkSize,
J=this.options.dictionary,m=!1;if(this.ended)return!1;u=u===~~u?u:!0===u?C.Z_FINISH:C.Z_NO_FLUSH;"string"==typeof g?B.input=v.binstring2buf(g):"[object ArrayBuffer]"===e.call(g)?B.input=new Uint8Array(g):B.input=g;B.next_in=0;B.avail_in=B.input.length;do{if(0===B.avail_out&&(B.output=new w.Buf8(k),B.next_out=0,B.avail_out=k),(n=p.inflate(B,C.Z_NO_FLUSH))===C.Z_NEED_DICT&&J&&(n=p.inflateSetDictionary(this.strm,J)),n===C.Z_BUF_ERROR&&!0===m&&(n=C.Z_OK,m=!1),n!==C.Z_STREAM_END&&n!==C.Z_OK)return this.onEnd(n),
this.ended=!0,!1;B.next_out&&(0!==B.avail_out&&n!==C.Z_STREAM_END&&(0!==B.avail_in||u!==C.Z_FINISH&&u!==C.Z_SYNC_FLUSH)||("string"===this.options.to?(y=v.utf8border(B.output,B.next_out),D=B.next_out-y,l=v.buf2string(B.output,y),B.next_out=D,B.avail_out=k-D,D&&w.arraySet(B.output,B.output,y,D,0),this.onData(l)):this.onData(w.shrinkBuf(B.output,B.next_out))));0===B.avail_in&&0===B.avail_out&&(m=!0)}while((0<B.avail_in||0===B.avail_out)&&n!==C.Z_STREAM_END);return n===C.Z_STREAM_END&&(u=C.Z_FINISH),
u===C.Z_FINISH?(n=p.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===C.Z_OK):u!==C.Z_SYNC_FLUSH||(this.onEnd(C.Z_OK),B.avail_out=0,!0)};q.prototype.onData=function(g){this.chunks.push(g)};q.prototype.onEnd=function(g){g===C.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=w.flattenChunks(this.chunks));this.chunks=[];this.err=g;this.msg=this.strm.msg};h.Inflate=q;h.inflate=x;h.inflateRaw=function(g,u){return(u=u||{}).raw=!0,x(g,u)};h.ungzip=x},{"./utils/common":1,
"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js");"undefined"!=typeof self&&self;$c.exports=function(a){function d(q){if(h[q])return h[q].exports;var x=h[q]={i:q,l:!1,exports:{}};return a[q].call(x.exports,x,x.exports,d),x.l=!0,x.exports}var h={};return d.m=a,d.c=h,d.d=function(q,x,p){d.o(q,x)||Object.defineProperty(q,x,{enumerable:!0,get:p})},d.r=function(q){"undefined"!=typeof Symbol&&Symbol.toStringTag&&
Object.defineProperty(q,Symbol.toStringTag,{value:"Module"});Object.defineProperty(q,"__esModule",{value:!0})},d.t=function(q,x){if((1&x&&(q=d(q)),8&x)||4&x&&"object"==typeof q&&q&&q.__esModule)return q;var p=Object.create(null);if(d.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:q}),2&x&&"string"!=typeof q)for(var w in q)d.d(p,w,function(v){return q[v]}.bind(null,w));return p},d.n=function(q){var x=q&&q.__esModule?function(){return q.default}:function(){return q};return d.d(x,"a",x),
x},d.o=function(q,x){return Object.prototype.hasOwnProperty.call(q,x)},d.p="",d(d.s=3)}([function(a,d,h){function q(x){0!=x.offset%4&&x.skip(4-x.offset%4)}a.exports.notNetcdf=function(x,p){if(x)throw new TypeError("Not a valid NetCDF v3.x file: ".concat(p));};a.exports.padding=q;a.exports.readName=function(x){var p=x.readUint32();p=x.readChars(p);return q(x),p}},function(a,d,h){!function(q){function x(e){for(var g,u,n=[],y=0,D=e.length;y<D;)55296<=(g=e.charCodeAt(y++))&&56319>=g&&y<D?56320==(64512&
(u=e.charCodeAt(y++)))?n.push(((1023&g)<<10)+(1023&u)+65536):(n.push(g),y--):n.push(g);return n}function p(e){if(55296<=e&&57343>=e)throw Error("Lone surrogate U+"+e.toString(16).toUpperCase()+" is not a scalar value");}function w(){if(L>=M)throw Error("Invalid byte index");var e=255&C[L];if(L++,128==(192&e))return 63&e;throw Error("Invalid continuation byte");}function v(){var e,g;if(L>M)throw Error("Invalid byte index");if(L==M)return!1;if(e=255&C[L],L++,0==(128&e))return e;if(192==(224&e)){if(128<=
(g=(31&e)<<6|w()))return g;throw Error("Invalid continuation byte");}if(224==(240&e)){if(2048<=(g=(15&e)<<12|w()<<6|w()))return p(g),g;throw Error("Invalid continuation byte");}if(240==(248&e)&&65536<=(g=(7&e)<<18|w()<<12|w()<<6|w())&&1114111>=g)return g;throw Error("Invalid UTF-8 detected");}var C,M,L,P=String.fromCharCode;q.version="3.0.0";q.encode=function(e){e=x(e);for(var g=e.length,u=-1,n="";++u<g;){var y=e[u];if(0==(4294967168&y))var D=P(y);else{var l="";D=(0==(4294965248&y)?l=P(y>>6&31|192):
0==(4294901760&y)?(p(y),l=P(y>>12&15|224),l+=P(y>>6&63|128)):0==(4292870144&y)&&(l=P(y>>18&7|240),l+=P(y>>12&63|128),l+=P(y>>6&63|128)),l+P(63&y|128))}n+=D}return n};q.decode=function(e){C=x(e);M=C.length;L=0;var g;for(e=[];!1!==(g=v());)e.push(g);var u;g=e.length;for(var n=-1,y="";++n<g;)65535<(u=e[n])&&(y+=P((u-=65536)>>>10&1023|55296),u=56320|1023&u),y+=P(u);return y}}(d)},function(a,d,h){function q(w,v){if(1!==w){for(var C=Array(w),M=0;M<w;M++)C[M]=v();return C}return v()}const x=h(0).notNetcdf,
p={BYTE:1,CHAR:2,SHORT:3,INT:4,FLOAT:5,DOUBLE:6};a.exports=p;a.exports.num2str=function(w){switch(Number(w)){case p.BYTE:return"byte";case p.CHAR:return"char";case p.SHORT:return"short";case p.INT:return"int";case p.FLOAT:return"float";case p.DOUBLE:return"double";default:return"undefined"}};a.exports.num2bytes=function(w){switch(Number(w)){case p.BYTE:case p.CHAR:return 1;case p.SHORT:return 2;case p.INT:case p.FLOAT:return 4;case p.DOUBLE:return 8;default:return-1}};a.exports.str2num=function(w){switch(String(w)){case "byte":return p.BYTE;
case "char":return p.CHAR;case "short":return p.SHORT;case "int":return p.INT;case "float":return p.FLOAT;case "double":return p.DOUBLE;default:return-1}};a.exports.readType=function(w,v,C){switch(v){case p.BYTE:return w.readBytes(C);case p.CHAR:return w=w.readChars(C),0===w.charCodeAt(w.length-1)?w.substring(0,w.length-1):w;case p.SHORT:return q(C,w.readInt16.bind(w));case p.INT:return q(C,w.readInt32.bind(w));case p.FLOAT:return q(C,w.readFloat32.bind(w));case p.DOUBLE:return q(C,w.readFloat64.bind(w));
default:return void x(!0,"non valid type ".concat(v))}}},function(a,d,h){const {IOBuffer:q}=h(4),x=h(0),p=h(5),w=h(6),v=h(7);a.exports=class{constructor(C){C=new q(C);C.setBigEndian();x.notNetcdf("CDF"!==C.readChars(3),"should start with CDF");const M=C.readByte();x.notNetcdf(2<M,"unknown version");this.header=w(C,M);this.buffer=C}get version(){return 1===this.header.version?"classic format":"64-bit offset format"}get recordDimension(){return this.header.recordDimension}get dimensions(){return this.header.dimensions}get globalAttributes(){return this.header.globalAttributes}getAttribute(C){const M=
this.globalAttributes.find(L=>L.name===C);return M?M.value:null}getDataVariableAsString(C){return(C=this.getDataVariable(C))?C.join(""):null}get variables(){return this.header.variables}toString(){return v.call(this)}getDataVariable(C){let M;return M="string"==typeof C?this.header.variables.find(function(L){return L.name===C}):C,x.notNetcdf(void 0===M,"variable not found: ".concat(C)),this.buffer.seek(M.offset),M.record?p.record(this.buffer,M,this.header.recordDimension):p.nonRecord(this.buffer,M)}dataVariableExists(C){return void 0!==
this.header.variables.find(function(M){return M.name===C})}attributeExists(C){return void 0!==this.globalAttributes.find(M=>M.name===C)}}},function(a,d,h){h.r(d);h.d(d,"IOBuffer",function(){return x});var q=h(1);class x{constructor(){let p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8192;var w=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};let v=!1;"number"==typeof p?p=new ArrayBuffer(p):(v=!0,this.lastWrittenByte=p.byteLength);w=w.offset?w.offset>>>0:0;const C=p.byteLength-
w;let M=w;(ArrayBuffer.isView(p)||p instanceof x)&&(p.byteLength!==p.buffer.byteLength&&(M=p.byteOffset+w),p=p.buffer);this.lastWrittenByte=v?C:0;this.buffer=p;this.byteLength=this.length=C;this.byteOffset=M;this.offset=0;this.littleEndian=!0;this._data=new DataView(this.buffer,M,C);this._mark=0;this._marks=[]}available(){return this.offset+(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1)<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,
this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(){return this.offset+=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,this}seek(p){return this.offset=p,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const p=this._marks.pop();if(void 0===p)throw Error("Mark stack empty");return this.seek(p),this}rewind(){return this.offset=0,this}ensureAvailable(){var p=
0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;if(!this.available(p)){p=2*(this.offset+p);const w=new Uint8Array(p);w.set(new Uint8Array(this.buffer));this.buffer=w.buffer;this.length=this.byteLength=p;this._data=new DataView(this.buffer)}return this}readBoolean(){return 0!==this.readUint8()}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(){let p=0<arguments.length&&void 0!==arguments[0]?
arguments[0]:1;const w=new Uint8Array(p);for(let v=0;v<p;v++)w[v]=this.readByte();return w}readInt16(){const p=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,p}readUint16(){const p=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,p}readInt32(){const p=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,p}readUint32(){const p=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,p}readFloat32(){const p=this._data.getFloat32(this.offset,
this.littleEndian);return this.offset+=4,p}readFloat64(){const p=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,p}readChar(){return String.fromCharCode(this.readInt8())}readChars(){let p=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,w="";for(let v=0;v<p;v++)w+=this.readChar();return w}readUtf8(){const p=this.readChars(0<arguments.length&&void 0!==arguments[0]?arguments[0]:1);return Object(q.decode)(p)}writeBoolean(p){return this.writeUint8(p?255:0),this}writeInt8(p){return this.ensureAvailable(1),
this._data.setInt8(this.offset++,p),this._updateLastWrittenByte(),this}writeUint8(p){return this.ensureAvailable(1),this._data.setUint8(this.offset++,p),this._updateLastWrittenByte(),this}writeByte(p){return this.writeUint8(p)}writeBytes(p){this.ensureAvailable(p.length);for(let w=0;w<p.length;w++)this._data.setUint8(this.offset++,p[w]);return this._updateLastWrittenByte(),this}writeInt16(p){return this.ensureAvailable(2),this._data.setInt16(this.offset,p,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),
this}writeUint16(p){return this.ensureAvailable(2),this._data.setUint16(this.offset,p,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(p){return this.ensureAvailable(4),this._data.setInt32(this.offset,p,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(p){return this.ensureAvailable(4),this._data.setUint32(this.offset,p,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(p){return this.ensureAvailable(4),this._data.setFloat32(this.offset,
p,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(p){return this.ensureAvailable(8),this._data.setFloat64(this.offset,p,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(p){return this.writeUint8(p.charCodeAt(0))}writeChars(p){for(let w=0;w<p.length;w++)this.writeUint8(p.charCodeAt(w));return this}writeUtf8(p){p=Object(q.encode)(p);return this.writeChars(p)}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>
this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}},function(a,d,h){const q=h(2);a.exports.nonRecord=function(x,p){const w=q.str2num(p.type);p=p.size/q.num2bytes(w);for(var v=Array(p),C=0;C<p;C++)v[C]=q.readType(x,w,1);return v};a.exports.record=function(x,p,w){const v=q.str2num(p.type);p=p.size?p.size/q.num2bytes(v):1;var C=w.length,M=Array(C);w=w.recordStep;for(var L=0;L<C;L++){var P=x.offset;M[L]=q.readType(x,v,p);x.seek(P+w)}return M}},function(a,d,h){function q(w){var v=w.readUint32();
if(0===v)return x.notNetcdf(0!==w.readUint32(),"wrong empty tag for list of attributes"),[];x.notNetcdf(12!==v,"wrong tag for list of attributes");v=w.readUint32();for(var C=Array(v),M=0;M<v;M++){var L=x.readName(w),P=w.readUint32();x.notNetcdf(1>P||6<P,"non valid type ".concat(P));var e=w.readUint32();e=p.readType(w,P,e);x.padding(w);C[M]={name:L,type:p.num2str(P),value:e}}return C}const x=h(0),p=h(2);a.exports=function(w,v){var C={recordDimension:{length:w.readUint32()}};C.version=v;var M=function(L){var P,
e,g=L.readUint32();if(0===g)return x.notNetcdf(0!==L.readUint32(),"wrong empty tag for list of dimensions"),[];x.notNetcdf(10!==g,"wrong tag for list of dimensions");g=L.readUint32();for(var u=Array(g),n=0;n<g;n++){var y=x.readName(L);const D=L.readUint32();0===D&&(P=n,e=y);u[n]={name:y,size:D}}return{dimensions:u,recordId:P,recordName:e}}(w);C.recordDimension.id=M.recordId;C.recordDimension.name=M.recordName;C.dimensions=M.dimensions;C.globalAttributes=q(w);w=function(L,P,e){var g=L.readUint32(),
u=0;if(0===g)return x.notNetcdf(0!==L.readUint32(),"wrong empty tag for list of variables"),[];x.notNetcdf(11!==g,"wrong tag for list of variables");g=L.readUint32();for(var n=Array(g),y=0;y<g;y++){for(var D=x.readName(L),l=L.readUint32(),B=Array(l),k=0;k<l;k++)B[k]=L.readUint32();k=q(L);l=L.readUint32();x.notNetcdf(1>l&&6<l,"non valid type ".concat(l));const m=L.readUint32();var J=L.readUint32();2===e&&(x.notNetcdf(0<J,"offsets larger than 4GB not supported"),J=L.readUint32());let K=!1;void 0!==
P&&B[0]===P&&(u+=m,K=!0);n[y]={name:D,dimensions:B,attributes:k,type:p.num2str(l),size:m,offset:J,record:K}}return{variables:n,recordStep:u}}(w,M.recordId,v);return C.variables=w.variables,C.recordDimension.recordStep=w.recordStep,C}},function(a,d,h){a.exports=function(){let q=[];q.push("DIMENSIONS");for(var x of this.dimensions)q.push("  ".concat(x.name.padEnd(30)," = size: ").concat(x.size));q.push("");q.push("GLOBAL ATTRIBUTES");for(let p of this.globalAttributes)q.push("  ".concat(p.name.padEnd(30),
" = ").concat(p.value));x=JSON.parse(JSON.stringify(this.variables));q.push("");q.push("VARIABLES:");for(let p of x)p.value=this.getDataVariable(p),x=JSON.stringify(p.value),50<x.length&&(x=x.substring(0,50)),isNaN(p.value.length)||(x+=" (length: ".concat(p.value.length,")")),q.push("  ".concat(p.name.padEnd(30)," = ").concat(x));return q.join("\n")}}]);window;c=Td||{};"object"==typeof $c.exports&&($c.exports=c);!0;String.prototype.startsWith||(String.prototype.startsWith=function(a){return 0===this.lastIndexOf(a,
0)});String.prototype.endsWith||(String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)});bb.ajaxTransport("+binary",function(a,d,h){if(window.FormData&&(a.dataType&&"binary"==a.dataType||a.data&&(window.ArrayBuffer&&a.data instanceof ArrayBuffer||window.Blob&&a.data instanceof Blob)))return{send:function(q,x){var p=new XMLHttpRequest,w=a.url,v=a.type,C=a.async||!0,M=a.responseType||"blob",L=a.data||null,P=a.username||null,e=a.password||null,g=function(){var n={};n[a.dataType]=
p.response;x(p.status,p.statusText,n,p.getAllResponseHeaders())},u;for(u in p.addEventListener("load",g),p.addEventListener("error",g),p.addEventListener("abort",g),p.open(v,w,C,P,e),q)p.setRequestHeader(u,q[u]);p.responseType=M;p.send(L)},abort:function(){h.abort()}}});c.createViewer=function(a,d,h){if("string"===bb.type(a)&&(a=bb("#"+a)),a){d=d||{};h=h||{};try{return new c.GLViewer(a,d,h)}catch(q){throw"error creating viewer: "+q;}}};c.createViewerGrid=function(a,d,h){if("string"===bb.type(a)&&
(a=bb("#"+a)),a){d=d||{};h=h||{};var q=[],x=document.createElement("canvas");h.rows=d.rows;h.cols=d.cols;h.control_all=null!=d.control_all&&d.control_all;bb(a).append(bb(x));try{for(var p=0;p<d.rows;p++){for(var w=[],v=0;v<d.cols;v++){h.row=p;h.col=v;h.canvas=x;h.viewers=q;h.control_all=d.control_all;var C=c.createViewer(a,h);w.push(C)}q.unshift(w)}}catch(M){throw"error creating viewer grid: "+M;}return q}};c.viewers={};c.getbin=function(a,d,h,q){var x=new Promise(function(p,w){h=null==h?"GET":h;
bb.ajax({url:a,dataType:"binary",method:h,data:q,responseType:"arraybuffer",processData:!1}).done(function(v){p(v)}).fail(function(v,C){console.log(C);w()})});return d?x.then(d):x};c.base64ToArray=function(a){a=window.atob(a);for(var d=a.length,h=new Uint8Array(d),q=0;q<d;q++)h[q]=a.charCodeAt(q);return h};c.download=function(a,d,h,q){var x="",p="",w="",v="",C=null,M=d.addModel();if("mmtf:"===a.substr(0,5))p=h&&h.pdbUri?h.pdbUri:"https://mmtf.rcsb.org/v1.0/full/",a=a.substr(5).toUpperCase(),v=p+a,
h&&void 0===h.noComputeSecondaryStructure&&(h.noComputeSecondaryStructure=!0),C=new Promise(function(P){c.getbin(v).then(function(e){M.addMolData(e,"mmtf",h);d.zoomTo();d.render();P(M)})});else{if("pdb:"===a.substr(0,4)){if(x="mmtf",h&&h.format&&(x=h.format),h&&void 0===h.noComputeSecondaryStructure&&(h.noComputeSecondaryStructure=!0),!(a=a.substr(4).toUpperCase()).match(/^[1-9][A-Za-z0-9]{3}$/))return void alert("Wrong PDB ID");"mmtf"==x?(w=h&&h.mmtfUri?h.mmtfUri:"https://mmtf.rcsb.org/v1.0/full/",
v=w+a.toUpperCase()):(p=h&&h.pdbUri?h.pdbUri:"https://files.rcsb.org/view/",v=p+a+"."+x)}else if("cid:"==a.substr(0,4)){if(x="sdf",!(a=a.substr(4)).match(/^[0-9]+$/))return void alert("Wrong Compound ID");v="https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+a+"/SDF?record_type=3d"}else"url:"==a.substr(0,4)&&(v=a.substr(4),x=v);var L=function(P){M.addMolData(P,x,h);d.zoomTo();d.render()};C=new Promise(function(P){"mmtf"==x?c.getbin(v).then(function(e){L(e);P(M)}):bb.get(v,function(e){L(e);P(M)}).fail(function(e){console.log("fetch of "+
v+" failed: "+e.statusText)})})}return q?(C.then(function(P){q(P)}),M):C};c.SurfaceType={VDW:1,MS:2,SAS:3,SES:4};c.mergeGeos=function(a,d){d=d.geometry;void 0!==d&&a.geometryGroups.push(d.geometryGroups[0])};c.multiLineString=function(a){return a.toString().replace(/^[^\/]+\/\*!?/,"").replace(/\*\/[^\/]+$/,"")};c.syncSurface=!1;(0<=window.navigator.userAgent.indexOf("MSIE ")||0<=window.navigator.userAgent.indexOf("Trident/"))&&(c.syncSurface=!0);c.specStringToObject=function(a){if("object"==typeof a||
void 0===a||null==a)return a;var d=function(M){return bb.isNumeric(M)?Math.floor(parseFloat(M))==parseInt(M)||0<=M.indexOf(".")?parseFloat(M):parseInt(M):"true"===M||"false"!==M&&M},h={};if("all"===(a=a.replace(/%7E/,"~")))return h;a=a.split(";");for(var q=0;q<a.length;q++){var x=a[q].split(":"),p=x[0],w={};if(x=x[1])if(-1!==(x=x.replace(/~/g,"=")).indexOf("=")){x=x.split(",");for(var v=0;v<x.length;v++){var C=x[v].split("=",2);w[C[0]]=d(C[1])}}else w=-1!==x.indexOf(",")?x.split(","):d(x);h[p]=w}return h};
c.getExtent=function(a,d){var h,q,x,p,w,v,C,M,L,P=!d;if(d=h=q=9999,x=p=w=-9999,v=C=M=L=0,0===a.length)return[[0,0,0],[0,0,0],[0,0,0]];for(var e=0;e<a.length;e++){var g=a[e];if(void 0!==g&&isFinite(g.x)&&isFinite(g.y)&&isFinite(g.z)&&(L++,v+=g.x,C+=g.y,M+=g.z,d=d<g.x?d:g.x,h=h<g.y?h:g.y,q=q<g.z?q:g.z,x=x>g.x?x:g.x,p=p>g.y?p:g.y,w=w>g.z?w:g.z,g.symmetries&&P))for(var u=0;u<g.symmetries.length;u++)L++,v+=g.symmetries[u].x,C+=g.symmetries[u].y,M+=g.symmetries[u].z,d=d<g.symmetries[u].x?d:g.symmetries[u].x,
h=h<g.symmetries[u].y?h:g.symmetries[u].y,q=q<g.symmetries[u].z?q:g.symmetries[u].z,x=x>g.symmetries[u].x?x:g.symmetries[u].x,p=p>g.symmetries[u].y?p:g.symmetries[u].y,w=w>g.symmetries[u].z?w:g.symmetries[u].z}return[[d,h,q],[x,p,w],[v/L,C/L,M/L]]};c.getAtomProperty=function(a,d){var h=null;return a.properties&&void 0!==a.properties[d]?h=a.properties[d]:void 0!==a[d]&&(h=a[d]),h};c.getPropertyRange=function(a,d){for(var h=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,x=0,p=a.length;x<p;x++){var w=
c.getAtomProperty(a[x],d);null!=w&&(w<h&&(h=w),w>q&&(q=w))}return isFinite(h)||isFinite(q)?isFinite(h)?isFinite(q)||(q=h):h=q:h=q=0,[h,q]};var Sd=[];var Bd=function(){return c}.apply(Hd,Sd);void 0!==Bd&&($c.exports=Bd);c.createStereoViewer=function(a){var d=this;if("string"===bb.type(a)&&(a=bb("#"+a)),a){a=c.createViewerGrid(a,{rows:1,cols:2,control_all:!0});this.glviewer1=a[0][0];this.glviewer2=a[0][1];this.glviewer1.setAutoEyeSeparation(!1);this.glviewer2.setAutoEyeSeparation(!0);this.glviewer1.linkViewer(this.glviewer2);
this.glviewer2.linkViewer(this.glviewer1);a=Object.getOwnPropertyNames(this.glviewer1).filter(function(q){return"function"==typeof d.glviewer1[q]});for(var h=0;h<a.length;h++)this[a[h]]=function(q){return function(){var x=this.glviewer1[q].apply(this.glviewer1,arguments),p=this.glviewer2[q].apply(this.glviewer2,arguments);return[x,p]}}(a[h]);this.setCoordinates=function(q,x,p){for(var w=0;w<q.length;w++)q[w].setCoordinates(x,p)};this.surfacesFinished=function(){return this.glviewer1.surfacesFinished()&&
this.glviewer2.surfacesFinished()};this.isAnimated=function(){return this.glviewer1.isAnimated()||this.glviewer2.isAnimated()};this.render=function(q){this.glviewer1.render();this.glviewer2.render();q&&q(this)};this.getCanvas=function(){return this.glviewer1.getCanvas()}}};var c=c||{};c.Math={clamp:function(a,d,h){return Math.min(Math.max(a,d),h)},degToRad:function(){var a=Math.PI/180;return function(d){return d*a}}()};c.Quaternion=function(a,d,h,q){this.x=a||0;this.y=d||0;this.z=h||0;this.w=void 0!==
q?q:1};c.Quaternion.prototype={constructor:c.Quaternion,set:function(a,d,h,q){return this.x=a,this.y=d,this.z=h,this.w=q,this},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},conjugate:function(){return this.x*=-1,this.y*=-1,this.z*=-1,this},inverse:function(){return this.conjugate().normalize()},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthxyz:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){var a=
this.length();return 0===a?(this.x=0,this.y=0,this.z=0,this.w=1):(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a),this},multiply:function(a){return this.multiplyQuaternions(this,a)},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this.w*=a,this},multiplyQuaternions:function(a,d){var h=a.x,q=a.y,x=a.z;a=a.w;var p=d.x,w=d.y,v=d.z;d=d.w;return this.x=h*d+a*p+q*v-x*w,this.y=q*d+a*w+x*p-h*v,this.z=x*d+a*v+h*w-q*p,this.w=a*d-h*p-q*w-x*v,this},sub:function(a){return this.x-=a.x,this.y-=a.y,
this.z-=a.z,this.w-=a.w,this},clone:function(){return new c.Quaternion(this.x,this.y,this.z,this.w)},setFromEuler:function(a){var d=Math.cos(a.x/2),h=Math.cos(a.y/2),q=Math.cos(a.z/2),x=Math.sin(a.x/2),p=Math.sin(a.y/2);a=Math.sin(a.z/2);return this.x=x*h*q+d*p*a,this.y=d*p*q-x*h*a,this.z=d*h*a+x*p*q,this.w=d*h*q-x*p*a,this}};c.Vector2=function(a,d){this.x=a||0;this.y=d||0};c.Vector2.prototype={constructor:c.Vector2,set:function(a,d){return this.x=a,this.y=d,this},subVectors:function(a,d){return this.x=
a.x-d.x,this.y=a.y-d.y,this},copy:function(a){return this.x=a.x,this.y=a.y,this},clone:function(){return new c.Vector2(this.x,this.y)}};c.Vector3=function(a,d,h){this.x=a||0;this.y=d||0;this.z=h||0};c.Vector3.prototype={constructor:c.Vector3,set:function(a,d,h){return this.x=a,this.y=d,this.z=h,this},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a){return this.x+=a.x,this.y+=a.y,this.z+=a.z,this},addVectors:function(a,d){return this.x=a.x+d.x,this.y=a.y+d.y,this.z=a.z+
d.z,this},sub:function(a){return this.x-=a.x,this.y-=a.y,this.z-=a.z,this},subVectors:function(a,d){return this.x=a.x-d.x,this.y=a.y-d.y,this.z=a.z-d.z,this},multiplyScalar:function(a){return this.x*=a,this.y*=a,this.z*=a,this},divideScalar:function(a){return 0!==a?(this.x/=a,this.y/=a,this.z/=a):(this.x=0,this.y=0,this.z=0),this},max:function(a){return this.x=Math.max(this.x,a.x),this.y=Math.max(this.y,a.y),this.z=Math.max(this.z,a.z),this},min:function(a){return this.x=Math.min(this.x,a.x),this.y=
Math.min(this.y,a.y),this.z=Math.min(this.z,a.z),this},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var d=this.x-a.x,h=this.y-a.y;a=this.z-a.z;return d*d+h*h+a*a},applyMatrix3:function(a){var d=this.x,h=this.y,q=this.z;a=a.elements;return this.x=a[0]*d+a[3]*h+a[6]*q,this.y=a[1]*d+a[4]*h+a[7]*q,this.z=a[2]*d+a[5]*h+a[8]*q,this},applyMatrix4:function(a){var d=this.x,h=this.y,q=this.z;a=a.elements;return this.x=a[0]*d+a[4]*h+a[8]*q+a[12],this.y=a[1]*
d+a[5]*h+a[9]*q+a[13],this.z=a[2]*d+a[6]*h+a[10]*q+a[14],this},applyProjection:function(a){var d=this.x,h=this.y,q=this.z;a=a.elements;var x=a[3]*d+a[7]*h+a[11]*q+a[15];return this.x=(a[0]*d+a[4]*h+a[8]*q+a[12])/x,this.y=(a[1]*d+a[5]*h+a[9]*q+a[13])/x,this.z=(a[2]*d+a[6]*h+a[10]*q+a[14])/x,this},applyQuaternion:function(a){var d=this.x,h=this.y,q=this.z,x=a.x,p=a.y,w=a.z;a=a.w;var v=2*(h*w-q*p);var C=2*(q*x-d*w);var M=2*(d*p-h*x);var L,P,e;return L=C*w-M*p,P=M*x-v*w,e=v*p-C*x,this.x=d+a*v+L,this.y=
h+a*C+P,this.z=q+a*M+e,this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},normalize:function(){return this.divideScalar(this.length())},cross:function(a){var d=this.x,h=this.y,q=this.z;return this.x=h*a.z-q*a.y,this.y=q*a.x-d*a.z,this.z=d*a.y-h*a.x,this},crossVectors:function(a,d){return this.x=
a.y*d.z-a.z*d.y,this.y=a.z*d.x-a.x*d.z,this.z=a.x*d.y-a.y*d.x,this},getPositionFromMatrix:function(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},setEulerFromRotationMatrix:function(a,d){var h=a.elements;a=h[0];var q=h[4],x=h[8],p=h[5],w=h[9],v=h[6];h=h[10];return void 0===d||"XYZ"===d?(this.y=Math.asin(c.Math.clamp(x,-1,1)),.99999>Math.abs(x)?(this.x=Math.atan2(-w,h),this.z=Math.atan2(-q,a)):(this.x=Math.atan2(v,p),this.z=0)):console.error("Error with vector's setEulerFromRotationMatrix: Unknown order: "+
d),this},rotateAboutVector:function(a,d){a.normalize();var h=Math.cos(d),q=Math.sin(d);d=this.clone().multiplyScalar(h);q=a.clone().cross(this).multiplyScalar(q);a=a.clone().multiplyScalar(a.clone().dot(this)).multiplyScalar(1-h);a=d.add(q).add(a);return this.x=a.x,this.y=a.y,this.z=a.z,this},setFromMatrixPosition:function(a){a=a.elements;return this.x=a[12],this.y=a[13],this.z=a[14],this},transformDirection:function(a){var d=this.x,h=this.y,q=this.z;a=a.elements;return this.x=a[0]*d+a[4]*h+a[8]*
q,this.y=a[1]*d+a[5]*h+a[9]*q,this.z=a[2]*d+a[6]*h+a[10]*q,this.normalize()},clone:function(){return new c.Vector3(this.x,this.y,this.z)}};c.Matrix3=function(a,d,h,q,x,p,w,v,C){this.elements=new Float32Array(9);this.set(void 0!==a?a:1,d||0,h||0,q||0,void 0!==x?x:1,p||0,w||0,v||0,void 0!==C?C:1)};c.square=function(a){return a*a};c.conversionMatrix3=function(a,d,h,q,x,p){q=q*Math.PI/180;x=x*Math.PI/180;p=p*Math.PI/180;let w=c.square;q=Math.cos(q);x=Math.cos(x);let v=Math.cos(p);p=Math.sin(p);return new c.Matrix3(a,
d*v,h*x,0,d*p,h*(q-x*v)/p,0,0,h*Math.sqrt(1-w(q)-w(x)-w(v)+2*q*x*v)/p)};c.Matrix3.prototype={constructor:c.Matrix3,set:function(a,d,h,q,x,p,w,v,C){var M=this.elements;return M[0]=a,M[3]=d,M[6]=h,M[1]=q,M[4]=x,M[7]=p,M[2]=w,M[5]=v,M[8]=C,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])},multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[3]*=a,d[6]*=a,d[1]*=a,d[4]*=a,d[7]*=a,d[2]*=a,d[5]*=
a,d[8]*=a,this},getInverse3:function(a){a=a.elements;let d=this.elements;d[0]=a[4]*a[8]-a[5]*a[7];d[3]=a[6]*a[5]-a[3]*a[8];d[6]=a[3]*a[7]-a[6]*a[4];d[1]=a[7]*a[2]-a[1]*a[8];d[4]=a[0]*a[8]-a[6]*a[2];d[7]=a[1]*a[6]-a[0]*a[7];d[2]=a[1]*a[5]-a[2]*a[4];d[5]=a[2]*a[3]-a[0]*a[5];d[8]=a[0]*a[4]-a[1]*a[3];return this.multiplyScalar(1/(a[0]*d[0]+a[3]*d[1]+a[6]*d[2])),this},getInverse:function(a,d){a=a.elements;var h=this.elements;h[0]=a[10]*a[5]-a[6]*a[9];h[1]=-a[10]*a[1]+a[2]*a[9];h[2]=a[6]*a[1]-a[2]*a[5];
h[3]=-a[10]*a[4]+a[6]*a[8];h[4]=a[10]*a[0]-a[2]*a[8];h[5]=-a[6]*a[0]+a[2]*a[4];h[6]=a[9]*a[4]-a[5]*a[8];h[7]=-a[9]*a[0]+a[1]*a[8];h[8]=a[5]*a[0]-a[1]*a[4];a=a[0]*h[0]+a[1]*h[3]+a[2]*h[6];if(0===a){if(d)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");return console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/a),this},getDeterminant:function(){var a=this.elements;return a[0]*a[4]*a[8]+a[1]*a[5]*a[6]+
a[2]*a[3]*a[7]-a[2]*a[4]*a[6]-a[1]*a[3]*a[8]-a[0]*a[5]*a[7]},getMatrix4:function(){var a=this.elements;return new c.Matrix4(a[0],a[3],a[6],0,a[1],a[4],a[7],0,a[2],a[5],a[8],0)},transpose:function(){var a,d=this.elements;return a=d[1],d[1]=d[3],d[3]=a,a=d[2],d[2]=d[6],d[6]=a,a=d[5],d[5]=d[7],d[7]=a,this},clone:function(){var a=this.elements;return new c.Matrix3(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8])}};c.Matrix4=function(a,d,h,q,x,p,w,v,C,M,L,P,e,g,u,n){if(void 0===d&&void 0!==a)this.elements=
new Float32Array(a);else{var y=this.elements=new Float32Array(16);y[0]=void 0!==a?a:1;y[4]=d||0;y[8]=h||0;y[12]=q||0;y[1]=x||0;y[5]=void 0!==p?p:1;y[9]=w||0;y[13]=v||0;y[2]=C||0;y[6]=M||0;y[10]=void 0!==L?L:1;y[14]=P||0;y[3]=e||0;y[7]=g||0;y[11]=u||0;y[15]=void 0!==n?n:1}};c.Matrix4.prototype={constructor:c.Matrix4,set:function(a,d,h,q,x,p,w,v,C,M,L,P,e,g,u,n){var y=this.elements;return y[0]=a,y[4]=d,y[8]=h,y[12]=q,y[1]=x,y[5]=p,y[9]=w,y[13]=v,y[2]=C,y[6]=M,y[10]=L,y[14]=P,y[3]=e,y[7]=g,y[11]=u,y[15]=
n,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(a){a=a.elements;return this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]),this},matrix3FromTopLeft:function(){var a=this.elements;return new c.Matrix3(a[0],a[4],a[8],a[1],a[5],a[9],a[2],a[6],a[10])},setRotationFromEuler:function(a,d){var h=this.elements,q=a.x,x=a.y,p=a.z;a=Math.cos(q);q=Math.sin(q);var w=Math.cos(x);x=Math.sin(x);var v=Math.cos(p);p=Math.sin(p);
if(void 0===d||"XYZ"===d){d=a*v;var C=a*p,M=q*v,L=q*p;h[0]=w*v;h[4]=-w*p;h[8]=x;h[1]=C+M*x;h[5]=d-L*x;h[9]=-q*w;h[2]=L-d*x;h[6]=M+C*x;h[10]=a*w}else console.error("Error with matrix4 setRotationFromEuler. Order: "+d);return this},setRotationFromQuaternion:function(a){var d=this.elements,h=a.x,q=a.y,x=a.z,p=a.w,w=h+h,v=q+q,C=x+x;a=h*w;var M=h*v;h*=C;var L=q*v;q*=C;x*=C;w*=p;v*=p;p*=C;return d[0]=1-(L+x),d[4]=M-p,d[8]=h+v,d[1]=M+p,d[5]=1-(a+x),d[9]=q-w,d[2]=h-v,d[6]=q+w,d[10]=1-(a+L),this},lookAt:function(){var a=
new c.Vector3,d=new c.Vector3,h=new c.Vector3;return function(q,x,p){var w=this.elements;return h.subVectors(q,x).normalize(),0===h.length()&&(h.z=1),a.crossVectors(p,h).normalize(),0===a.length()&&(h.x+=1E-4,a.crossVectors(p,h).normalize()),d.crossVectors(h,a),w[0]=a.x,w[4]=d.x,w[8]=h.x,w[1]=a.y,w[5]=d.y,w[9]=h.y,w[2]=a.z,w[6]=d.z,w[10]=h.z,this}}(),multiplyMatrices:function(a,d){var h=a.elements,q=d.elements;d=this.elements;a=h[0];var x=h[4],p=h[8],w=h[12],v=h[1],C=h[5],M=h[9],L=h[13],P=h[2],e=
h[6],g=h[10],u=h[14],n=h[3],y=h[7],D=h[11];h=h[15];var l=q[0],B=q[4],k=q[8],J=q[12],m=q[1],K=q[5],N=q[9],Q=q[13],H=q[2],V=q[6],W=q[10],ha=q[14],U=q[3],S=q[7],ba=q[11];q=q[15];return d[0]=a*l+x*m+p*H+w*U,d[4]=a*B+x*K+p*V+w*S,d[8]=a*k+x*N+p*W+w*ba,d[12]=a*J+x*Q+p*ha+w*q,d[1]=v*l+C*m+M*H+L*U,d[5]=v*B+C*K+M*V+L*S,d[9]=v*k+C*N+M*W+L*ba,d[13]=v*J+C*Q+M*ha+L*q,d[2]=P*l+e*m+g*H+u*U,d[6]=P*B+e*K+g*V+u*S,d[10]=P*k+e*N+g*W+u*ba,d[14]=P*J+e*Q+g*ha+u*q,d[3]=n*l+y*m+D*H+h*U,d[7]=n*B+y*K+D*V+h*S,d[11]=n*k+y*N+D*
W+h*ba,d[15]=n*J+y*Q+D*ha+h*q,this},multiplyScalar:function(a){var d=this.elements;return d[0]*=a,d[4]*=a,d[8]*=a,d[12]*=a,d[1]*=a,d[5]*=a,d[9]*=a,d[13]*=a,d[2]*=a,d[6]*=a,d[10]*=a,d[14]*=a,d[3]*=a,d[7]*=a,d[11]*=a,d[15]*=a,this},makeTranslation:function(a,d,h){return this.set(1,0,0,a,0,1,0,d,0,0,1,h,0,0,0,1),this},snap:function(a){a=Math.pow(10,4);let d=this.elements;for(let h=0;16>h;h++){let q=Math.round(d[h]);q==Math.round(d[h]*a)/a&&(d[h]=q)}return this},transpose:function(){var a,d=this.elements;
return a=d[1],d[1]=d[4],d[4]=a,a=d[2],d[2]=d[8],d[8]=a,a=d[6],d[6]=d[9],d[9]=a,a=d[3],d[3]=d[12],d[12]=a,a=d[7],d[7]=d[13],d[13]=a,a=d[11],d[11]=d[14],d[14]=a,this},getPosition:function(){var a=new c.Vector3;return function(){console.warn("DEPRECATED: Matrix4's .getPosition() has been removed. Use Vector3.getPositionFromMatrix( matrix ) instead.");var d=this.elements;return a.set(d[12],d[13],d[14])}}(),setPosition:function(a){var d=this.elements;return d[12]=a.x,d[13]=a.y,d[14]=a.z,this},translate:function(a){var d=
this.elements;return d[12]+=a.x,d[13]+=a.y,d[14]+=a.z,this},getInverse:function(a,d){var h=this.elements;a=a.elements;var q=a[0],x=a[4],p=a[8],w=a[12],v=a[1],C=a[5],M=a[9],L=a[13],P=a[2],e=a[6],g=a[10],u=a[14],n=a[3],y=a[7],D=a[11],l=a[15];h[0]=M*u*y-L*g*y+L*e*D-C*u*D-M*e*l+C*g*l;h[4]=w*g*y-p*u*y-w*e*D+x*u*D+p*e*l-x*g*l;h[8]=p*L*y-w*M*y+w*C*D-x*L*D-p*C*l+x*M*l;h[12]=w*M*e-p*L*e-w*C*g+x*L*g+p*C*u-x*M*u;h[1]=L*g*n-M*u*n-L*P*D+v*u*D+M*P*l-v*g*l;h[5]=p*u*n-w*g*n+w*P*D-q*u*D-p*P*l+q*g*l;h[9]=w*M*n-p*L*
n-w*v*D+q*L*D+p*v*l-q*M*l;h[13]=p*L*P-w*M*P+w*v*g-q*L*g-p*v*u+q*M*u;h[2]=C*u*n-L*e*n+L*P*y-v*u*y-C*P*l+v*e*l;h[6]=w*e*n-x*u*n-w*P*y+q*u*y+x*P*l-q*e*l;h[10]=x*L*n-w*C*n+w*v*y-q*L*y-x*v*l+q*C*l;h[14]=w*C*P-x*L*P-w*v*e+q*L*e+x*v*u-q*C*u;h[3]=M*e*n-C*g*n-M*P*y+v*g*y+C*P*D-v*e*D;h[7]=x*g*n-p*e*n+p*P*y-q*g*y-x*P*D+q*e*D;h[11]=p*C*n-x*M*n-p*v*y+q*M*y+x*v*D-q*C*D;h[15]=x*M*P-p*C*P+p*v*e-q*M*e-x*v*g+q*C*g;h=a[0]*h[0]+a[1]*h[4]+a[2]*h[8]+a[3]*h[12];if(0===h){if(d)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");
return console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0"),this.identity(),this}return this.multiplyScalar(1/h),this},isReflected:function(){var a=this.elements;let d=a[0],h=a[4],q=a[8],x=a[1],p=a[5],w=a[9],v=a[2],C=a[6];a=a[10];return 0>d*p*a+x*C*q+v*h*w-v*p*q-x*h*a-d*C*w},compose:function(){var a=new c.Matrix4,d=new c.Matrix4;return function(h,q,x){var p=this.elements;return a.identity(),a.setRotationFromQuaternion(q),d.makeScale(x.x,x.y,x.z),this.multiplyMatrices(a,d),p[12]=
h.x,p[13]=h.y,p[14]=h.z,this}}(),getScale:function(){var a=new c.Vector3,d=new c.Vector3,h=new c.Vector3;return function(q){var x=this.elements;return q=q instanceof c.Vector3?q:new c.Vector3,a.set(x[0],x[1],x[2]),d.set(x[4],x[5],x[6]),h.set(x[8],x[9],x[10]),q.x=a.length(),q.y=d.length(),q.z=h.length(),q}}(),decompose:function(){var a=new c.Vector3,d=new c.Vector3,h=new c.Vector3,q=new c.Matrix4;return function(x,p,w){var v=this.elements;return a.set(v[0],v[1],v[2]),d.set(v[4],v[5],v[6]),h.set(v[8],
v[9],v[10]),x=x instanceof c.Vector3?x:new c.Vector3,p=p instanceof c.Quaternion?p:new c.Quaternion,(w=w instanceof c.Vector3?w:new c.Vector3).x=a.length(),w.y=d.length(),w.z=h.length(),x.x=v[12],x.y=v[13],x.z=v[14],q.copy(this),q.elements[0]/=w.x,q.elements[1]/=w.x,q.elements[2]/=w.x,q.elements[4]/=w.y,q.elements[5]/=w.y,q.elements[6]/=w.y,q.elements[8]/=w.z,q.elements[9]/=w.z,q.elements[10]/=w.z,p.setFromRotationMatrix(q),[x,p,w]}}(),scale:function(a){var d=this.elements,h=a.x,q=a.y;a=a.z;return d[0]*=
h,d[4]*=q,d[8]*=a,d[1]*=h,d[5]*=q,d[9]*=a,d[2]*=h,d[6]*=q,d[10]*=a,d[3]*=h,d[7]*=q,d[11]*=a,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeFrustum:function(a,d,h,q,x,p){var w=this.elements;return w[0]=2*x/(d-a),w[4]=0,w[8]=(d+a)/(d-a),w[12]=0,w[1]=0,w[5]=2*x/(q-h),w[9]=(q+h)/(q-h),w[13]=0,w[2]=0,w[6]=0,w[10]=-(p+x)/(p-x),w[14]=-2*p*x/(p-x),w[3]=0,w[7]=0,w[11]=
-1,w[15]=0,this},makePerspective:function(a,d,h,q){a=h*Math.tan(c.Math.degToRad(.5*a));var x=-a;return this.makeFrustum(x*d,a*d,x,a,h,q)},makeOrthographic:function(a,d,h,q,x,p){var w=this.elements,v=1/(d-a),C=1/(h-q),M=1/(p-x);return w[0]=2*v,w[4]=0,w[8]=0,w[12]=-((d+a)*v),w[1]=0,w[5]=2*C,w[9]=0,w[13]=-((h+q)*C),w[2]=0,w[6]=0,w[10]=-2*M,w[14]=-((p+x)*M),w[3]=0,w[7]=0,w[11]=0,w[15]=1,this},isEqual:function(a){a=a.elements;var d=this.elements;return d[0]==a[0]&&d[4]==a[4]&&d[8]==a[8]&&d[12]==a[12]&&
d[1]==a[1]&&d[5]==a[5]&&d[9]==a[9]&&d[13]==a[13]&&d[2]==a[2]&&d[6]==a[6]&&d[10]==a[10]&&d[14]==a[14]&&d[3]==a[3]&&d[7]==a[7]&&d[11]==a[11]&&d[15]==a[15]},clone:function(){var a=this.elements;return new c.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])},isIdentity:function(){var a=this.elements;return 1==a[0]&&0==a[4]&&0==a[8]&&0==a[12]&&0==a[1]&&1==a[5]&&0==a[9]&&0==a[13]&&0==a[2]&&0==a[6]&&1==a[10]&&0==a[14]&&0==a[3]&&0==a[7]&&0==a[11]&&1==a[15]},isNearlyIdentity:function(a){return this.clone().snap(a).isIdentity()}};
c.Vector3.prototype.unproject=function(){var a=new c.Matrix4;return function(d){return a.multiplyMatrices(d.matrixWorld,a.getInverse(d.projectionMatrix)),this.applyMatrix4(a)}}();c.Ray=function(a,d){this.origin=void 0!==a?a:new c.Vector3;this.direction=void 0!==d?d:new c.Vector3};c.Ray.prototype={constructor:c.Ray,set:function(a,d){return this.origin.copy(a),this.direction.copy(d),this},copy:function(a){return this.origin.copy(a.origin),this.direction.copy(a.direction),this},at:function(a,d){return(d||
new c.Vector3).copy(this.direction).multiplyScalar(a).add(this.origin)},recast:function(){var a=new c.Vector3;return function(d){return this.origin.copy(this.at(d,a)),this}}(),closestPointToPoint:function(a,d){d=d||new c.Vector3;d.subVectors(a,this.origin);a=d.dot(this.direction);return d.copy(this.direction).multiplyScalar(a).add(this.origin)},distanceToPoint:function(){var a=new c.Vector3;return function(d){var h=a.subVectors(d,this.origin).dot(this.direction);return a.copy(this.direction).multiplyScalar(h).add(this.origin),
a.distanceTo(d)}}(),isIntersectionCylinder:function(){},isIntersectionSphere:function(a){return this.distanceToPoint(a.center)<=a.radius},isIntersectionPlane:function(a){return 0!==a.normal.dot(this.direction)||0===a.distanceToPoint(this.origin)},distanceToPlane:function(a){var d=a.normal.dot(this.direction);return 0===d?0===a.distanceToPoint(this.origin)?0:void 0:-(this.origin.dot(a.normal)+a.constant)/d},intersectPlane:function(a,d){a=this.distanceToPlane(a);if(void 0!==a)return this.at(a,d)},applyMatrix4:function(a){return this.direction.add(this.origin).applyMatrix4(a),
this.origin.applyMatrix4(a),this.direction.sub(this.origin),this},equals:function(a){return a.origin.equals(this.origin)&&a.direction.equals(this.direction)},clone:function(){return(new c.Ray).copy(this)}};c.Sphere=function(a,d){this.center=void 0!==a?a:new c.Vector3;this.radius=void 0!==d?d:0};c.Sphere.prototype={constructor:c.Sphere,set:function(a,d){return this.center.copy(a),this.radius=d,this},copy:function(a){return this.center.copy(a.center),this.radius=a.radius,this},applyMatrix4:function(a){return this.center.applyMatrix4(a),
this.radius*=a.getMaxScaleOnAxis(),this},translate:function(a){return this.center.add(a),this},equals:function(a){return a.center.equals(this.center)&&a.radius===this.radius},clone:function(){return(new c.Sphere).copy(this)}};c.Cylinder=function(a,d,h){this.c1=void 0!==a?a:new c.Vector3;this.c2=void 0!==d?d:new c.Vector3;this.direction=(new c.Vector3).subVectors(this.c2,this.c1).normalize();this.radius=void 0!==h?h:0};c.Cylinder.prototype={constructor:c.Cylinder,copy:function(a){return this.c1.copy(a.c1),
this.c2.copy(a.c2),this.direction.copy(a.direction),this.radius=a.radius,this},lengthSq:function(){var a=new c.Vector3;return function(){return a.subVectors(this.c2,this.c1).lengthSq()}}(),applyMatrix4:function(a){return this.direction.add(this.c1).applyMatrix4(a),this.c1.applyMatrix4(a),this.c2.applyMatrix4(a),this.direction.sub(this.c1).normalize(),this.radius*=a.getMaxScaleOnAxis(),this}};c.Triangle=function(a,d,h){this.a=void 0!==a?a:new c.Vector3;this.b=void 0!==d?d:new c.Vector3;this.c=void 0!==
h?h:new c.Vector3};c.Triangle.prototype={constructor:c.Triangle,copy:function(a){return this.a.copy(a.a),this.b.copy(a.b),this.c.copy(a.c),this},applyMatrix4:function(a){return this.a.applyMatrix4(a),this.b.applyMatrix4(a),this.c.applyMatrix4(a),this},getNormal:function(){var a=new c.Vector3;return function(){var d=this.a.clone();return d.sub(this.b),a.subVectors(this.c,this.b),d.cross(a),d.normalize(),d}}()};c.EventDispatcher=function(){var a={};this.addEventListener=function(d,h){void 0===a[d]&&
(a[d]=[]);-1===a[d].indexOf(h)&&a[d].push(h)};this.removeEventListener=function(d,h){h=a[d].indexOf(h);-1!==h&&a[d].splice(h,1)};this.dispatchEvent=function(d){var h=a[d.type];if(void 0!==h){d.target=this;for(var q=0,x=h.length;q<x;q++)h[q].call(this,d)}}};c.Color=function(a){return 1<arguments.length?(this.r=arguments[0]||0,this.g=arguments[1]||0,this.b=arguments[2]||0,this):this.set(a)};c.Color.prototype={constructor:c.Color,r:0,g:0,b:0,set:function(a){if(a instanceof c.Color)return a.clone();"number"==
typeof a?this.setHex(a):"object"==typeof a&&"r"in a&&"g"in a&&"b"in a&&(this.r=a.r,this.g=a.g,this.b=a.b)},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},getHex:function(){return Math.round(255*this.r)<<16|Math.round(255*this.g)<<8|Math.round(255*this.b)},clone:function(){return new c.Color(this.r,this.g,this.b)},copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},scaled:function(){var a={};return a.r=Math.round(255*this.r),
a.g=Math.round(255*this.g),a.b=Math.round(255*this.b),a.a=1,a}};c.Object3D=function(){this.id=c.Object3DIDCount++;this.name="";this.parent=void 0;this.children=[];this.position=new c.Vector3;this.rotation=new c.Vector3;this.matrix=new c.Matrix4;this.matrixWorld=new c.Matrix4;this.quaternion=new c.Quaternion;this.eulerOrder="XYZ";this.up=new c.Vector3(0,1,0);this.scale=new c.Vector3(1,1,1);this.rotationAutoUpdate=this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0;this.useQuaternion=!1;this.visible=
!0};c.Object3D.prototype={constructor:c.Object3D,lookAt:function(a){this.matrix.lookAt(a,this.position,this.up);this.rotationAutoUpdate&&(!0===this.useQuaternion?this.quaternion.copy(this.matrix.decompose()[1]):this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder))},add:function(a){if(a!==this){a.parent=this;this.children.push(a);for(var d=this;void 0!==d.parent;)d=d.parent;void 0!==d&&d instanceof c.Scene&&d.__addObject(a)}else console.error("Can't add $3Dmol.Object3D to itself")},
remove:function(a){var d=this.children.indexOf(a);if(-1!==d){a.parent=void 0;this.children.splice(d,1);for(d=this;void 0!==d.parent;)d=d.parent;void 0!==d&&d instanceof c.Scene&&d.__removeObject(a)}},vrml:function(a){a||=" ";var d=2*Math.atan2(this.quaternion.lengthxyz(),this.quaternion.w),h=0,q=0,x=0;0!=d&&(x=Math.sin(d/2),h=this.quaternion.x/x,q=this.quaternion.y/x,x=this.quaternion.z/x);d=a+"Transform {\n"+a+" center "+this.position.x+" "+this.position.y+" "+this.position.z+"\n"+a+" rotation "+
h+" "+q+" "+x+" "+d+"\n"+a+" children [\n";this.geometry&&(d+=this.geometry.vrml(a,this.material));for(h=0;h<this.children.length;h++)d+=this.children[h].vrml(a+" ")+",\n";return d+" ]\n}"},updateMatrix:function(){this.matrix.setPosition(this.position);!1===this.useQuaternion?this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder):this.matrix.setRotationFromQuaternion(this.quaternion);1===this.scale.x&&1===this.scale.y&&1===this.scale.z||this.matrix.scale(this.scale);this.matrixWorldNeedsUpdate=
!0},updateMatrixWorld:function(a){!0===this.matrixAutoUpdate&&this.updateMatrix();!0!==this.matrixWorldNeedsUpdate&&!0!==a||(void 0===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix));this.matrixWorldNeedsUpdate=!1;for(a=0;a<this.children.length;a++)this.children[a].updateMatrixWorld(!0)},clone:function(a){void 0===a&&(a=new c.Object3D);a.name=this.name;a.up.copy(this.up);a.position.copy(this.position);a.rotation.copy(this.rotation);
a.eulerOrder=this.eulerOrder;a.scale.copy(this.scale);a.rotationAutoUpdate=this.rotationAutoUpdate;a.matrix.copy(this.matrix);a.matrixWorld.copy(this.matrixWorld);a.quaternion.copy(this.quaternion);a.matrixAutoUpdate=this.matrixAutoUpdate;a.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate;a.useQuaternion=this.useQuaternion;a.visible=this.visible;for(var d=0;d<this.children.length;d++)a.add(this.children[d].clone());return a},setVisible:function(a){this.visible=a;for(var d=0;d<this.children.length;d++)this.children[d].setVisible(a)}};
c.Object3DIDCount=0;c.Geometry=function(){var a=function(q){this.id=q||0;this.lineArray=this.radiusArray=this.faceArray=this.normalArray=this.colorArray=this.vertexArray=null;this.lineidx=this.faceidx=this.vertices=0};a.prototype.setColors=function(q){var x=this.vertexArray,p=this.colorArray;if(x.length==p.length)for(var w=0;w<x.length;w+=3){var v=q(x[w],x[w+1],x[w+2]);v instanceof c.Color||(v=c.CC.color(v));p[w]=v.r;p[w+1]=v.g;p[w+2]=v.b}else console.log("Cannot re-color geometry group due to mismatched lengths.")};
a.prototype.getNumVertices=function(){return this.vertices};a.prototype.getVertices=function(){return this.vertexArray};a.prototype.getCentroid=function(){for(var q,x,p,w=new c.Vector3,v=0;v<this.vertices;++v)q=3*v,x=this.vertexArray[q],p=this.vertexArray[q+1],q=this.vertexArray[q+2],w.x+=x,w.y+=p,w.z+=q;return w.divideScalar(this.vertices),w};a.prototype.setNormals=function(){var q=this.faceArray,x=this.vertexArray,p=this.normalArray;if(this.vertices&&this.faceidx)for(var w,v,C,M,L,P,e=0;e<q.length/
3;++e)w=3*q[3*e],v=3*q[3*e+1],C=3*q[3*e+2],M=new c.Vector3(x[w],x[w+1],x[w+2]),L=new c.Vector3(x[v],x[v+1],x[v+2]),P=new c.Vector3(x[C],x[C+1],x[C+2]),M.subVectors(M,L),P.subVectors(P,L),P.cross(M),(M=P).normalize(),p[w]+=M.x,p[v]+=M.x,p[C]+=M.x,p[w+1]+=M.y,p[v+1]+=M.y,p[C+1]+=M.y,p[w+2]+=M.z,p[v+2]+=M.z,p[C+2]+=M.z};a.prototype.setLineIndices=function(){if(this.faceidx&&(!this.lineArray||this.lineArray.length!=2*this.faceidx||this.lineidx!=2*this.faceidx)){var q=this.faceArray,x=this.lineArray=new Uint16Array(2*
this.faceidx);this.lineidx=2*this.faceidx;for(var p=0;p<this.faceidx/3;++p){var w=3*p,v=2*w,C=q[w],M=q[w+1];w=q[w+2];x[v]=C;x[v+1]=M;x[v+2]=C;x[v+3]=w;x[v+4]=M;x[v+5]=w}}};a.prototype.vrml=function(q,x){var p=q+"Shape {\n"+q+" appearance Appearance {\n"+q+"  material Material {\n"+q+"   diffuseColor "+x.color.r+" "+x.color.g+" "+x.color.b+"\n";x.transparent&&(p+=q+"   transparency "+(1-x.opacity)+"\n");p=p+(q+"  }\n")+(q+" }\n");var w=q;if(q+=" ",x instanceof c.LineBasicMaterial){p+=q+"geometry IndexedLineSet {\n"+
q+" colorPerVertex TRUE\n"+q+" coord Coordinate {\n"+q+"  point [\n";for(x=0;x<this.vertices;++x){var v=3*x;p+=q+"   "+this.vertexArray[v]+" "+this.vertexArray[v+1]+" "+this.vertexArray[v+2]+",\n"}if(p+=q+"  ]\n",p+=q+" }\n",this.colorArray){p+=q+" color Color {\n"+q+"  color [\n";for(x=0;x<this.vertices;++x)v=3*x,p+=q+"   "+this.colorArray[v]+" "+this.colorArray[v+1]+" "+this.colorArray[v+2]+",\n";p=p+(q+"  ]\n")+(q+" }\n")}p+=q+" coordIndex [\n";for(x=0;x<this.vertices;x+=2)p+=q+"  "+x+", "+(x+
1)+", -1,\n"}else{p=p+(q+"geometry IndexedFaceSet {\n"+q+" colorPerVertex TRUE\n"+q+" normalPerVertex TRUE\n"+q+" solid FALSE\n")+(q+" coord Coordinate {\n"+q+"  point [\n");for(x=0;x<this.vertices;++x)v=3*x,p+=q+"   "+this.vertexArray[v]+" "+this.vertexArray[v+1]+" "+this.vertexArray[v+2]+",\n";p=p+(q+"  ]\n")+(q+" }\n")+(q+" normal Normal {\n"+q+"  vector [\n");for(x=0;x<this.vertices;++x)v=3*x,p+=q+"   "+this.normalArray[v]+" "+this.normalArray[v+1]+" "+this.normalArray[v+2]+",\n";if(p+=q+"  ]\n",
p+=q+" }\n",this.colorArray){p+=q+" color Color {\n"+q+"  color [\n";for(x=0;x<this.vertices;++x)v=3*x,p+=q+"   "+this.colorArray[v]+" "+this.colorArray[v+1]+" "+this.colorArray[v+2]+",\n";p=p+(q+"  ]\n")+(q+" }\n")}p+=q+" coordIndex [\n";for(x=0;x<this.faceidx;x+=3)p+=q+"  "+this.faceArray[x]+", "+this.faceArray[x+1]+", "+this.faceArray[x+2]+", -1,\n"}return p+(q+" ]\n")+(q+"}\n")+(w+"}")};a.prototype.truncateArrayBuffers=function(q,x){q=!0===q;var p=this.colorArray,w=this.normalArray,v=this.faceArray,
C=this.lineArray,M=this.radiusArray;this.vertexArray=this.vertexArray.subarray(0,3*this.vertices);this.colorArray=p.subarray(0,3*this.vertices);q?(this.normalArray=w.subarray(0,3*this.vertices),this.faceArray=v.subarray(0,this.faceidx),0<this.lineidx?this.lineArray=C.subarray(0,this.lineidx):this.lineArray=new Uint16Array(0)):(this.normalArray=new Float32Array(0),this.faceArray=new Uint16Array(0),this.lineArray=new Uint16Array(0));M&&(this.radiusArray=M.subarray(0,this.vertices));x&&(this.normalArray&&
(this.normalArray=new Float32Array(this.normalArray)),this.faceArray&&(this.faceArray=new Uint16Array(this.faceArray)),this.lineArray&&(this.lineArray=new Uint16Array(this.lineArray)),this.vertexArray&&(this.vertexArray=new Float32Array(this.vertexArray)),this.colorArray&&(this.colorArray=new Float32Array(this.colorArray)),this.radiusArray&&(this.radiusArray=new Float32Array(this.radiusArray)));this.__inittedArrays=!0};var d=function(q){var x=new a(q.geometryGroups.length);return q.geometryGroups.push(x),
q.groups=q.geometryGroups.length,x.vertexArray=new Float32Array(196605),x.colorArray=new Float32Array(196605),q.mesh&&(x.normalArray=new Float32Array(196605),x.faceArray=new Uint16Array(393210),x.lineArray=new Uint16Array(393210)),q.radii&&(x.radiusArray=new Float32Array(65535)),x.useOffset=q.offset,x},h=function(q,x,p){c.EventDispatcher.call(this);this.id=c.GeometryIDCount++;this.name="";this.hasTangents=!1;this.dynamic=!0;this.mesh=!0===q;this.radii=x||!1;this.offset=p||!1;this.buffersNeedUpdate=
this.colorsNeedUpdate=this.normalsNeedUpdate=this.elementsNeedUpdate=this.verticesNeedUpdate=!1;this.geometryGroups=[];this.groups=0};return h.prototype={constructor:h,updateGeoGroup:function(q){var x=0<this.groups?this.geometryGroups[this.groups-1]:null;return(!x||x.vertices+(q||0)>x.vertexArray.length/3)&&(x=d(this)),x},vrml:function(q,x){for(var p="",w=this.geometryGroups.length,v=0;v<w;v++)p+=this.geometryGroups[v].vrml(q,x)+",\n";return p},addGeoGroup:function(){return d(this)},setUpNormals:function(q){q=
q||!1;for(var x=0;x<this.groups;x++)this.geometryGroups[x].setNormals(q)},setColors:function(q){for(var x=this.geometryGroups.length,p=0;p<x;p++)this.geometryGroups[p].setColors(q)},setUpWireframe:function(){for(var q=0;q<this.groups;q++)this.geometryGroups[q].setLineIndices()},initTypedArrays:function(){for(var q=0;q<this.groups;q++){var x=this.geometryGroups[q];!0!==x.__inittedArrays&&x.truncateArrayBuffers(this.mesh,!1)}},dispose:function(){this.dispatchEvent({type:"dispose"})}},h}();Object.defineProperty(c.Geometry.prototype,
"vertices",{get:function(){for(var a=0,d=0;d<this.groups;d++)a+=this.geometryGroups[d].vertices;return a}});c.GeometryIDCount=0;c.Raycaster=function(){var a,d=function(P,e,g,u){this.ray=new c.Ray(P,e);0<this.ray.direction.lengthSq()&&this.ray.direction.normalize();this.near=u||0;this.far=g||1/0},h=new c.Sphere,q=new c.Cylinder,x=new c.Triangle,p=new c.Vector3,w=new c.Vector3,v=new c.Vector3,C=new c.Vector3,M=new c.Vector3,L=function(P,e){return P.distance-e.distance};return d.prototype.precision=
1E-4,d.prototype.linePrecision=.2,d.prototype.set=function(P,e){this.ray.set(P,e)},d.prototype.setFromCamera=(a=new c.Matrix4,function(P,e){e.ortho?(this.ray.origin.set(P.x,P.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(P.x,P.y,P.z),e.projectionMatrixInverse.getInverse(e.projectionMatrix),a.multiplyMatrices(e.matrixWorld,e.projectionMatrixInverse),this.ray.direction.applyProjection(a),
this.ray.direction.sub(this.ray.origin).normalize())}),d.prototype.intersectObjects=function(P,e){for(var g=[],u=0,n=e.length;u<n;u++)a:{var y=void 0,D=void 0,l=void 0,B=void 0,k=void 0,J=void 0,m=void 0,K=void 0,N,Q=void 0;var H=void 0;var V=P,W=e[u],ha=g;if(M.getPositionFromMatrix(V.matrixWorld),void 0!==W.intersectionShape){var U=W.intersectionShape;var S=this.linePrecision;var ba=(S*=V.matrixWorld.getMaxScaleOnAxis())*S;if(!(void 0!==W.boundingSphere&&W.boundingSphere instanceof c.Sphere)||(h.copy(W.boundingSphere),
h.applyMatrix4(V.matrixWorld),this.ray.isIntersectionSphere(h))){var Y=0;for(S=U.triangle.length;Y<S;Y++)if(U.triangle[Y]instanceof c.Triangle&&!(x.copy(U.triangle[Y]),x.applyMatrix4(V.matrixWorld),H=x.getNormal(),0<=(Q=this.ray.direction.dot(H)))&&!(p.subVectors(x.a,this.ray.origin),0>(m=H.dot(p)/Q))){w.copy(this.ray.direction).multiplyScalar(m).add(this.ray.origin);w.sub(x.a);v.copy(x.b).sub(x.a);C.copy(x.c).sub(x.a);var aa=v.dot(C),ia=v.lengthSq(),z=C.lengthSq();0>(l=(ia*w.dot(C)-aa*w.dot(v))/
(ia*z-aa*aa))||1<l||0>(B=(w.dot(v)-l*aa)/ia)||1<B||1<B+l||ha.push({clickable:W,distance:m})}Y=0;for(S=U.cylinder.length;Y<S;Y++)U.cylinder[Y]instanceof c.Cylinder&&(q.copy(U.cylinder[Y]),q.applyMatrix4(V.matrixWorld),p.subVectors(q.c1,this.ray.origin),N=p.dot(q.direction),K=p.dot(this.ray.direction),0!=(J=1-(Q=Math.min(Math.max(this.ray.direction.dot(q.direction),-1),1))*Q))&&(D=(Q*K-N)/J,y=(K-Q*N)/J,w.copy(q.direction).multiplyScalar(D).add(q.c1),v.copy(this.ray.direction).multiplyScalar(y).add(this.ray.origin),
H=C.subVectors(w,v).lengthSq(),aa=q.radius*q.radius,H<=aa&&!(0>(B=Q*(l=m=0>=(k=(Q*N-K)*(Q*N-K)-J*(p.lengthSq()-N*N-aa))?Math.sqrt(H):(K-Q*N-Math.sqrt(k))/J)-N)||B*B>q.lengthSq()||0>l)&&ha.push({clickable:W,distance:m}));Y=0;for(S=U.line.length;Y<S;Y+=2)w.copy(U.line[Y]),w.applyMatrix4(V.matrixWorld),v.copy(U.line[Y+1]),v.applyMatrix4(V.matrixWorld),C.subVectors(v,w),k=C.lengthSq(),C.normalize(),p.subVectors(w,this.ray.origin),l=p.dot(C),K=p.dot(this.ray.direction),0!=(J=1-(Q=Math.min(Math.max(this.ray.direction.dot(C),
-1),1))*Q)&&(D=(Q*K-l)/J,y=(K-Q*l)/J,w.add(C.multiplyScalar(D)),v.copy(this.ray.direction).multiplyScalar(y).add(this.ray.origin),C.subVectors(v,w).lengthSq()<ba&&D*D<k&&ha.push({clickable:W,distance:y}));Y=0;for(S=U.sphere.length;Y<S;Y++)if(U.sphere[Y]instanceof c.Sphere&&(h.copy(U.sphere[Y]),h.applyMatrix4(V.matrixWorld),this.ray.isIntersectionSphere(h))){w.subVectors(h.center,this.ray.origin);y=w.dot(this.ray.direction);k=y*y-(w.lengthSq()-h.radius*h.radius);0>y||(m=0>=k?y:y-Math.sqrt(k),ha.push({clickable:W,
distance:m}));break a}}}}return g.sort(L),g},d}();c.Projector=function(){let a=new c.Matrix4;this.projectVector=function(d,h){return h.matrixWorldInverse.getInverse(h.matrixWorld),a.multiplyMatrices(h.projectionMatrix,h.matrixWorldInverse),d.applyProjection(a)};this.unprojectVector=function(d,h){return h.projectionMatrixInverse.getInverse(h.projectionMatrix),a.multiplyMatrices(h.matrixWorld,h.projectionMatrixInverse),d.applyProjection(a)}};c.Camera=function(a,d,h,q,x){c.Object3D.call(this);this.fov=
void 0!==a?a:50;this.aspect=void 0!==d?d:1;this.near=void 0!==h?h:.1;this.far=void 0!==q?q:2E3;this.projectionMatrix=new c.Matrix4;this.projectionMatrixInverse=new c.Matrix4;this.matrixWorldInverse=new c.Matrix4;this.right=this.position.z*Math.tan(Math.PI/180*a);this.left=-this.right;this.top=this.right/this.aspect;this.bottom=-this.top;this.ortho=!!x;this.updateProjectionMatrix()};c.Camera.prototype=Object.create(c.Object3D.prototype);c.Camera.prototype.lookAt=function(a){this.matrix.lookAt(this.position,
a,this.up);this.rotationAutoUpdate&&(!1===this.useQuaternion?this.rotation.setEulerFromRotationMatrix(this.matrix,this.eulerOrder):this.quaternion.copy(this.matrix.decompose()[1]))};c.Camera.prototype.updateProjectionMatrix=function(){this.ortho?this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far):this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far);this.projectionMatrixInverse.getInverse(this.projectionMatrix)};c.SpritePlugin=
function(){function a(P,e){return P.z!==e.z?e.z-P.z:e.id-P.id}var d,h,q,x,p,w,v,C,M,L;this.init=function(P){d=P.context;h=P;q=P.getPrecision();x=new Float32Array(16);p=new Uint16Array(6);P=0;x[P++]=-1;x[P++]=-1;x[P++]=0;x[P++]=0;x[P++]=1;x[P++]=-1;x[P++]=1;x[P++]=0;x[P++]=1;x[P++]=1;x[P++]=1;x[P++]=1;x[P++]=-1;x[P++]=1;x[P++]=0;x[P++]=1;P=0;p[P++]=0;p[P++]=1;p[P++]=2;p[P++]=0;p[P++]=2;p[P++]=3;w=d.createBuffer();v=d.createBuffer();d.bindBuffer(d.ARRAY_BUFFER,w);d.bufferData(d.ARRAY_BUFFER,x,d.STATIC_DRAW);
d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,v);d.bufferData(d.ELEMENT_ARRAY_BUFFER,p,d.STATIC_DRAW);P=c.ShaderLib.sprite;var e=q,g=d.createProgram(),u=d.createShader(d.FRAGMENT_SHADER),n=d.createShader(d.VERTEX_SHADER);e="precision "+e+" float;\n";C=(d.shaderSource(u,e+P.fragmentShader),d.shaderSource(n,e+P.vertexShader),d.compileShader(u),d.compileShader(n),d.getShaderParameter(u,d.COMPILE_STATUS)&&d.getShaderParameter(n,d.COMPILE_STATUS)?(d.attachShader(g,u),d.attachShader(g,n),d.linkProgram(g),d.getProgramParameter(g,
d.LINK_STATUS)||console.error("Could not initialize shader"),g):(console.error(d.getShaderInfoLog(u)),console.error("could not initialize shader"),null));M={};L={};M.position=d.getAttribLocation(C,"position");M.uv=d.getAttribLocation(C,"uv");L.uvOffset=d.getUniformLocation(C,"uvOffset");L.uvScale=d.getUniformLocation(C,"uvScale");L.rotation=d.getUniformLocation(C,"rotation");L.scale=d.getUniformLocation(C,"scale");L.alignment=d.getUniformLocation(C,"alignment");L.color=d.getUniformLocation(C,"color");
L.map=d.getUniformLocation(C,"map");L.opacity=d.getUniformLocation(C,"opacity");L.useScreenCoordinates=d.getUniformLocation(C,"useScreenCoordinates");L.screenPosition=d.getUniformLocation(C,"screenPosition");L.modelViewMatrix=d.getUniformLocation(C,"modelViewMatrix");L.projectionMatrix=d.getUniformLocation(C,"projectionMatrix");L.fogType=d.getUniformLocation(C,"fogType");L.fogDensity=d.getUniformLocation(C,"fogDensity");L.fogNear=d.getUniformLocation(C,"fogNear");L.fogFar=d.getUniformLocation(C,"fogFar");
L.fogColor=d.getUniformLocation(C,"fogColor");L.alphaTest=d.getUniformLocation(C,"alphaTest")};this.render=function(P,e,g,u){var n=P.__webglSprites,y=n.length;if(y){var D=M,l=L,B=.5*g,k=.5*u;d.useProgram(C);d.enableVertexAttribArray(D.position);d.enableVertexAttribArray(D.uv);d.disable(d.CULL_FACE);d.enable(d.BLEND);d.bindBuffer(d.ARRAY_BUFFER,w);d.vertexAttribPointer(D.position,2,d.FLOAT,!1,16,0);d.vertexAttribPointer(D.uv,2,d.FLOAT,!1,16,8);d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,v);d.uniformMatrix4fv(l.projectionMatrix,
!1,e.projectionMatrix.elements);d.activeTexture(d.TEXTURE0);d.uniform1i(l.map,0);var J=D=0,m=P.fog;m?(d.uniform3f(l.fogColor,m.color.r,m.color.g,m.color.b),d.uniform1f(l.fogNear,m.near),d.uniform1f(l.fogFar,m.far),d.uniform1i(l.fogType,1),D=1,J=1):(d.uniform1i(l.fogType,0),D=0,J=0);var K,N,Q=[];for(m=0;m<y;m++){var H=(K=n[m]).material;K.visible&&0!==H.opacity&&(H.useScreenCoordinates?K.z=-K.position.z:(K._modelViewMatrix.multiplyMatrices(e.matrixWorldInverse,K.matrixWorld),K.z=-K._modelViewMatrix.elements[14]))}n.sort(a);
for(m=0;m<y;m++)if(H=(K=n[m]).material,K.visible&&0!==H.opacity&&H.map&&H.map.image&&H.map.image.width)d.uniform1f(l.alphaTest,H.alphaTest),e=H.map.image.height,Q[0]=H.map.image.width*h.devicePixelRatio/g,Q[1]=e*h.devicePixelRatio/u,!0===H.useScreenCoordinates?(d.uniform1i(l.useScreenCoordinates,1),d.uniform3f(l.screenPosition,(K.position.x*h.devicePixelRatio-B)/B,(k-K.position.y*h.devicePixelRatio)/k,Math.max(0,Math.min(1,K.position.z)))):(d.uniform1i(l.useScreenCoordinates,0),d.uniformMatrix4fv(l.modelViewMatrix,
!1,K._modelViewMatrix.elements)),D!==(N=P.fog&&H.fog?J:0)&&(d.uniform1i(l.fogType,N),D=N),e=1/(H.scaleByViewport?u:1),Q[0]=Q[0]*e*K.scale.x,Q[1]=Q[1]*e*K.scale.y,d.uniform2f(l.uvScale,H.uvScale.x,H.uvScale.y),d.uniform2f(l.uvOffset,H.uvOffset.x,H.uvOffset.y),d.uniform2f(l.alignment,H.alignment.x,H.alignment.y),d.uniform1f(l.opacity,H.opacity),d.uniform3f(l.color,H.color.r,H.color.g,H.color.b),d.uniform1f(l.rotation,K.rotation),d.uniform2fv(l.scale,Q),h.setDepthTest(H.depthTest),h.setDepthWrite(H.depthWrite),
h.setTexture(H.map,0),d.drawElements(d.TRIANGLES,6,d.UNSIGNED_SHORT,0);d.enable(d.CULL_FACE)}}};c.Light=function(a,d){c.Object3D.call(this);this.color=new c.Color(a);this.position=new c.Vector3(0,1,0);this.target=new c.Object3D;this.intensity=void 0!==d?d:1;this.onlyShadow=this.castShadow=!1};c.Light.prototype=Object.create(c.Object3D.prototype);c.Material=function(){c.EventDispatcher.call(this);this.id=c.MaterialIdCount++;this.name="";this.side=c.FrontSide;this.opacity=1;this.transparent=!1;this.stencilTest=
this.depthWrite=this.depthTest=!0;this.polygonOffset=!1;this.alphaTest=this.polygonOffsetUnits=this.polygonOffsetFactor=0;this.needsUpdate=this.visible=!0};c.Material.prototype.setValues=function(a){if(void 0!==a)for(var d in a){var h=a[d];if(void 0!==h){if(d in this){var q=this[d];q instanceof c.Color&&h instanceof c.Color?q.copy(h):q instanceof c.Color?q.set(h):q instanceof c.Vector3&&h instanceof c.Vector3?q.copy(h):this[d]=h}}else console.warn("$3Dmol.Material: '"+d+"' parameter is undefined.")}};
c.Material.prototype.clone=function(a){return void 0===a&&(a=new c.Material),a.name=this.name,a.side=this.side,a.opacity=this.opacity,a.transparent=this.transparent,a.depthTest=this.depthTest,a.depthWrite=this.depthWrite,a.stencilTest=this.stencilTest,a.polygonOffset=this.polygonOffset,a.polygonOffsetFactor=this.polygonOffsetFactor,a.polygonOffsetUnits=this.polygonOffsetUnits,a.alphaTest=this.alphaTest,a.overdraw=this.overdraw,a.visible=this.visible,a};c.Material.prototype.dispose=function(){this.dispatchEvent({type:"dispose"})};
c.MaterialIdCount=0;c.LineBasicMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.linewidth=1;this.linejoin=this.linecap="round";this.vertexColors=!1;this.fog=!0;this.shaderID="basic";this.setValues(a)};c.LineBasicMaterial.prototype=Object.create(c.Material.prototype);c.LineBasicMaterial.prototype.clone=function(){var a=new c.LineBasicMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a};c.MeshLambertMaterial=function(a){c.Material.call(this);
this.color=new c.Color(16777215);this.ambient=new c.Color(1048575);this.emissive=new c.Color(0);this.wrapAround=!1;this.wrapRGB=new c.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=c.SmoothShading;this.shaderID="lambert";this.vertexColors=c.NoColors;this.skinning=!1;this.setValues(a)};c.MeshLambertMaterial.prototype=
Object.create(c.Material.prototype);c.MeshLambertMaterial.prototype.clone=function(a){return void 0===a&&(a=new c.MeshLambertMaterial),c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,
a.fog=this.fog,a.shading=this.shading,a.shaderID=this.shaderID,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a};c.MeshDoubleLambertMaterial=function(a){c.MeshLambertMaterial.call(this,a);this.shaderID="lambertdouble";this.side=c.DoubleSide};c.MeshDoubleLambertMaterial.prototype=Object.create(c.MeshLambertMaterial.prototype);c.MeshDoubleLambertMaterial.prototype.clone=function(){var a=new c.MeshDoubleLambertMaterial;return c.MeshLambertMaterial.prototype.clone.call(this,
a),a};c.MeshOutlineMaterial=function(a){c.Material.call(this);a=a||{};this.fog=!0;this.shaderID="outline";this.wireframe=!1;this.outlineColor=a.color||new c.Color(0,0,0);this.outlineWidth=a.width||.1;this.outlinePushback=a.pushback||1};c.MeshOutlineMaterial.prototype=Object.create(c.Material.prototype);c.MeshOutlineMaterial.prototype.clone=function(a){return void 0===a&&(a=new c.MeshOutlineMaterial),c.Material.prototype.clone.call(this,a),a.fog=this.fog,a.shaderID=this.shaderID,a.wireframe=this.wireframe,
a};c.ImposterMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.ambient=new c.Color(1048575);this.emissive=new c.Color(0);this.imposter=!0;this.wrapAround=!1;this.wrapRGB=new c.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=c.SmoothShading;this.shaderID=null;this.vertexColors=c.NoColors;
this.skinning=!1;this.setValues(a)};c.ImposterMaterial.prototype=Object.create(c.Material.prototype);c.ImposterMaterial.prototype.clone=function(){var a=new c.ImposterMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,a.reflectivity=this.reflectivity,
a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.shaderID=this.shaderID,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a};c.SphereImposterMaterial=function(a){c.ImposterMaterial.call(this);this.shaderID="sphereimposter";this.setValues(a)};c.SphereImposterMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.SphereImposterMaterial.prototype.clone=function(){var a=new c.SphereImposterMaterial;
return c.ImposterMaterial.prototype.clone.call(this,a),a};c.SphereImposterOutlineMaterial=function(a){c.ImposterMaterial.call(this);a=a||{};this.shaderID="sphereimposteroutline";this.outlineColor=a.color||new c.Color(0,0,0);this.outlineWidth=a.width||.1;this.outlinePushback=a.pushback||1;this.setValues(a)};c.SphereImposterOutlineMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.SphereImposterOutlineMaterial.prototype.clone=function(){var a=new c.SphereImposterOutlineMaterial;return c.ImposterMaterial.prototype.clone.call(this,
a),a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.outlinePushback=this.outlinePushback,a};c.StickImposterMaterial=function(a){c.ImposterMaterial.call(this);this.shaderID="stickimposter";this.setValues(a)};c.StickImposterMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.StickImposterMaterial.prototype.clone=function(){var a=new c.StickImposterMaterial;return c.ImposterMaterial.prototype.clone.call(this,a),a};c.StickImposterOutlineMaterial=function(a){c.ImposterMaterial.call(this);
a=a||{};this.shaderID="stickimposteroutline";this.outlineColor=a.color||new c.Color(0,0,0);this.outlineWidth=a.width||.1;this.outlinePushback=a.pushback||1;this.setValues(a)};c.StickImposterOutlineMaterial.prototype=Object.create(c.ImposterMaterial.prototype);c.StickImposterOutlineMaterial.prototype.clone=function(){var a=new c.StickImposterOutlineMaterial;return c.ImposterMaterial.prototype.clone.call(this,a),a.outlineColor=this.outlineColor,a.outlineWidth=this.outlineWidth,a.outlinePushback=this.outlinePushback,
a};c.InstancedMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.ambient=new c.Color(1048575);this.emissive=new c.Color(0);this.wrapAround=!1;this.wrapRGB=new c.Vector3(1,1,1);this.envMap=this.specularMap=this.lightMap=this.map=null;this.reflectivity=1;this.refractionRatio=.98;this.fog=!0;this.wireframe=!1;this.wireframeLinewidth=1;this.wireframeLinejoin=this.wireframeLinecap="round";this.shading=c.SmoothShading;this.shaderID="instanced";this.vertexColors=c.NoColors;
this.skinning=!1;this.sphere=null;this.setValues(a)};c.InstancedMaterial.prototype=Object.create(c.Material.prototype);c.InstancedMaterial.prototype.clone=function(){var a=new c.InstancedMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.ambient.copy(this.ambient),a.emissive.copy(this.emissive),a.wrapAround=this.wrapAround,a.wrapRGB.copy(this.wrapRGB),a.map=this.map,a.lightMap=this.lightMap,a.specularMap=this.specularMap,a.envMap=this.envMap,a.combine=this.combine,
a.reflectivity=this.reflectivity,a.refractionRatio=this.refractionRatio,a.fog=this.fog,a.shading=this.shading,a.shaderID=this.shaderID,a.vertexColors=this.vertexColors,a.skinning=this.skinning,a.morphTargets=this.morphTargets,a.morphNormals=this.morphNormals,a.sphere=this.sphere,a};c.VolumetricMaterial=function(a){c.Material.call(this);this.transparent=!1;this.volumetric=!0;this.color=new c.Color(16777215);this.map=this.transferfn=null;this.volumetric=!0;this.extent=[];this.maxdepth=100;this.unit=
0;this.texmatrix=null;this.transfermin=-1;this.transfermax=1;this.subsamples=5;this.shaderID="volumetric";this.side=c.FrontSide;this.setValues(a)};c.VolumetricMaterial.prototype=Object.create(c.Material.prototype);c.VolumetricMaterial.prototype.clone=function(){var a=Object.assign(new c.VolumetricMaterial,this);return c.Material.prototype.clone.call(this,a),a};c.SpriteMaterial=function(a){c.Material.call(this);this.color=new c.Color(16777215);this.map=new c.Texture;this.useScreenCoordinates=!0;this.depthTest=
!this.useScreenCoordinates;this.sizeAttenuation=!this.useScreenCoordinates;this.scaleByViewPort=!this.sizeAttenuation;this.alignment=c.SpriteAlignment.center.clone();this.fog=!1;this.uvOffset=new c.Vector2(0,0);this.uvScale=new c.Vector2(1,1);this.setValues(a);void 0===(a=a||{}).depthTest&&(this.depthTest=!this.useScreenCoordinates);void 0===a.sizeAttenuation&&(this.sizeAttenuation=!this.useScreenCoordinates);void 0===a.scaleByViewPort&&(this.scaleByViewPort=!this.sizeAttenuation)};c.SpriteMaterial.prototype=
Object.create(c.Material.prototype);c.SpriteMaterial.prototype.clone=function(){var a=new c.SpriteMaterial;return c.Material.prototype.clone.call(this,a),a.color.copy(this.color),a.map=this.map,a.useScreenCoordinates=this.useScreenCoordinates,a.sizeAttenuation=this.sizeAttenuation,a.scaleByViewport=this.scaleByViewPort,a.alignment.copy(this.alignment),a.uvOffset.copy(this.uvOffset),a};c.SpriteAlignment={};c.SpriteAlignment.topLeft=new c.Vector2(1,-1);c.SpriteAlignment.topCenter=new c.Vector2(0,-1);
c.SpriteAlignment.topRight=new c.Vector2(-1,-1);c.SpriteAlignment.centerLeft=new c.Vector2(1,0);c.SpriteAlignment.center=new c.Vector2(0,0);c.SpriteAlignment.centerRight=new c.Vector2(-1,0);c.SpriteAlignment.bottomLeft=new c.Vector2(1,1);c.SpriteAlignment.bottomCenter=new c.Vector2(0,1);c.SpriteAlignment.bottomRight=new c.Vector2(-1,1);c.Texture=function(a,d){c.EventDispatcher.call(this);this.id=c.TextureIdCount++;this.name="";this.image=a;this.mapping=new c.UVMapping;this.wrapT=this.wrapS=c.ClampToEdgeWrapping;
this.anisotropy=1;d?(this.format=c.RFormat,this.type=c.FloatType,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.magFilter=c.NearestFilter,this.minFilter=c.NearestFilter):(this.format=c.RGBAFormat,this.type=c.UnsignedByteType,this.offset=new c.Vector2(0,0),this.repeat=new c.Vector2(1,1),this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.magFilter=c.LinearFilter,this.minFilter=c.LinearMipMapLinearFilter);this.needsUpdate=!1;this.onUpdate=null};c.Texture.prototype=
{constructor:c.Texture,clone:function(a){return void 0===a&&(a=new c.Texture),a.image=this.image,a.mapping=this.mapping,a.wrapS=this.wrapS,a.wrapT=this.wrapT,a.magFilter=this.magFilter,a.minFilter=this.minFilter,a.anisotropy=this.anisotropy,a.format=this.format,a.type=this.type,a.offset.copy(this.offset),a.repeat.copy(this.repeat),a.premultiplyAlpha=this.premultiplyAlpha,a.flipY=this.flipY,a.unpackAlignment=this.unpackAlignment,a},dispose:function(){this.dispatchEvent({type:"dispose"})}};c.TextureIdCount=
0;c.FrontSide=0;c.BackSide=1;c.DoubleSide=2;c.NoShading=0;c.FlatShading=1;c.SmoothShading=2;c.NoColors=0;c.FaceColors=1;c.VertexColors=2;c.MultiplyOperation=0;c.MixOperation=1;c.AddOperation=2;c.UVMapping=function(){};c.ClampToEdgeWrapping=1001;c.LinearFilter=1006;c.NearestFilter=1007;c.LinearMipMapLinearFilter=1008;c.UnsignedByteType=1009;c.FloatType=1010;c.RGBAFormat=1021;c.RFormat=1022;c.R32Format=1023;c.Line=function(a,d,h){c.Object3D.call(this);this.geometry=a;this.material=void 0!==d?d:new c.LineBasicMaterial({color:16777215*
Math.random()});this.type=void 0!==h?h:c.LineStrip};c.LineStrip=0;c.LinePieces=1;c.Line.prototype=Object.create(c.Object3D.prototype);c.Line.prototype.clone=function(a){return void 0===a&&(a=new c.Line(this.geometry,this.material,this.type)),c.Object3D.prototype.clone.call(this,a),a};c.Mesh=function(a,d){c.Object3D.call(this);this.geometry=a;this.material=void 0!==d?d:new c.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0})};c.Mesh.prototype=Object.create(c.Object3D.prototype);c.Mesh.prototype.clone=
function(a){return void 0===a&&(a=new c.Mesh(this.geometry,this.material)),c.Object3D.prototype.clone.call(this,a),a};c.Sprite=function(a){c.Object3D.call(this);this.material=void 0!==a?a:new c.SpriteMaterial;this.rotation3d=this.rotation;this.rotation=0};c.Sprite.prototype=Object.create(c.Object3D.prototype);c.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position);this.rotation3d.set(0,0,this.rotation);this.matrix.setRotationFromEuler(this.rotation3d);1===this.scale.x&&1===
this.scale.y||this.matrix.scale(this.scale);this.matrixWorldNeedsUpdate=!0};c.Sprite.prototype.clone=function(a){return void 0===a&&(a=new c.Sprite(this.material)),c.Object3D.prototype.clone.call(this,a),a};c.Renderer=function(a){function d(ka){fa[ka]||(m.enableVertexAttribArray(ka),fa[ka]=!0)}function h(ka){ka!==z&&(m.lineWidth(ka),z=ka)}function q(ka,t){var Ia;return 1==H||t.startsWith("#version")||(t=t.replace(/gl_FragDepthEXT/g,"gl_FragDepth"),t="#version 300 es\n"+(t=(t=(t=(t=(t="fragment"==
ka?t.replace(/varying/g,"in"):t.replace(/varying/g,"out")).replace(/attribute/g,"in")).replace(/texture2D/g,"texture")).replace(/\/\/DEFINEFRAGCOLOR/g,"out vec4 glFragColor;")).replace(/gl_FragColor/g,"glFragColor"))),"fragment"===ka?Ia=m.createShader(m.FRAGMENT_SHADER):"vertex"===ka&&(Ia=m.createShader(m.VERTEX_SHADER)),m.shaderSource(Ia,t),m.compileShader(Ia),m.getShaderParameter(Ia,m.COMPILE_STATUS)?Ia:(console.error(m.getShaderInfoLog(Ia)),console.error("could not initialize shader"),null)}function x(ka,
t,Ia,Ca){var Ra;var jb=[];for(Ua in jb.push(ka),jb.push(t),Ca)jb.push(Ua),jb.push(Ca[Ua]);jb=jb.join();var Ua=0;for(Ra=N.length;Ua<Ra;Ua++){var gb=N[Ua];if(gb.code===jb)return gb.usedTimes++,gb.program}if(1==H&&Ca.volumetric)throw Error("Volumetric rendering requires webgl2 which is not supported by your hardware.");Ua=m.createProgram();gb="precision "+L+" float;";Ra=[Ca.volumetric?"#version 300 es":"",gb].join("\n");ka=q("fragment",[Ca.volumetric?"#version 300 es":"",Ca.fragdepth&&1==H?"#extension GL_EXT_frag_depth: enable":
"",Ca.wireframe?"#define WIREFRAME 1":"",gb].join("\n")+ka);t=q("vertex",Ra+t);for(Xa in m.attachShader(Ua,t),m.attachShader(Ua,ka),m.linkProgram(Ua),m.getProgramParameter(Ua,m.LINK_STATUS)||console.error("Could not initialize shader"),Ua.uniforms={},Ua.attributes={},t=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix"],Ia)t.push(Xa);for(Ia=0;Ia<t.length;Ia++){var Xa=t[Ia];Ua.uniforms[Xa]=m.getUniformLocation(Ua,Xa)}t="position normal color lineDistance offset radius".split(" ");for(Ia=
0;Ia<t.length;Ia++)Xa=t[Ia],Ua.attributes[Xa]=m.getAttribLocation(Ua,Xa);return Ua.id=Q++,N.push({program:Ua,code:jb,usedTimes:1}),K.info.memory.programs=N.length,Ua}function p(ka,t,Ia,Ca,Ra,jb,Ua){var gb,Xa,Za,Cb,mb,bc,wc;t?(mb=ka.length-1,bc=-1,wc=-1):(mb=0,bc=ka.length,wc=1);for(t=mb;t!==bc;t+=wc)(gb=ka[t]).render&&(Xa=gb.object,Za=gb.buffer,Cb=gb[Ia])&&(Ua&&K.setBlending(!0),K.setDepthTest(Cb.depthTest),K.setDepthWrite(Cb.depthWrite),mb=Cb.polygonOffset,Cb.polygonOffsetFactor,Cb.polygonOffsetUnits,
null!==mb&&(mb?m.enable(m.POLYGON_OFFSET_FILL):m.disable(m.POLYGON_OFFSET_FILL)),mb=Xa._modelViewMatrix.isReflected(),K.setMaterialFaces(Cb,mb),K.renderBuffer(Ca,Ra,jb,Cb,Za,Xa),(J||Cb.outline)&&("sphereimposter"==Cb.shaderID?K.renderBuffer(Ca,Ra,jb,B,Za,Xa):"stickimposter"==Cb.shaderID?K.renderBuffer(Ca,Ra,jb,k,Za,Xa):Cb.wireframe||"basic"===Cb.shaderID||0===Cb.opacity||K.renderBuffer(Ca,Ra,jb,l,Za,Xa)))}function w(ka,t){ka instanceof c.Mesh||ka instanceof c.Line?function(Ia,Ca){for(var Ra=Ia.length-
1;0<=Ra;--Ra)Ia[Ra].object===Ca&&Ia.splice(Ra,1)}(t.__webglObjects,ka):ka instanceof c.Sprite&&function(Ia,Ca){for(var Ra=Ia.length-1;0<=Ra;--Ra)Ia[Ra]===Ca&&Ia.splice(Ra,1)}(t.__webglSprites,ka);ka.__webglActive=!1}function v(ka,t){ka==m.TEXTURE_2D?(m.texParameteri(ka,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),m.texParameteri(ka,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(ka,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(ka,m.TEXTURE_MIN_FILTER,m.LINEAR)):(m.texParameteri(ka,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE),
m.texParameteri(ka,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE),m.texParameteri(ka,m.TEXTURE_WRAP_R,m.CLAMP_TO_EDGE),tc&&dc?(m.texParameteri(ka,m.TEXTURE_MAG_FILTER,m.LINEAR),m.texParameteri(ka,m.TEXTURE_MIN_FILTER,m.LINEAR)):(m.texParameteri(ka,m.TEXTURE_MAG_FILTER,m.NEAREST),m.texParameteri(ka,m.TEXTURE_MIN_FILTER,m.NEAREST)))}function C(ka){return ka===c.UnsignedByteType?m.UNSIGNED_BYTE:ka===c.RGBAFormat?m.RGBA:ka===c.NearestFilter?m.NEAREST:0}a=a||{};this.row=a.row;this.col=a.col;this.rows=a.rows;this.cols=
a.cols;var M=void 0!==a.canvas?a.canvas:document.createElement("canvas"),L=void 0!==a.precision?a.precision:"highp",P=void 0===a.alpha||a.alpha,e=void 0===a.premultipliedAlpha||a.premultipliedAlpha,g=void 0!==a.antialias&&a.antialias,u=void 0===a.stencil||a.stencil,n=void 0!==a.preserveDrawingBuffer&&a.preserveDrawingBuffer,y=void 0!==a.clearColor?new c.Color(a.clearColor):new c.Color(0),D=void 0!==a.clearAlpha?a.clearAlpha:0,l=new c.MeshOutlineMaterial(a.outline),B=new c.SphereImposterOutlineMaterial(a.outline),
k=new c.StickImposterOutlineMaterial(a.outline),J=!!a.outline;this.domElement=M;this.context=null;this.devicePixelRatio=1;M.id=a.id;this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0;this.renderPluginsPost=[];this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var m,K=this,N=[],Q=0,H=1,V=null,W=-1,ha=null,U=null,S=0,ba=-1,Y=-1,aa=-1,ia=-1,z=null,G=0,F=0,R=0,T=
0,fa={},Z=new c.Matrix4,qa=new c.Vector3,na=new c.Matrix4,ta=new c.Matrix4,pa=new c.Matrix4,Fa=new c.Vector3,Ga=!0,Ha=[],Ja=[],Na=null,hb=null,Xb=null,Pb=null,Lb=null,xb=null;!function(){try{if(!(m=M.getContext("webgl2",{alpha:P,premultipliedAlpha:e,antialias:g,stencil:u,preserveDrawingBuffer:n}))&&!(m=M.getContext("experimental-webgl",{alpha:P,premultipliedAlpha:e,antialias:g,stencil:u,preserveDrawingBuffer:n}))&&!(m=M.getContext("webgl",{alpha:P,premultipliedAlpha:e,antialias:g,stencil:u,preserveDrawingBuffer:n})))throw"Error creating WebGL context.";
var ka=m.getParameter(m.VERSION);H=parseInt(ka[6])}catch(t){console.error(t)}}();m.clearColor(0,0,0,1);m.clearDepth(1);m.clearStencil(0);m.enable(m.DEPTH_TEST);m.depthFunc(m.LEQUAL);m.frontFace(m.CCW);m.cullFace(m.BACK);m.enable(m.CULL_FACE);m.enable(m.BLEND);m.blendEquation(m.FUNC_ADD);m.blendFunc(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA);m.clearColor(y.r,y.g,y.b,D);this.context=m;var Kb=m.getExtension("ANGLE_instanced_arrays"),qb=m.getExtension("EXT_frag_depth"),dc=m.getExtension("OES_texture_float_linear"),
tc=m.getExtension("EXT_color_buffer_float");this.supportedExtensions=function(){return{supportsAIA:!!Kb,supportsImposters:!!qb||1!=H}};this.getContext=function(){return m};this.getPrecision=function(){return L};this.setClearColorHex=function(ka,t){y.setHex(ka);D=t;m.clearColor(y.r,y.g,y.b,D)};this.enableOutline=function(ka){l=new c.MeshOutlineMaterial(ka);B=new c.SphereImposterOutlineMaterial(ka);k=new c.StickImposterOutlineMaterial(ka);J=!0};this.disableOutline=function(){J=!1};this.setViewport=
function(){if(null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var ka=M.width/this.cols,t=M.height/this.rows;G=ka;F=t;m.enable(m.SCISSOR_TEST);m.scissor(ka*this.col,t*this.row,ka,t);m.viewport(ka*this.col,t*this.row,ka,t)}};this.setSize=function(ka,t){if(this.devicePixelRatio=void 0!==window.devicePixelRatio?window.devicePixelRatio:1,g&&2>this.devicePixelRatio&&(this.devicePixelRatio*=2),null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col){var Ia=ka/this.cols,Ca=t/this.rows;
M.width=ka*this.devicePixelRatio;M.height=t*this.devicePixelRatio;G=Ia*this.devicePixelRatio;F=Ca*this.devicePixelRatio;M.style.width=ka+"px";M.style.height=t+"px";this.setViewport()}else G=M.width=ka*this.devicePixelRatio,F=M.height=t*this.devicePixelRatio,M.style.width=ka+"px",M.style.height=t+"px",m.viewport(0,0,m.drawingBufferWidth,m.drawingBufferHeight);this.initFrameBuffer()};this.clear=function(ka,t,Ia){var Ca=0;(void 0===ka||ka)&&(Ca|=m.COLOR_BUFFER_BIT);(void 0===t||t)&&(Ca|=m.DEPTH_BUFFER_BIT);
(void 0===Ia||Ia)&&(Ca|=m.STENCIL_BUFFER_BIT);m.clear(Ca)};this.clearTarget=function(ka,t,Ia){this.clear(ka,t,Ia)};this.setMaterialFaces=function(ka,t){var Ia=ka.side===c.DoubleSide,Ca=ka.side===c.BackSide;ka.imposter||(Ca=t?!Ca:Ca);ba!==Ia&&(Ia?m.disable(m.CULL_FACE):m.enable(m.CULL_FACE),ba=Ia);Y!==Ca&&(Ca?m.frontFace(m.CW):m.frontFace(m.CCW),Y=Ca);m.cullFace(m.BACK)};this.setDepthTest=function(ka){aa!==ka&&(ka?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST),aa=ka)};this.setDepthWrite=function(ka){ia!==
ka&&(m.depthMask(ka),ia=ka)};this.setBlending=function(ka){ka?(m.enable(m.BLEND),m.blendEquationSeparate(m.FUNC_ADD,m.FUNC_ADD),m.blendFuncSeparate(m.SRC_ALPHA,m.ONE_MINUS_SRC_ALPHA,m.ONE,m.ONE_MINUS_SRC_ALPHA)):m.disable(m.BLEND)};this.addPostPlugin=function(ka){ka.init(this);this.renderPluginsPost.push(ka)};var ab=function(ka){var t=ka.program;if(void 0!==t){var Ia,Ca;ka.program=void 0;var Ra=!1;ka=0;for(Ia=N.length;ka<Ia;ka++)if((Ca=N[ka]).program===t){Ca.usedTimes--;0===Ca.usedTimes&&(Ra=!0);
break}if(!0===Ra){Ra=[];ka=0;for(Ia=N.length;ka<Ia;ka++)(Ca=N[ka]).program!==t&&Ra.push(Ca);N=Ra;m.deleteProgram(t);K.info.memory.programs--}}},Va=function(ka){ka=ka.target;ka.removeEventListener("dispose",Va);if(ka.__webglInit=void 0,void 0!==ka.__webglVertexBuffer&&m.deleteBuffer(ka.__webglVertexBuffer),void 0!==ka.__webglColorBuffer&&m.deleteBuffer(ka.__webglColorBuffer),void 0!==ka.geometryGroups)for(var t=0,Ia=ka.groups;t<Ia;t++){var Ca=ka.geometryGroups[t];void 0!==Ca.__webglVertexBuffer&&m.deleteBuffer(Ca.__webglVertexBuffer);
void 0!==Ca.__webglColorBuffer&&m.deleteBuffer(Ca.__webglColorBuffer);void 0!==Ca.__webglNormalBuffer&&m.deleteBuffer(Ca.__webglNormalBuffer);void 0!==Ca.__webglFaceBuffer&&m.deleteBuffer(Ca.__webglFaceBuffer);void 0!==Ca.__webglLineBuffer&&m.deleteBuffer(Ca.__webglLineBuffer)}K.info.memory.geometries--},ob=function(ka){ka=ka.target;ka.removeEventListener("dispose",ob);ka.image&&ka.image.__webglTextureCube?m.deleteTexture(ka.image.__webglTextureCube):ka.__webglInit&&(ka.__webglInit=!1,m.deleteTexture(ka.__webglTexture));
K.info.memory.textures--},fb=function(ka){ka=ka.target;ka.removeEventListener("dispose",fb);ab(ka)};this.initMaterial=function(ka){var t;if(ka.addEventListener("dispose",fb),t=ka.shaderID)t=c.ShaderLib[t],ka.vertexShader=t.vertexShader,ka.fragmentShader=t.fragmentShader,ka.uniforms=c.ShaderUtils.clone(t.uniforms);ka.program=x(ka.fragmentShader,ka.vertexShader,ka.uniforms,{wireframe:ka.wireframe,fragdepth:ka.imposter,volumetric:ka.volumetric})};this.renderBuffer=function(ka,t,Ia,Ca,Ra,jb){if(Ca.visible){ka=
(Ia=function(Xa,Za,Cb,mb,bc,wc){mb.needsUpdate&&(mb.program&&ab(mb),K.initMaterial(mb,Za,Cb,bc),mb.needsUpdate=!1);var Hb=!1,Gb=mb.program,tb=Gb.uniforms,zb=mb.uniforms;if(Gb!=V&&(m.useProgram(Gb),V=Gb,Hb=!0),mb.id!=W&&(W=mb.id,Hb=!0),Xa!=U&&(U=Xa,Hb=!0),m.uniformMatrix4fv(tb.projectionMatrix,!1,Xa.projectionMatrix.elements),m.uniformMatrix4fv(tb.modelViewMatrix,!1,bc._modelViewMatrix.elements),m.uniformMatrix3fv(tb.normalMatrix,!1,bc._normalMatrix.elements),Hb)(zb.fogColor.value=Cb.color,zb.fogNear.value=
Cb.near,zb.fogFar.value=Cb.far,mb.shaderID.startsWith("lambert")||"instanced"===mb.shaderID||mb.shaderID.endsWith("imposter"))?(m.uniformMatrix4fv(tb.viewMatrix,!1,Xa.matrixWorldInverse.elements),Ga&&(function(Qa,Ab){var jc,Zb,cc,r,E=0,ea=0;Qa=0;for(jc=Ab.length;Qa<jc;Qa++)(cc=(Zb=Ab[Qa]).color,r=Zb.intensity,Zb.distance,Zb instanceof c.Light)&&(Fa.getPositionFromMatrix(Zb.matrixWorld),qa.getPositionFromMatrix(Zb.target.matrixWorld),Fa.sub(qa),Fa.normalize(),0!==Fa.x||0!==Fa.y||0!==Fa.z)&&(Ja[ea]=
Fa.x,Ja[ea+1]=Fa.y,Ja[ea+2]=Fa.z,Ha[ea]=cc.r*r,Ha[ea+1]=cc.g*r,Ha[ea+2]=cc.b*r,ea+=3,E++)}(0,Za),Ga=!1),zb.directionalLightColor.value=Ha,zb.directionalLightDirection.value=Ja):mb.shaderID.endsWith("outline")?(zb.outlineColor.value=mb.outlineColor,zb.outlineWidth.value=mb.outlineWidth,zb.outlinePushback.value=mb.outlinePushback):"sphereimposter"===mb.shaderID?(m.uniformMatrix4fv(tb.viewMatrix,!1,Xa.matrixWorldInverse.elements),zb.directionalLightColor.value=Ha,zb.directionalLightDirection.value=Ja):
"volumetric"===mb.shaderID&&(bc._modelViewMatrix.getScale(Fa),na.getInverse(bc._modelViewMatrix),ta.getInverse(Xa.projectionMatrix),pa.multiplyMatrices(bc.material.texmatrix,na),m.uniformMatrix4fv(tb.textmat,!1,pa.elements),m.uniformMatrix4fv(tb.projinv,!1,ta.elements),Xa=Math.min(Math.min(Fa.x,Fa.y),Fa.z),zb.step.value=bc.material.unit*Xa,zb.maxdepth.value=bc.material.maxdepth*Xa,zb.transfermax.value=bc.material.transfermax,zb.transfermin.value=bc.material.transfermin,zb.subsamples.value=bc.material.subsamples,
wc.setTexture(bc.material.transferfn,4,!1),wc.setTexture(bc.material.map,3,!0),m.activeTexture(m.TEXTURE5),m.bindTexture(m.TEXTURE_2D,xb)),zb.opacity.value=mb.opacity,function(Qa,Ab){var jc,Zb,cc,r;for(jc in Ab)Qa[jc]&&(Zb=Ab[jc].type,cc=Ab[jc].value,r=Qa[jc],"f"===Zb?m.uniform1f(r,cc):"i"===Zb?m.uniform1i(r,cc):"fv"===Zb?m.uniform3fv(r,cc):"c"===Zb?m.uniform3f(r,cc.r,cc.g,cc.b):"f4"===Zb&&m.uniform4f(r,cc[0],cc[1],cc[2],cc[3]))}(tb,zb);return Gb}(ka,t,Ia,Ca,jb,this)).attributes;var Ua;t=!1;Ia=16777215*
Ra.id+2*Ia.id+(Ca.wireframe?1:0);if(Ia!==ha&&(ha=Ia,t=!0),t&&(function(){for(let Xa in fa)fa[Xa]&&(m.disableVertexAttribArray(Xa),fa[Xa]=!1)}(),0<=ka.position&&(m.bindBuffer(m.ARRAY_BUFFER,Ra.__webglVertexBuffer),d(ka.position),m.vertexAttribPointer(ka.position,3,m.FLOAT,!1,0,0)),0<=ka.color&&(m.bindBuffer(m.ARRAY_BUFFER,Ra.__webglColorBuffer),d(ka.color),m.vertexAttribPointer(ka.color,3,m.FLOAT,!1,0,0)),0<=ka.normal&&(m.bindBuffer(m.ARRAY_BUFFER,Ra.__webglNormalBuffer),d(ka.normal),m.vertexAttribPointer(ka.normal,
3,m.FLOAT,!1,0,0)),0<=ka.offset&&(m.bindBuffer(m.ARRAY_BUFFER,Ra.__webglOffsetBuffer),d(ka.offset),m.vertexAttribPointer(ka.offset,3,m.FLOAT,!1,0,0)),0<=ka.radius&&(m.bindBuffer(m.ARRAY_BUFFER,Ra.__webglRadiusBuffer),d(ka.radius),m.vertexAttribPointer(ka.radius,1,m.FLOAT,!1,0,0))),jb instanceof c.Mesh){if("instanced"===Ca.shaderID){Ca=Ca.sphere.geometryGroups[0];t&&(m.bindBuffer(m.ARRAY_BUFFER,Ra.__webglVertexBuffer),m.bufferData(m.ARRAY_BUFFER,Ca.vertexArray,m.STATIC_DRAW),m.bindBuffer(m.ARRAY_BUFFER,
Ra.__webglNormalBuffer),m.bufferData(m.ARRAY_BUFFER,Ca.normalArray,m.STATIC_DRAW),m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,Ra.__webglFaceBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Ca.faceArray,m.STATIC_DRAW));var gb=Ca.faceidx;Kb.vertexAttribDivisorANGLE(ka.offset,1);Kb.vertexAttribDivisorANGLE(ka.radius,1);Kb.vertexAttribDivisorANGLE(ka.color,1);Kb.drawElementsInstancedANGLE(m.TRIANGLES,gb,m.UNSIGNED_SHORT,0,Ra.radiusArray.length);Kb.vertexAttribDivisorANGLE(ka.offset,0);Kb.vertexAttribDivisorANGLE(ka.radius,
0);Kb.vertexAttribDivisorANGLE(ka.color,0)}else Ca.wireframe?(Ua=Ra.lineidx,h(Ca.wireframeLinewidth),t&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,Ra.__webglLineBuffer),m.drawElements(m.LINES,Ua,m.UNSIGNED_SHORT,0)):(gb=Ra.faceidx,t&&m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,Ra.__webglFaceBuffer),m.drawElements(m.TRIANGLES,gb,m.UNSIGNED_SHORT,0));K.info.render.calls++;K.info.render.vertices+=gb;K.info.render.faces+=gb/3}else jb instanceof c.Line&&(Ua=Ra.vertices,h(Ca.linewidth),m.drawArrays(m.LINES,0,Ua),K.info.render.calls++)}};
this.render=function(ka,t,Ia){if(0!=t instanceof c.Camera){var Ca,Ra,jb,Ua=ka.__lights,gb=ka.fog;W=-1;Ga=!0;this.autoUpdateScene&&ka.updateMatrixWorld();void 0===t.parent&&t.updateMatrixWorld();t.matrixWorldInverse.getInverse(t.matrixWorld);Z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse);this.autoUpdateObjects&&this.initWebGLObjects(ka);K.info.render.calls=0;K.info.render.vertices=0;K.info.render.faces=0;K.info.render.points=0;R=G;T=F;this.setViewport();this.setFrameBuffer();(this.autoClear||
Ia)&&(m.clearColor(y.r,y.g,y.b,D),this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil));Ia=!1;var Xa=0;for(Ca=(jb=ka.__webglObjects).length;Xa<Ca;Xa++){var Za=(Ra=jb[Xa]).object;Ra.render=!1;if(Za.visible){Za._modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,Za.matrixWorld);Za._normalMatrix.getInverse(Za._modelViewMatrix);Za._normalMatrix.transpose();Za=Ra;var Cb=Za.object.material;Cb.volumetric?(Za.opaque=null,Za.transparent=null,Za.volumetric=Cb):Cb.transparent?(Za.opaque=
null,Za.volumetric=null,Za.transparent=Cb,Cb.wireframe)||(Cb=Cb.clone(),Cb.opacity=0,Za.blank=Cb):(Za.opaque=Cb,Za.transparent=null,Za.volumetric=null);Ra.render=!0;Ra.volumetric&&(Ia=!0)}}this.setBlending(!1);p(ka.__webglObjects,!0,"opaque",t,Ua,gb,!1);Xa=this.renderPluginsPost;if(ha=-1,V=null,U=null,ia=-1,aa=-1,ba=-1,W=-1,Y=-1,Xa.length)for(Ca=0,Ra=Xa.length;Ca<Ra;Ca++)Ga=!0,Xa[Ca].render(ka,t,R,T),ha=-1,U=V=null,Y=W=ba=aa=ia=-1;p(ka.__webglObjects,!0,"blank",t,Ua,gb,!0);p(ka.__webglObjects,!1,
"transparent",t,Ua,gb,!0);Ia&&Pb&&(this.reinitFrameBuffer(),p(ka.__webglObjects,!1,"volumetric",t,Ua,gb,!0));this.renderFrameBuffertoScreen();this.setDepthTest(!0);this.setDepthWrite(!0)}else console.error("$3Dmol.Renderer.render: camera is not an instance of $3Dmol.Camera.")};this.reinitFrameBuffer=function(){1==H||(Pb=m.createFramebuffer(),m.bindFramebuffer(m.FRAMEBUFFER,Pb),m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,Lb,0))};this.setFrameBuffer=function(){if(1!=H&&Pb){var ka=
G,t=F;m.enable(m.SCISSOR_TEST);m.scissor(0,0,ka,t);m.viewport(0,0,ka,t);m.bindTexture(m.TEXTURE_2D,Lb);m.texImage2D(m.TEXTURE_2D,0,m.RGBA,ka,t,0,m.RGBA,m.UNSIGNED_BYTE,null);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.LINEAR);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.LINEAR);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.bindTexture(m.TEXTURE_2D,xb);m.texImage2D(m.TEXTURE_2D,0,m.DEPTH_COMPONENT32F,ka,
t,0,m.DEPTH_COMPONENT,m.FLOAT,null);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,m.NEAREST);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,m.CLAMP_TO_EDGE);m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,m.CLAMP_TO_EDGE);m.bindFramebuffer(m.FRAMEBUFFER,Pb);m.framebufferTexture2D(m.FRAMEBUFFER,m.COLOR_ATTACHMENT0,m.TEXTURE_2D,Lb,0);m.framebufferTexture2D(m.FRAMEBUFFER,m.DEPTH_ATTACHMENT,m.TEXTURE_2D,xb,0)}};this.initFrameBuffer=function(){if(1!=
H){var ka=G,t=F;m.enable(m.SCISSOR_TEST);m.scissor(0,0,ka,t);m.viewport(0,0,ka,t);Lb=m.createTexture();xb=m.createTexture();Pb=m.createFramebuffer();ka=c.ShaderLib.screen;Na=x(ka.fragmentShader,ka.vertexShader,ka.uniforms,{});hb=m.getAttribLocation(Na,"vertexPosition");Xb=m.createBuffer();m.bindBuffer(m.ARRAY_BUFFER,Xb);m.bufferData(m.ARRAY_BUFFER,new Float32Array([1,1,-1,1,-1,-1,-1,-1,1,-1,1,1]),m.STATIC_DRAW)}};this.renderFrameBuffertoScreen=function(){1==H||null===Pb||(this.setViewport(),m.bindFramebuffer(m.FRAMEBUFFER,
null),m.clear(m.COLOR_BUFFER_BIT|m.DEPTH_BUFFER_BIT),m.frontFace(m.CCW),m.cullFace(m.BACK),m.useProgram(Na),V=Na,this.setDepthTest(-1),this.setDepthWrite(-1),m.bindBuffer(m.ARRAY_BUFFER,Xb),m.enableVertexAttribArray(hb),m.vertexAttribPointer(hb,2,m.FLOAT,!1,0,0),m.activeTexture(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,Lb),m.drawArrays(m.TRIANGLES,0,6))};this.initWebGLObjects=function(ka){if(ka.__webglObjects||(ka.__webglObjects=[],ka.__webglObjectsImmediate=[],ka.__webglSprites=[],ka.__webglFlares=
[]),ka.__objectsAdded.length){for(;ka.__objectsAdded.length;){var t,Ia,Ca=ka.__objectsAdded[0],Ra=ka;if(!Ca.__webglInit&&(Ca.__webglInit=!0,Ca._modelViewMatrix=new c.Matrix4,Ca._normalMatrix=new c.Matrix3,void 0!==Ca.geometry&&void 0===Ca.geometry.__webglInit&&(Ca.geometry.__webglInit=!0,Ca.geometry.addEventListener("dispose",Va)),Ca instanceof c.Mesh||Ca instanceof c.Line)){var jb=Ca.geometry;Ca.material;var Ua=0;for(Ia=jb.geometryGroups.length;Ua<Ia;Ua++)(t=jb.geometryGroups[Ua]).id=S++,t.__webglVertexBuffer||
(Ca instanceof c.Mesh?(t.radiusArray&&(t.__webglRadiusBuffer=m.createBuffer()),t.useOffset&&(t.__webglOffsetBuffer=m.createBuffer()),t.__webglVertexBuffer=m.createBuffer(),t.__webglNormalBuffer=m.createBuffer(),t.__webglColorBuffer=m.createBuffer(),t.__webglFaceBuffer=m.createBuffer(),t.__webglLineBuffer=m.createBuffer(),K.info.memory.geometries++,jb.elementsNeedUpdate=!0,jb.normalsNeedUpdate=!0):Ca instanceof c.Line&&(t.__webglVertexBuffer=m.createBuffer(),t.__webglColorBuffer=m.createBuffer(),K.info.memory.geometries++),
jb.verticesNeedUpdate=!0,jb.colorsNeedUpdate=!0)}if(!Ca.__webglActive){if(Ca instanceof c.Mesh||Ca instanceof c.Line)for(Ua=0,Ia=(jb=Ca.geometry).geometryGroups.length;Ua<Ia;Ua++)t=jb.geometryGroups[Ua],Ra.__webglObjects.push({buffer:t,object:Ca,opaque:null,transparent:null});else Ca instanceof c.Sprite&&Ra.__webglSprites.push(Ca);Ca.__webglActive=!0}ka.__objectsAdded.splice(0,1)}ha=-1}for(;ka.__objectsRemoved.length;)w(ka.__objectsRemoved[0],ka),ka.__objectsRemoved.splice(0,1);jb=0;for(Ia=ka.__webglObjects.length;jb<
Ia;jb++)if(Ca=ka.__webglObjects[jb].object,Ua=Ca.geometry,Ca instanceof c.Mesh||Ca instanceof c.Line){Ca=0;for(Ra=Ua.geometryGroups.length;Ca<Ra;Ca++)if(t=Ua.geometryGroups[Ca],Ua.verticesNeedUpdate||Ua.elementsNeedUpdate||Ua.colorsNeedUpdate||Ua.normalsNeedUpdate){var gb=m.STATIC_DRAW,Xa=t.vertexArray,Za=t.colorArray;if(void 0!==t.__webglOffsetBuffer?(m.bindBuffer(m.ARRAY_BUFFER,t.__webglOffsetBuffer),m.bufferData(m.ARRAY_BUFFER,Xa,gb)):(m.bindBuffer(m.ARRAY_BUFFER,t.__webglVertexBuffer),m.bufferData(m.ARRAY_BUFFER,
Xa,gb)),m.bindBuffer(m.ARRAY_BUFFER,t.__webglColorBuffer),m.bufferData(m.ARRAY_BUFFER,Za,gb),t.normalArray&&void 0!==t.__webglNormalBuffer)Xa=t.normalArray,m.bindBuffer(m.ARRAY_BUFFER,t.__webglNormalBuffer),m.bufferData(m.ARRAY_BUFFER,Xa,gb);if(t.radiusArray&&void 0!==t.__webglRadiusBuffer&&(m.bindBuffer(m.ARRAY_BUFFER,t.__webglRadiusBuffer),m.bufferData(m.ARRAY_BUFFER,t.radiusArray,gb)),t.faceArray&&void 0!==t.__webglFaceBuffer)Xa=t.faceArray,m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,t.__webglFaceBuffer),
m.bufferData(m.ELEMENT_ARRAY_BUFFER,Xa,gb);t.lineArray&&void 0!==t.__webglLineBuffer&&(Xa=t.lineArray,m.bindBuffer(m.ELEMENT_ARRAY_BUFFER,t.__webglLineBuffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,Xa,gb))}Ua.verticesNeedUpdate=!1;Ua.elementsNeedUpdate=!1;Ua.normalsNeedUpdate=!1;Ua.colorsNeedUpdate=!1;Ua.buffersNeedUpdate=!1}};this.getYRatio=function(){return void 0!==this.rows&&void 0!==this.row?this.rows:1};this.getXRatio=function(){return void 0!==this.cols&&void 0!==this.col?this.cols:1};this.getAspect=
function(ka,t){null!=ka&&null!=t||(ka=M.width,t=M.height);var Ia=ka/t;return null!=this.rows&&null!=this.cols&&null!=this.row&&null!=this.col&&(Ia=ka/this.cols/(t/this.rows)),Ia};this.setTexture=function(ka,t,Ia){if(ka.needsUpdate){ka.__webglInit||(ka.__webglInit=!0,ka.addEventListener("dispose",ob),ka.__webglTexture=m.createTexture(),K.info.memory.textures++);m.activeTexture(m.TEXTURE0+t);m.bindTexture(Ia?m.TEXTURE_3D:m.TEXTURE_2D,ka.__webglTexture);m.pixelStorei(m.UNPACK_FLIP_Y_WEBGL,ka.flipY);
m.pixelStorei(m.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ka.premultiplyAlpha);m.pixelStorei(m.UNPACK_ALIGNMENT,ka.unpackAlignment);m.pixelStorei(m.PACK_ALIGNMENT,ka.unpackAlignment);t=C(ka.format);var Ca=C(ka.type);if(Ia)v(m.TEXTURE_3D,ka),m.texImage3D(m.TEXTURE_3D,0,m.R32F,ka.image.size.z,ka.image.size.y,ka.image.size.x,0,m.RED,m.FLOAT,ka.image.data);else{Ia=ka.image;var Ra=Ia.width,jb=Ia.height;void 0===Ra&&(Ra=Ia.length,t==m.RGBA&&(Ra/=4),jb=1);v(m.TEXTURE_2D,ka);1==H?m.texImage2D(m.TEXTURE_2D,0,t,t,Ca,
ka.image):m.texImage2D(m.TEXTURE_2D,0,t,Ra,jb,0,t,Ca,ka.image)}ka.needsUpdate=!1;ka.onUpdate&&ka.onUpdate()}else m.activeTexture(m.TEXTURE0+t),Ia?m.bindTexture(m.TEXTURE_3D,ka.__webglTexture):m.bindTexture(m.TEXTURE_2D,ka.__webglTexture)};this.supportsVolumetric=function(){return 1!=H};this.addPostPlugin(new c.SpritePlugin)};c.Scene=function(){c.Object3D.call(this);this.overrideMaterial=this.fog=null;this.matrixAutoUpdate=!1;this.__objects=[];this.__lights=[];this.__objectsAdded=[];this.__objectsRemoved=
[]};c.Scene.prototype=Object.create(c.Object3D.prototype);c.Scene.prototype.__addObject=function(a){if(a instanceof c.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a),a.target&&void 0===a.target.parent&&this.add(a.target);else if(-1===this.__objects.indexOf(a)){this.__objects.push(a);this.__objectsAdded.push(a);var d=this.__objectsRemoved.indexOf(a);-1!==d&&this.__objectsRemoved.splice(d,1)}for(d=0;d<a.children.length;d++)this.__addObject(a.children[d])};c.Scene.prototype.__removeObject=
function(a){var d;a instanceof c.Light?-1!==(d=this.__lights.indexOf(a))&&this.__lights.splice(d,1):-1!==(d=this.__objects.indexOf(a))&&(this.__objects.splice(d,1),this.__objectsRemoved.push(a),-1!==this.__objectsAdded.indexOf(a)&&this.__objectsAdded.splice(d,1));for(d=0;d<a.children.length;d++)this.__removeObject(a.children[d])};c.Fog=function(a,d,h){this.name="";this.color=new c.Color(a);this.near=void 0!==d?d:1;this.far=void 0!==h?h:1E3};c.Fog.prototype.clone=function(){return new c.Fog(this.color.getHex(),
this.near,this.far)};c.ShaderUtils={clone:function(a){var d,h={};for(d in a){h[d]={};h[d].type=a[d].type;var q=a[d].value;q instanceof c.Color?h[d].value=q.clone():"number"==typeof q?h[d].value=q:q instanceof Array?h[d].value=[]:console.error("Error copying shader uniforms from ShaderLib: unknown type for uniform")}return h},stickimposterFragmentShader:"uniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLight;\nvarying vec3 vColor;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\n//DEFINEFRAGCOLOR\nvoid main() {\n    vec3 color = abs(vColor);\n    vec3 pos = cposition;\n    vec3 p = pos;\n    vec3 v = normalize(pos);\n    vec3 pa = p1;\n    vec3 va = normalize(p2-p1);\n    vec3 tmp1 = v-(dot(v,va)*va);\n    vec3 deltap = p-pa;\n    float A = dot(tmp1,tmp1);\n    if(A == 0.0) discard;\n    vec3 tmp2 = deltap-(dot(deltap,va)*va);\n    float B = 2.0*dot(tmp1, tmp2);\n    float C = dot(tmp2,tmp2)-r*r;\n    float det = (B*B) - (4.0*A*C);\n    if(det < 0.0) discard;\n    float sqrtDet = sqrt(det);\n    float posT = (-B+sqrtDet)/(2.0*A);\n    float negT = (-B-sqrtDet)/(2.0*A);\n    float intersectionT = min(posT,negT);\n    vec3 qi = p+v*intersectionT;\n    float dotp1 = dot(va,qi-p1);\n    float dotp2 = dot(va,qi-p2);\n    vec3 norm;\n    if( dotp1 < 0.0 || dotp2 > 0.0) {\n       vec3 cp;\n       if( dotp1 < 0.0) {        cp = p1;\n       } else {\n          cp = p2;\n       }\n       vec3 diff = p-cp;\n       A = dot(v,v);\n       B = dot(diff,v)*2.0;\n       C = dot(diff,diff)-r*r;\n       det = (B*B) - (4.0*C);\n       if(det < 0.0) discard;\n       sqrtDet = sqrt(det);\n       posT = (-B+sqrtDet)/(2.0);\n       negT = (-B-sqrtDet)/(2.0);\n       float t = min(posT,negT);\n       qi = p+v*t;\n       norm = normalize(qi-cp);\n    } else {\n       norm = normalize(qi-(dotp1*va + p1));\n    }\n    vec4 clipPos = projectionMatrix * vec4(qi, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    float depth = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragDepthEXT = depth;"};
c.ShaderLib={basic:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nattribute vec3 position;\nattribute vec3 color;\nvarying vec3 vColor;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3}}},sphereimposter:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform mat4 projectionMatrix;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform float uDepth;\nuniform vec3 directionalLightColor[ 1 ];\nvarying vec3 vColor;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\n//DEFINEFRAGCOLOR\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    vec3 norm = normalize(vec3(mapping.x,mapping.y,z));\n    float dotProduct = dot( norm, vLight );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 vLight = directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_FragColor = vec4(vLight*vColor, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, gl_FragDepthEXT/gl_FragCoord.w );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying vec3 vColor;\nvarying float rval;\nvarying vec3 vLight;\nvarying vec3 center;\nvoid main() {\n    vColor = color;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec4 adjust = projectionMatrix* vec4(normal,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz );\n    mapping = normal.xy;\n    rval = abs(normal.x);\n    gl_Position = projPosition+adjust;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},lambert:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},instanced:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    gl_FragColor.xyz *= vLightFront;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 offset;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position * radius + offset, 1.0 );\n    vLightFront = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},outline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( outlineColor, 1 );\n}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvoid main() {\n    vec4 norm = modelViewMatrix*vec4(normalize(normal),0.0);\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    mvPosition.xy += norm.xy*outlineWidth;\n    gl_Position = projectionMatrix * mvPosition;\n    mvPosition.z -= outlinePushback;\n    vec4 pushpos = projectionMatrix*mvPosition;\n    gl_Position.z = gl_Position.w*pushpos.z/pushpos.w;\n}",
uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new c.Color(0,0,0)},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},sphereimposteroutline:{fragmentShader:"uniform float opacity;\nuniform vec3 outlineColor;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nuniform mat4 projectionMatrix;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nuniform float outlinePushback;\n//DEFINEFRAGCOLOR\nvoid main() {\n    float lensqr = dot(mapping,mapping);\n    float rsqr = rval*rval;\n    if(lensqr > rsqr)\n       discard;\n    float z = sqrt(rsqr-lensqr);\n    vec3 cameraPos = center+ vec3(mapping.x,mapping.y,z-outlinePushback);\n    vec4 clipPos = projectionMatrix * vec4(cameraPos, 1.0);\n    float ndcDepth = clipPos.z / clipPos.w;\n    gl_FragDepthEXT = ((gl_DepthRange.diff * ndcDepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n    gl_FragColor = vec4(outlineColor, 1 );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec2 mapping;\nvarying float rval;\nvarying vec3 center;\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    center = mvPosition.xyz;\n    vec4 projPosition = projectionMatrix * mvPosition;\n    vec2 norm = normal.xy + vec2(sign(normal.x)*outlineWidth,sign(normal.y)*outlineWidth);\n    vec4 adjust = projectionMatrix* vec4(norm,normal.z,0.0); adjust.z = 0.0; adjust.w = 0.0;\n    mapping = norm.xy;\n    rval = abs(norm.x);\n    gl_Position = projPosition+adjust;\n}",
uniforms:{opacity:{type:"f",value:1},outlineColor:{type:"c",value:new c.Color(0,0,0)},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},stickimposter:{fragmentShader:[c.ShaderUtils.stickimposterFragmentShader,"    float dotProduct = dot( norm, vLight );\n    vec3 light = vec3( max( dotProduct, 0.0 ) );\n    gl_FragColor = vec4(light*color, opacity*opacity );\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}"].join("\n"),
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = color; vColor.z = abs(vColor.z);\n    r = abs(radius);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*radius;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*radius;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vLight = normalize( lDirection.xyz )*directionalLightColor[0];\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},stickimposteroutline:{fragmentShader:c.ShaderUtils.stickimposterFragmentShader+"gl_FragColor = vec4(color,1.0);}",vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nuniform vec3 outlineColor;\nuniform float outlineWidth;\nuniform float outlinePushback;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nattribute float radius;\nvarying vec3 vColor;\nvarying vec3 vLight;\nvarying vec3 cposition;\nvarying vec3 p1;\nvarying vec3 p2;\nvarying float r;\nvoid main() {\n    vColor = outlineColor;\n    float rad = radius+sign(radius)*outlineWidth;\n    r = abs(rad);\n    vec4 to = modelViewMatrix*vec4(normal, 1.0);\n    vec4 pt = modelViewMatrix*vec4(position, 1.0);\n    to.xyz += normalize(to.xyz)*outlinePushback;\n    pt.xyz += normalize(pt.xyz)*outlinePushback;\n    vec4 mvPosition = pt;\n    p1 = pt.xyz; p2 = to.xyz;\n    vec3 norm = to.xyz-pt.xyz;\n    float mult = 1.1;\n    if(length(p1) > length(p2)) {\n       mvPosition = to;\n    }\n    vec3 n = normalize(mvPosition.xyz);\n    if(color.z >= 0.0) {\n       vec3 pnorm = normalize(p1);\n       float t = dot(mvPosition.xyz-p1,n)/dot(pnorm,n);\n       mvPosition.xyz = p1+t*pnorm;\n    } else {\n       vec3 pnorm = normalize(p2);\n       float t = dot(mvPosition.xyz-p2,n)/dot(pnorm,n);\n       mvPosition.xyz = p2+t*pnorm;\n       mult *= -1.0;\n    }\n    vec3 cr = normalize(cross(mvPosition.xyz,norm))*rad;\n    vec3 doublecr = normalize(cross(mvPosition.xyz,cr))*rad;\n    mvPosition.xy +=  mult*(cr + doublecr).xy;\n    cposition = mvPosition.xyz;\n    gl_Position = projectionMatrix * mvPosition;\n    vLight = vec3(1.0,1.0,1.0);\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},outlineColor:{type:"c",value:new c.Color(0,0,0)},outlineWidth:{type:"f",value:.1},outlinePushback:{type:"f",value:1}}},lambertdouble:{fragmentShader:"uniform mat4 viewMatrix;\nuniform float opacity;\nuniform vec3 fogColor;\nuniform float fogNear;\nuniform float fogFar;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvarying vec3 vColor;\n//DEFINEFRAGCOLOR\nvoid main() {\n    gl_FragColor = vec4( vec3 ( 1.0 ), opacity );\n    #ifndef WIREFRAME\n    if ( gl_FrontFacing )\n       gl_FragColor.xyz *= vLightFront;\n    else\n       gl_FragColor.xyz *= vLightBack;\n    #endif\n    gl_FragColor = gl_FragColor * vec4( vColor, opacity );\n    float depth = gl_FragCoord.z / gl_FragCoord.w;\n    float fogFactor = smoothstep( fogNear, fogFar, depth );\n    gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 directionalLightColor[ 1 ];\nuniform vec3 directionalLightDirection[ 1 ];\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec3 color;\nvarying vec3 vColor;\nvarying vec3 vLightFront;\nvarying vec3 vLightBack;\nvoid main() {\n    vColor = color;\n    vec3 objectNormal = normal;\n    vec3 transformedNormal = normalMatrix * objectNormal;\n    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    vLightFront = vec3( 0.0 );\n    vLightBack = vec3( 0.0 );\n    transformedNormal = normalize( transformedNormal );\n    vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ 0 ], 0.0 );\n    vec3 dirVector = normalize( lDirection.xyz );\n    float dotProduct = dot( transformedNormal, dirVector );\n    vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n    vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n    vLightFront += directionalLightColor[ 0 ] * directionalLightWeighting;\n    vLightBack += directionalLightColor[ 0 ] * directionalLightWeightingBack;\n    gl_Position = projectionMatrix * mvPosition;\n}",
uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},directionalLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]}}},sprite:{fragmentShader:"uniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\n//DEFINEFRAGCOLOR\nvoid main() {\n    vec4 texture = texture2D(map, vUV);\n    if (texture.a < alphaTest) discard;\n    gl_FragColor = vec4(color * texture.xyz, texture.a * opacity);\n    if (fogType > 0) {\n        float depth = gl_FragCoord.z / gl_FragCoord.w;\n        float fogFactor = 0.0;\n        if (fogType == 1) {\n            fogFactor = smoothstep(fogNear, fogFar, depth);\n        }\n        else {\n            const float LOG2 = 1.442695;\n            float fogFactor = exp2(- fogDensity * fogDensity * depth * depth * LOG2);\n            fogFactor = 1.0 - clamp(fogFactor, 0.0, 1.0);\n        }\n        gl_FragColor = mix(gl_FragColor, vec4(fogColor, gl_FragColor.w), fogFactor);\n    }\n}",
vertexShader:"uniform int useScreenCoordinates;\nuniform vec3 screenPosition;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 scale;\nuniform vec2 alignment;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvoid main() {\n    vUV = uvOffset + uv * uvScale;\n    vec2 alignedPosition = position + alignment;\n    vec2 rotatedPosition;\n    rotatedPosition.x = ( cos(rotation) * alignedPosition.x - sin(rotation) * alignedPosition.y ) * scale.x;\n    rotatedPosition.y = ( sin(rotation) * alignedPosition.x + cos(rotation) * alignedPosition.y ) * scale.y;\n    vec4 finalPosition;\n    if(useScreenCoordinates != 0) {\n        finalPosition = vec4(screenPosition.xy + rotatedPosition, screenPosition.z, 1.0);\n    }\n    else {\n        finalPosition = projectionMatrix * modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0); finalPosition /= finalPosition.w;\n        finalPosition.xy += rotatedPosition; \n    }\n    gl_Position = finalPosition;\n}",
uniforms:{}},volumetric:{fragmentShader:"uniform highp sampler3D data;\nuniform highp sampler2D colormap;\nuniform highp sampler2D depthmap;\nuniform mat4 textmat;\nuniform mat4 projinv;\nuniform mat4 projectionMatrix;\nuniform float step;\nuniform float subsamples;\nuniform float maxdepth;\nuniform float transfermin;\nuniform float transfermax;\nin  vec4 mvPosition;\nout vec4 color;\nvoid main(void) {\n   vec4 pos = mvPosition;\n   bool seengood = false;\n   float i = 0.0;\n   color = vec4(1,1,1,0);\n   float increment = 1.0/subsamples;\n   float maxsteps = (maxdepth*subsamples/step);\n   vec4 maxpos = vec4(pos.x,pos.y,pos.z-maxdepth,1.0);\n   maxpos = projectionMatrix*maxpos;\n   vec4 startp = projectionMatrix*pos;\n   maxpos /= maxpos.w;\n   startp /= startp.w;\n   maxpos = vec4(startp.x,startp.y,maxpos.z,1.0);\n   maxpos = projinv*maxpos;\n   maxpos /= maxpos.w;\n   float incr = step/subsamples;\n   vec2 tpos = startp.xy/2.0+0.5;\n   float depth = texture(depthmap, tpos).r;\n   vec4 direction = maxpos-pos;\n   for( i = 0.0; i <= maxsteps; i++) {\n      vec4 pt = (pos+(i/maxsteps)*direction);\n      vec4 ppt = projectionMatrix*pt;\n      float ptdepth = ppt.z/ppt.w;\n      ptdepth = ((gl_DepthRange.diff * ptdepth) + gl_DepthRange.near + gl_DepthRange.far) / 2.0;\n      if(ptdepth > depth) break;\n      pt = textmat*pt;\n      if(pt.x >= -0.01 && pt.y >= -0.01 && pt.z >= -0.01 && pt.x <= 1.01 && pt.y <= 1.01 && pt.z <= 1.01) {\n         seengood = true;\n      } else if(seengood) {\n         break;\n      }\n      float val = texture(data, pt.zyx).r;\n      if(isinf(val)) continue;\n      float cval = (val-transfermin)/(transfermax-transfermin);\n      vec4 val_color = texture(colormap, vec2(cval,0.5));\n      color.rgb = color.rgb*color.a + (1.0-color.a)*val_color.a*val_color.rgb;\n      color.a += (1.0 - color.a) * val_color.a; \n      if(color.a > 0.0) color.rgb /= color.a;\n    }\n}",
vertexShader:"uniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nin vec3 position;\nout vec4 mvPosition;\nvoid main() {\n    mvPosition = modelViewMatrix * vec4( position, 1.0 );\n    gl_Position = projectionMatrix*mvPosition;\n}",uniforms:{opacity:{type:"f",value:1},fogColor:{type:"c",value:new c.Color(1,1,1)},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2E3},data:{type:"i",value:3},colormap:{type:"i",value:4},depthmap:{type:"i",value:5},step:{type:"f",
value:1},maxdepth:{type:"f",value:100},subsamples:{type:"f",value:5},textmat:{type:"mat4",value:[]},projinv:{type:"mat4",value:[]},transfermin:{type:"f",value:-.2},transfermax:{type:"f",value:.2}}},screen:{fragmentShader:"uniform sampler2D colormap;\nvarying highp vec2 vTexCoords;\nuniform vec2 dimensions;\n//DEFINEFRAGCOLOR\nvoid main (void) {\n   gl_FragColor = texture2D(colormap, vTexCoords);\n}",vertexShader:"attribute vec2 vertexPosition;\nvarying highp vec2 vTexCoords;\nconst vec2 scale = vec2(0.5, 0.5);\nvoid main() {\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\n}",
uniforms:{}},screenaa:{fragmentShader:"uniform sampler2D colormap;\nvarying highp vec2 vTexCoords;\nuniform vec2 dimensions;\n// Basic FXAA implementation based on the code on geeks3d.com \n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\nvec4 applyFXAA(vec2 fragCoord, sampler2D tex)\n{\n    vec4 color;\n    vec2 inverseVP = vec2(1.0 / dimensions.x, 1.0 / dimensions.y);\n    vec3 rgbNW = texture2D(tex, fragCoord + vec2(-1.0, -1.0) * inverseVP).xyz;\n    vec3 rgbNE = texture2D(tex, fragCoord + vec2(1.0, -1.0) * inverseVP).xyz;\n    vec3 rgbSW = texture2D(tex, fragCoord + vec2(-1.0, 1.0) * inverseVP).xyz;\n    vec3 rgbSE = texture2D(tex, fragCoord + vec2(1.0, 1.0) * inverseVP).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * inverseVP).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                        (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n            max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n            dir * rcpDirMin)) * inverseVP;\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord  + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord  + dir * -0.5).xyz +\n        texture2D(tex, fragCoord  + dir * 0.5).xyz);\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n//DEFINEFRAGCOLOR\nvoid main (void) {\n   gl_FragColor = applyFXAA(vTexCoords, colormap);\n}",
vertexShader:"attribute vec2 vertexPosition;\nvarying highp vec2 vTexCoords;\nconst vec2 scale = vec2(0.5, 0.5);\nvoid main() {\n   vTexCoords  = vertexPosition * scale + scale; // scale vertex attribute to [0,1] range\n   gl_Position = vec4(vertexPosition, 0.0, 1.0);\n}",uniforms:{}}};"undefined"==typeof console&&(console={log:function(){}});c.ProteinSurface=function(){var a,d,h=0,q=0,x=0,p=2,w=0,v=0,C=0,M=0,L=null,P=null,e=null,g=0,u=0,n=0,y=0,D=0,l=0,B={H:1.2,Li:1.82,Na:2.27,K:2.75,C:1.7,N:1.55,
O:1.52,F:1.47,P:1.8,S:1.8,CL:1.75,BR:1.85,SE:1.9,ZN:1.39,CU:1.4,NI:1.63,X:2},k={},J={},m=[new Int32Array([1,0,0]),new Int32Array([-1,0,0]),new Int32Array([0,1,0]),new Int32Array([0,-1,0]),new Int32Array([0,0,1]),new Int32Array([0,0,-1]),new Int32Array([1,1,0]),new Int32Array([1,-1,0]),new Int32Array([-1,1,0]),new Int32Array([-1,-1,0]),new Int32Array([1,0,1]),new Int32Array([1,0,-1]),new Int32Array([-1,0,1]),new Int32Array([-1,0,-1]),new Int32Array([0,1,1]),new Int32Array([0,1,-1]),new Int32Array([0,
-1,1]),new Int32Array([0,-1,-1]),new Int32Array([1,1,1]),new Int32Array([1,1,-1]),new Int32Array([1,-1,1]),new Int32Array([-1,1,1]),new Int32Array([1,-1,-1]),new Int32Array([-1,-1,1]),new Int32Array([-1,1,-1]),new Int32Array([-1,-1,-1])];this.getFacesAndVertices=function(N){var Q={};for(let Y=0,aa=N.length;Y<aa;Y++)Q[N[Y]]=!0;N=d;for(let Y=0,aa=N.length;Y<aa;Y++)N[Y].x=N[Y].x/p-h,N[Y].y=N[Y].y/p-q,N[Y].z=N[Y].z/p-x;var H=[];for(let Y=0,aa=a.length;Y<aa;Y+=3){var V=a[Y],W=a[Y+1],ha=a[Y+2],U=N[W].atomid,
S=N[ha].atomid,ba=N[V].atomid;U<ba&&(ba=U);S<ba&&(ba=S);Q[ba]&&V!==W&&W!==ha&&V!==ha&&(H.push(V),H.push(W),H.push(ha))}return L=null,P=null,e=null,{vertices:N,faces:H}};this.initparm=function(N,Q,H){1E6<H&&(p=1);H=1/p*5.5;g=N[0][0];y=N[1][0];u=N[0][1];D=N[1][1];n=N[0][2];l=N[1][2];Q?(g-=1.4+H,u-=1.4+H,n-=1.4+H,y+=1.4+H,D+=1.4+H,l+=1.4+H):(g-=H,u-=H,n-=H,y+=H,D+=H,l+=H);g=Math.floor(g*p)/p;u=Math.floor(u*p)/p;n=Math.floor(n*p)/p;y=Math.ceil(y*p)/p;D=Math.ceil(D*p)/p;l=Math.ceil(l*p)/p;h=-g;q=-u;x=
-n;C=Math.ceil(p*(y-g))+1;v=Math.ceil(p*(D-u))+1;w=Math.ceil(p*(l-n))+1;this.boundingatom(Q);M=1.4*p;L=new Uint8Array(C*v*w);P=new Float64Array(C*v*w);e=new Int32Array(C*v*w)};this.boundingatom=function(N){var Q,H,V=[],W;for(W in B)if(B.hasOwnProperty(W)){var ha=B[W];V[W]=N?(ha+1.4)*p+.5:ha*p+.5;ha=V[W]*V[W];J[W]=Math.floor(V[W])+1;k[W]=new Int32Array(J[W]*J[W]);var U=0;for(let S=0;S<J[W];S++)for(let ba=0;ba<J[W];ba++)(Q=S*S+ba*ba)>ha?k[W][U]=-1:(H=Math.sqrt(ha-Q),k[W][U]=Math.floor(H)),U++}};this.fillvoxels=
function(N,Q){for(let V=0,W=L.length;V<W;V++)L[V]=0,P[V]=-1,e[V]=-1;for(let V in Q){var H=N[Q[V]];void 0!==H&&this.fillAtom(H,N)}for(let V=0,W=L.length;V<W;V++)1&L[V]&&(L[V]|=2)};this.fillAtom=function(N,Q){var H,V,W,ha,U,S,ba,Y,aa,ia,z,G,F;var R=Math.floor(.5+p*(N.x+h));var T=Math.floor(.5+p*(N.y+q));var fa=Math.floor(.5+p*(N.z+x));var Z=N.elem&&void 0!==B[N.elem]?N.elem:"X",qa=0,na=v*w;var ta=0;for(F=J[Z];ta<F;ta++)for(U=0;U<F;U++){if(-1!=k[Z][qa])for(ia=-1;2>ia;ia++)for(z=-1;2>z;z++)for(G=-1;2>
G;G++)if(0!==ia&&0!==z&&0!==G){var pa=ia*ta;var Fa=G*U;for(S=0;S<=k[Z][qa];S++)if(Y=T+(ha=S*z),aa=fa+Fa,!(0>(ba=R+pa)||0>Y||0>aa||ba>=C||Y>=v||aa>=w)){var Ga=ba*na+Y*w+aa;if(1&L[Ga]){var Ha=Q[e[Ga]];Ha.serial!=N.serial&&pa*pa+ha*ha+Fa*Fa<(H=R+pa-Math.floor(.5+p*(Ha.x+h)))*H+(V=T+ha-Math.floor(.5+p*(Ha.y+q)))*V+(W=fa+Fa-Math.floor(.5+p*(Ha.z+x)))*W&&(e[Ga]=N.serial)}else L[Ga]|=1,e[Ga]=N.serial}}qa++}};this.fillvoxelswaals=function(N,Q){for(let H=0,V=L.length;H<V;H++)L[H]&=-3;for(let H in Q){let V=
N[Q[H]];void 0!==V&&this.fillAtomWaals(V,N)}};this.fillAtomWaals=function(N,Q){var H,V,W,ha,U,S,ba,Y,aa,ia,z,G,F,R=0;var T=Math.floor(.5+p*(N.x+h));var fa=Math.floor(.5+p*(N.y+q));var Z=Math.floor(.5+p*(N.z+x));var qa=N.elem&&void 0!==B[N.elem]?N.elem:"X",na=v*w;var ta=0;for(F=J[qa];ta<F;ta++)for(Y=0;Y<F;Y++){if(-1!=k[qa][R])for(ia=-1;2>ia;ia++)for(z=-1;2>z;z++)for(G=-1;2>G;G++)if(0!==ia&&0!==z&&0!==G){var pa=ia*ta;var Fa=G*Y;for(aa=0;aa<=k[qa][R];aa++)if(S=fa+(ha=aa*z),ba=Z+Fa,!(0>(U=T+pa)||0>S||
0>ba||U>=C||S>=v||ba>=w)){var Ga=U*na+S*w+ba;if(2&L[Ga]){var Ha=Q[e[Ga]];Ha.serial!=N.serial&&pa*pa+ha*ha+Fa*Fa<(H=T+pa-Math.floor(.5+p*(Ha.x+h)))*H+(V=fa+ha-Math.floor(.5+p*(Ha.y+q)))*V+(W=Z+Fa-Math.floor(.5+p*(Ha.z+x)))*W&&(e[Ga]=N.serial)}else L[Ga]|=2,e[Ga]=N.serial}}R++}};this.buildboundary=function(){var N=v*w;for(let U=0;U<C;U++)for(let S=0;S<w;S++)for(let ba=0;ba<v;ba++){var Q=U*N+ba*w+S;if(1&L[Q])for(var H=0;26>H;){var V=U+m[H][0],W=S+m[H][2],ha=ba+m[H][1];if(-1<V&&V<C&&-1<ha&&ha<v&&-1<W&&
W<w&&!(1&L[V*N+ha*w+W])){L[Q]|=4;break}H++}}};var K=function(N,Q,H){var V=new Int32Array(N*Q*H*3);this.set=function(W,ha,U,S){W=3*((W*Q+ha)*H+U);V[W]=S.ix;V[W+1]=S.iy;V[W+2]=S.iz};this.get=function(W,ha,U){W=3*((W*Q+ha)*H+U);return{ix:V[W],iy:V[W+1],iz:V[W+2]}}};this.fastdistancemap=function(){var N,Q,H,V,W=new K(C,v,w),ha=v*w,U=M*M,S=[];for(N=0;N<C;N++)for(Q=0;Q<v;Q++)for(H=0;H<w;H++)if(L[V=N*ha+Q*w+H]&=-3,1&L[V]&&4&L[V]){var ba={ix:N,iy:Q,iz:H};W.set(N,Q,H,ba);S.push(ba);P[V]=0;L[V]|=2;L[V]&=-5}do for(H=
this.fastoneshell(S,W),S=[],N=0,Q=H.length;N<Q;N++)V=ha*H[N].ix+w*H[N].iy+H[N].iz,L[V]&=-5,P[V]<=1.0404*U&&S.push({ix:H[N].ix,iy:H[N].iy,iz:H[N].iz});while(0!==S.length);N=p-.5;0>N&&(N=0);U-=.5/(.1+N);for(N=0;N<C;N++)for(Q=0;Q<v;Q++)for(H=0;H<w;H++)L[V=N*ha+Q*w+H]&=-5,1&L[V]&&(2&L[V]&&!(2&L[V]&&P[V]>=U)||(L[V]|=4))};this.fastoneshell=function(N,Q){var H,V,W,ha,U,S,ba,Y=[];if(0===N.length)return Y;var aa=v*w;var ia=0;for(U=N.length;ia<U;ia++){var z=N[ia].ix;var G=N[ia].iy;var F=N[ia].iz;var R=Q.get(z,
G,F);for(ha=0;6>ha;ha++){var T=z+m[ha][0];var fa=G+m[ha][1];var Z=F+m[ha][2];T<C&&-1<T&&fa<v&&-1<fa&&Z<w&&-1<Z&&(ba=T*aa+w*fa+Z,1&L[ba]&&!(2&L[ba])?(Q.set(T,fa,F+m[ha][2],R),S=(H=T-R.ix)*H+(V=fa-R.iy)*V+(W=Z-R.iz)*W,P[ba]=S,L[ba]|=2,L[ba]|=4,Y.push({ix:T,iy:fa,iz:Z})):1&L[ba]&&2&L[ba]&&(S=(H=T-R.ix)*H+(V=fa-R.iy)*V+(W=Z-R.iz)*W)<P[ba]&&(Q.set(T,fa,Z,R),P[ba]=S,4&L[ba]||(L[ba]|=4,Y.push({ix:T,iy:fa,iz:Z}))))}}ia=0;for(U=N.length;ia<U;ia++)for(z=N[ia].ix,G=N[ia].iy,F=N[ia].iz,R=Q.get(z,G,F),ha=6;18>
ha;ha++)T=z+m[ha][0],fa=G+m[ha][1],Z=F+m[ha][2],T<C&&-1<T&&fa<v&&-1<fa&&Z<w&&-1<Z&&(ba=T*aa+w*fa+Z,1&L[ba]&&!(2&L[ba])?(Q.set(T,fa,F+m[ha][2],R),S=(H=T-R.ix)*H+(V=fa-R.iy)*V+(W=Z-R.iz)*W,P[ba]=S,L[ba]|=2,L[ba]|=4,Y.push({ix:T,iy:fa,iz:Z})):1&L[ba]&&2&L[ba]&&(S=(H=T-R.ix)*H+(V=fa-R.iy)*V+(W=Z-R.iz)*W)<P[ba]&&(Q.set(T,fa,Z,R),P[ba]=S,4&L[ba]||(L[ba]|=4,Y.push({ix:T,iy:fa,iz:Z}))));ia=0;for(U=N.length;ia<U;ia++)for(z=N[ia].ix,G=N[ia].iy,F=N[ia].iz,R=Q.get(z,G,F),ha=18;26>ha;ha++)T=z+m[ha][0],fa=G+m[ha][1],
Z=F+m[ha][2],T<C&&-1<T&&fa<v&&-1<fa&&Z<w&&-1<Z&&(ba=T*aa+w*fa+Z,1&L[ba]&&!(2&L[ba])?(Q.set(T,fa,F+m[ha][2],R),S=(H=T-R.ix)*H+(V=fa-R.iy)*V+(W=Z-R.iz)*W,P[ba]=S,L[ba]|=2,L[ba]|=4,Y.push({ix:T,iy:fa,iz:Z})):1&L[ba]&&2&L[ba]&&(S=(H=T-R.ix)*H+(V=fa-R.iy)*V+(W=Z-R.iz)*W)<P[ba]&&(Q.set(T,fa,Z,R),P[ba]=S,4&L[ba]||(L[ba]|=4,Y.push({ix:T,iy:fa,iz:Z}))));return Y};this.marchingcubeinit=function(N){for(var Q=0,H=L.length;Q<H;Q++)1==N?L[Q]&=-5:4==N?(L[Q]&=-3,4&L[Q]&&(L[Q]|=2),L[Q]&=-5):2==N?4&L[Q]&&2&L[Q]?L[Q]&=
-5:4&L[Q]&&!(2&L[Q])&&(L[Q]|=2):3==N&&(L[Q]&=-5)};this.marchingcube=function(N){this.marchingcubeinit(N);d=[];a=[];c.MarchingCube.march(L,d,a,{smooth:1,nX:C,nY:v,nZ:w});N=v*w;for(var Q=0,H=d.length;Q<H;Q++)d[Q].atomid=e[d[Q].x*N+w*d[Q].y+d[Q].z];c.MarchingCube.laplacianSmooth(1,d,a)}};c.autoload=function(a,d){var h,q,x;if(void 0!==bb(".viewer_3Dmoljs")[0]&&(c.autoinit=!0),c.autoinit){a=null!=a?a:null;c.viewers={};var p=0;bb(".viewer_3Dmoljs").each(function(){var w=bb(this),v=[],C=[],M="";"static"==
w.css("position")&&w.css("position","relative");x=null;w.data("pdb")?(v.push("https://files.rcsb.org/view/"+w.data("pdb")+".pdb"),C.push("pdb")):w.data("cid")?(C.push("sdf"),v.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+w.data("cid")+"/SDF?record_type=3d")):(w.data("href")||w.data("url"))&&(M=w.data("href"),v.push(M),x=M.substr(M.lastIndexOf(".")+1),C.push(x));var L=w.data();for(h in L)"pdb"===h.substring(0,3)&&"pdb"!==h?(v.push("https://files.rcsb.org/view/"+L[h]+".pdb"),C.push("pdb")):
"href"===h.substring(0,4)&&"href"!==h?(M=L[h],v.push(M),C.push(M.substr(M.lastIndexOf(".")+1))):"cid"===h.substring(0,3)&&"cid"!==h&&(v.push("https://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/cid/"+L[h]+"/SDF?record_type=3d"),C.push("sdf"));var P={};w.data("options")&&(P=c.specStringToObject(w.data("options")));L=c.CC.color(w.data("backgroundcolor"));var e={line:{}};w.data("style")&&(e=c.specStringToObject(w.data("style")));var g={};w.data("select")&&(g=c.specStringToObject(w.data("select")));var u=
[],n=[],y=[],D={},l=w.data(),B=/style(.+)/,k=/surface(.*)/,J=/labelres(.*)/,m=[];for(q in l)Object.prototype.hasOwnProperty.call(l,q)&&m.push(q);m.sort();for(h=0;h<m.length;h++){q=m[h];var K=B.exec(q),N,Q,H;K&&(N="select"+K[1],Q=c.specStringToObject(l[N]),H=c.specStringToObject(l[q]),u.push([Q,H]));(K=k.exec(q))&&(N="select"+K[1],Q=c.specStringToObject(l[N]),H=c.specStringToObject(l[q]),n.push([Q,H]));(K=J.exec(q))&&(N="select"+K[1],Q=c.specStringToObject(l[N]),H=c.specStringToObject(l[q]),y.push([Q,
H]));"zoomto"==q&&(D=c.specStringToObject(l[q]))}var V=function(S){S.setStyle(g,e);for(h=0;h<u.length;h++){var ba=u[h][0]||{};var Y=u[h][1]||{line:{}};S.setStyle(ba,Y)}for(h=0;h<n.length;h++)ba=n[h][0]||{},Y=n[h][1]||{},S.addSurface(c.SurfaceType.VDW,Y,ba,ba);for(h=0;h<y.length;h++)ba=y[h][0]||{},Y=y[h][1]||{},S.addResLabels(ba,Y);S.zoomTo(D);S.render()},W=a;try{if(null==W){var ha=w.data("config")||{};ha.defaultcolors=ha.defaultcolors||c.rasmolElementColors;W=c.viewers[this.id||p++]=c.createViewer(w,
ha)}W.setBackgroundColor(L)}catch(S){console.log(S),window.location="http://get.webgl.org"}if(0!=v.length){h=0;var U=function(S){M=v[h];var ba=w.data("type")||w.data("datatype")||C[h];if(W.addModel(S,ba,P),h+=1,h<v.length)bb.get(v[h],U,"text");else{if(V(W),w.data("callback"))S=eval(w.data("callback")),"function"==typeof S&&S(W);d&&d(W)}};bb.get(v[0],U,"text")}else{w.data("element")&&(N=bb("#"+w.data("element")).val()||"",(x=w.data("type")||w.data("datatype"))||(console.log("Warning: No type specified for embedded viewer with moldata from "+
w.data("element")+"\n assuming type 'pdb'"),x="pdb"),W.addModel(N,x,P));if(V(W),w.data("callback"))N=eval(w.data("callback")),"function"==typeof N&&N(W);d&&d(W)}})}};bb(document).ready(function(){c.autoload()});var Gd=c.htmlColors={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,
cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,
dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,
lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,
mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,
seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};c.CC={cache:{0:new c.Color(0)},color:function h(d){if(!d)return this.cache[0];if(void 0!==this.cache[d])return this.cache[d];if(d&&d.constructor===
Array)return d.map(h,this);if("number"==typeof(d=this.getHex(d))){var q=new c.Color(d);return this.cache[d]=q,q}return d},getHex:function(d){return isNaN(parseInt(d))?"string"==typeof d?(4==(d=d.trim()).length&&"#"==d[0]&&(d="#"+d[1]+d[1]+d[2]+d[2]+d[3]+d[3]),7==d.length&&"#"==d[0]?parseInt(d.substring(1),16):Gd[d.toLowerCase()]||0):d:parseInt(d)}};c.CC=c.CC;c.CC.color=c.CC.color;c.ssColors=c.ssColors||{};c.ssColors.pyMol={h:16711680,s:16776960,c:65280};c.ssColors.Jmol={h:16711808,s:16762880,c:16777215};
c.elementColors=c.elementColors||{};c.elementColors.defaultColor=16716947;c.elementColors.Jmol={H:16777215,He:14286847,HE:14286847,Li:13402367,LI:13402367,Be:12779264,BE:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,NE:11789301,Na:11230450,NA:11230450,Mg:9109248,MG:9109248,Al:12560038,AL:12560038,Si:1578E4,SI:1578E4,P:16744448,S:16777008,Cl:2093087,CL:2093087,Ar:8442339,AR:8442339,K:9388244,Ca:4062976,CA:4062976,Sc:15132390,SC:15132390,Ti:12567239,TI:12567239,V:10921643,
Cr:9083335,CR:9083335,Mn:10255047,MN:10255047,Fe:14706227,FE:14706227,Co:15765664,CO:15765664,Ni:5296208,NI:5296208,Cu:13140019,CU:13140019,Zn:8224944,ZN:8224944,Ga:12750735,GA:12750735,Ge:6721423,GE:6721423,As:12419299,AS:12419299,Se:16752896,SE:16752896,Br:10889513,BR:10889513,Kr:6076625,KR:6076625,Rb:7351984,RB:7351984,Sr:65280,SR:65280,Y:9764863,Zr:9756896,ZR:9756896,Nb:7586505,NB:7586505,Mo:5551541,MO:5551541,Tc:3907230,TC:3907230,Ru:2396047,RU:2396047,Rh:687500,RH:687500,Pd:27013,PD:27013,Ag:12632256,
AG:12632256,Cd:16767375,CD:16767375,In:10909043,IN:10909043,Sn:6717568,SN:6717568,Sb:10380213,SB:10380213,Te:13924864,TE:13924864,I:9699476,Xe:4366E3,XE:4366E3,Cs:5707663,CS:5707663,Ba:51456,BA:51456,La:7394559,LA:7394559,Ce:16777159,CE:16777159,Pr:14286791,PR:14286791,Nd:13107143,ND:13107143,Pm:10747847,PM:10747847,Sm:9437127,SM:9437127,Eu:6422471,EU:6422471,Gd:4587463,GD:4587463,Tb:3211207,TB:3211207,Dy:2097095,DY:2097095,Ho:65436,HO:65436,Er:58997,ER:58997,Tm:54354,TM:54354,Yb:48952,YB:48952,Lu:43812,
LU:43812,Hf:5096191,HF:5096191,Ta:5089023,TA:5089023,W:2200790,Re:2522539,RE:2522539,Os:2516630,OS:2516630,Ir:1528967,IR:1528967,Pt:13684960,PT:13684960,Au:16765219,AU:16765219,Hg:12105936,HG:12105936,Tl:10900557,TL:10900557,Pb:5724513,PB:5724513,Bi:10375093,BI:10375093,Po:11230208,PO:11230208,At:7688005,AT:7688005,Rn:4358806,RN:4358806,Fr:4325478,FR:4325478,Ra:32E3,RA:32E3,Ac:7384058,AC:7384058,Th:47871,TH:47871,Pa:41471,PA:41471,U:36863,Np:33023,NP:33023,Pu:27647,PU:27647,Am:5528818,AM:5528818,
Cm:7888099,CM:7888099,Bk:9064419,BK:9064419,Cf:10565332,CF:10565332,Es:11739092,ES:11739092,Fm:11739066,FM:11739066,Md:11734438,MD:11734438,No:12389767,NO:12389767,Lr:13041766,LR:13041766,Rf:13369433,RF:13369433,Db:13697103,DB:13697103,Sg:14221381,SG:14221381,Bh:14680120,BH:14680120,Hs:15073326,HS:15073326,Mt:15400998,MT:15400998};c.elementColors.rasmol={H:16777215,He:16761035,HE:16761035,Li:11674146,LI:11674146,B:65280,C:13158600,N:9408511,O:15728640,F:14329120,Na:255,NA:255,Mg:2263842,MG:2263842,
Al:8421520,AL:8421520,Si:14329120,SI:14329120,P:16753920,S:16762930,Cl:65280,CL:65280,Ca:8421520,CA:8421520,Ti:8421520,TI:8421520,Cr:8421520,CR:8421520,Mn:8421520,MN:8421520,Fe:16753920,FE:16753920,Ni:10824234,NI:10824234,Cu:10824234,CU:10824234,Zn:10824234,ZN:10824234,Br:10824234,BR:10824234,Ag:8421520,AG:8421520,I:10494192,Ba:16753920,BA:16753920,Au:14329120,AU:14329120};c.elementColors.defaultColors=c.elementColors.rasmol;c.elementColors.greenCarbon=bb.extend({},c.elementColors.defaultColors);
c.elementColors.greenCarbon.C=65280;c.elementColors.cyanCarbon=bb.extend({},c.elementColors.defaultColors);c.elementColors.cyanCarbon.C=65535;c.elementColors.magentaCarbon=bb.extend({},c.elementColors.defaultColors);c.elementColors.magentaCarbon.C=16711935;c.elementColors.yellowCarbon=bb.extend({},c.elementColors.defaultColors);c.elementColors.yellowCarbon.C=16776960;c.elementColors.whiteCarbon=bb.extend({},c.elementColors.defaultColors);c.elementColors.whiteCarbon.C=16777215;c.elementColors.orangeCarbon=
bb.extend({},c.elementColors.defaultColors);c.elementColors.orangeCarbon.C=16753920;c.elementColors.purpleCarbon=bb.extend({},c.elementColors.defaultColors);c.elementColors.purpleCarbon.C=8388736;c.elementColors.blueCarbon=bb.extend({},c.elementColors.defaultColors);c.elementColors.blueCarbon.C=255;c.residues={};c.residues.amino={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,
PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740};c.residues.shapely={ALA:9240460,ARG:124,ASN:16743536,ASP:10485826,CYS:16777072,GLN:16731212,GLU:6684672,GLY:16777215,HIS:7368959,ILE:19456,LEU:4546117,LYS:4671416,MET:12099650,PHE:5459026,PRO:5395026,SER:16740418,THR:12078080,TRP:5195264,TYR:9203788,VAL:16747775,ASX:16711935,GLX:16711935};c.residues.nucleic={A:10526975,G:16740464,I:8454143,C:16747595,T:10551200,U:16744576};c.chains={};c.chains.atom=
{A:12636415,B:11599792,C:16761032,D:16777088,E:16761087,F:11596016,G:16765040,H:15761536,I:16113331,J:49151,K:13458524,L:6737322,M:10145074,N:15631086,O:52945,P:65407,Q:3978097,R:139,S:12433259,T:25600,U:8388608,V:8421376,W:8388736,X:32896,Y:12092939,Z:11674146};c.chains.hetatm={A:9478351,B:8441752,C:13602992,D:13619056,E:13603023,F:8437952,G:13607008,H:12603504,I:12955267,J:42959,K:11881548,L:5682578,M:9090346,N:12481214,O:46753,P:53103,Q:3447649,R:187,S:10854235,T:37888,U:11534336,V:11579392,W:11534512,
X:45232,Y:15250963,Z:12726834};c.builtinColorSchemes={ssPyMol:{prop:"ss",map:c.ssColors.pyMol},ssJmol:{prop:"ss",map:c.ssColors.Jmol},Jmol:{prop:"elem",map:c.elementColors.Jmol},greenCarbon:{prop:"elem",map:c.elementColors.greenCarbon},default:{prop:"elem",map:c.elementColors.defaultColors},amino:{prop:"resn",map:c.residues.amino},shapely:{prop:"resn",map:c.residues.shapely},nucleic:{prop:"resn",map:c.residues.nucleic},chain:{prop:"chain",map:c.chains.atom},chainHetatm:{prop:"chain",map:c.chains.hetatm}};
c.getColorFromStyle=function(d,h){var q=h.colorscheme;if(void 0!==c.builtinColorSchemes[q])q=c.builtinColorSchemes[q];else if("string"==typeof q&&q.endsWith("Carbon")){var x=q.substring(0,q.lastIndexOf("Carbon")).toLowerCase();if(void 0!==Gd[x]){var p=bb.extend({},c.elementColors.defaultColors);p.C=Gd[x];c.builtinColorSchemes[q]={prop:"elem",map:p};q=c.builtinColorSchemes[q]}}var w;x=d.color;if(void 0!==h.color&&"spectrum"!=h.color&&(x=h.color),void 0!==q)if(void 0!==c.elementColors[q])void 0!==(q=
c.elementColors[q])[d[q.prop]]&&(x=q.map[d[q.prop]]);else if(void 0!==q[d[q.prop]])x=q.map[d[q.prop]];else if(void 0!==q.prop&&void 0!==q.gradient){var v=q.prop;h=q.gradient;void 0!==c.Gradient.builtinGradients[h]&&(h=new c.Gradient.builtinGradients[h](q.min,q.max,q.mid));q=h.range()||[-1,1];null!=(w=c.getAtomProperty(d,v))&&(x=h.valueToHex(w,q))}else void 0!==q.prop&&void 0!==q.map?(v=q.prop,w=c.getAtomProperty(d,v),void 0!==q.map[w]&&(x=q.map[w])):void 0!==h.colorscheme[d.elem]?x=h.colorscheme[d.elem]:
console.log("Could not interpret colorscheme "+q);else void 0!==h.colorfunc&&(x=h.colorfunc(d));return c.CC.color(x)};c=c||{};c.subdivide_spline=function(d,h){var q,x,p,w,v,C=[],M;(M=[]).push(d[0]);var L=1;for(q=d.length-1;L<q;L++)if(p=d[L],w=d[L+1],p.smoothen){var P=new c.Vector3((p.x+w.x)/2,(p.y+w.y)/2,(p.z+w.z)/2);P.atom=p.atom;M.push(P)}else M.push(p);M.push(d[d.length-1]);L=-1;for(d=M.length;L<=d-3;L++)if(x=M[-1===L?0:L],p=M[L+1],w=M[L+2],v=M[L===d-3?d-1:L+3],q=(new c.Vector3).subVectors(w,x).multiplyScalar(.5),
P=(new c.Vector3).subVectors(v,p).multiplyScalar(.5),!w.skip)for(var e=0;e<h;e++){var g=1/h*e;g=new c.Vector3(p.x+g*q.x+g*g*(-3*p.x+3*w.x-2*q.x-P.x)+g*g*g*(2*p.x-2*w.x+q.x+P.x),p.y+g*q.y+g*g*(-3*p.y+3*w.y-2*q.y-P.y)+g*g*g*(2*p.y-2*w.y+q.y+P.y),p.z+g*q.z+g*g*(-3*p.z+3*w.z-2*q.z-P.z)+g*g*g*(2*p.z-2*w.z+q.z+P.z));g.atom=e<h/2?p.atom:w.atom;C.push(g)}return C.push(M[M.length-1]),C};c.drawCartoon=function(){var d=function(P,e,g,u){for(var n,y,D,l,B=0,k=e.length;B<k;B++){l=Math.round(B*(u.length-1)/k);
D=c.CC.color(u[l]);l=P.updateGeoGroup(2);var J=l.vertexArray,m=l.colorArray,K=l.faceArray;J[y=3*(n=l.vertices)]=e[B].x;J[y+1]=e[B].y;J[y+2]=e[B].z;J[y+3]=g[B].x;J[y+4]=g[B].y;J[y+5]=g[B].z;for(J=0;6>J;++J)m[y+3*J]=D.r,m[y+1+3*J]=D.g,m[y+2+3*J]=D.b;0<B&&(n=[n,n+1,n-1,n-2],y=l.faceidx,K[y]=n[0],K[y+1]=n[1],K[y+2]=n[3],K[y+3]=n[1],K[y+4]=n[2],K[y+5]=n[3],l.faceidx+=6);l.vertices+=2}},h=function(P,e,g,u,n){0!==e.length&&(e=new c.Geometry,g=new c.LineBasicMaterial({linewidth:g}),g.vertexColors=!0,g=new c.Line(e,
g),g.type=c.LineStrip,P.add(g))},q=function(P,e,g,u,n,y,D){D&&"default"!==D||(D="rectangle");"edged"===D?function(l,B,k,J,m,K){if(!(2>B.length)){var N,Q;if(N=B[0],Q=B[B.length-1],N=c.subdivide_spline(N,J),Q=c.subdivide_spline(Q,J),!m)return d(l,N,Q,k);var H,V,W,ha,U,S,ba,Y,aa,ia,z,G,F,R;J=[];var T=[[0,2,-6,-8],[-4,-2,6,4],[7,-1,-5,3],[-3,5,1,-7]];B=0;for(ia=N.length;B<ia;B++){if(Y=Math.round(B*(k.length-1)/ia),ba=c.CC.color(k[Y]),J.push(H=N[B]),J.push(H),J.push(V=Q[B]),J.push(V),B<ia-1){var fa=N[B+
1].clone().sub(N[B]);fa=Q[B].clone().sub(N[B]).cross(fa).normalize().multiplyScalar(m)}J.push(W=N[B].clone().add(fa));J.push(W);J.push(ha=Q[B].clone().add(fa));J.push(ha);void 0!==H.atom&&(aa=H.atom);var Z=(R=l.updateGeoGroup(8)).vertexArray;var qa=R.colorArray;var na=R.faceArray;Z[U=3*(K=R.vertices)]=H.x;Z[U+1]=H.y;Z[U+2]=H.z;Z[U+3]=H.x;Z[U+4]=H.y;Z[U+5]=H.z;Z[U+6]=V.x;Z[U+7]=V.y;Z[U+8]=V.z;Z[U+9]=V.x;Z[U+10]=V.y;Z[U+11]=V.z;Z[U+12]=W.x;Z[U+13]=W.y;Z[U+14]=W.z;Z[U+15]=W.x;Z[U+16]=W.y;Z[U+17]=W.z;
Z[U+18]=ha.x;Z[U+19]=ha.y;Z[U+20]=ha.z;Z[U+21]=ha.x;Z[U+22]=ha.y;Z[U+23]=ha.z;for(Z=0;8>Z;++Z)qa[U+3*Z]=ba.r,qa[U+1+3*Z]=ba.g,qa[U+2+3*Z]=ba.b;if(0<B)for(U=void 0!==Ha&&void 0!==aa&&Ha.serial!==aa.serial,Z=0;4>Z;Z++){var ta=[K+T[Z][0],K+T[Z][1],K+T[Z][2],K+T[Z][3]];if(na[S=R.faceidx]=ta[0],na[S+1]=ta[1],na[S+2]=ta[3],na[S+3]=ta[1],na[S+4]=ta[2],na[S+5]=ta[3],R.faceidx+=6,aa.clickable||Ha.clickable||aa.hoverable||Ha.hoverable){qa=J[ta[3]].clone();W=J[ta[0]].clone();ha=J[ta[2]].clone();var pa=J[ta[1]].clone();
if(qa.atom=J[ta[3]].atom||null,ha.atom=J[ta[2]].atom||null,W.atom=J[ta[0]].atom||null,pa.atom=J[ta[1]].atom||null,U){ta=qa.clone().add(W).multiplyScalar(.5);var Fa=ha.clone().add(pa).multiplyScalar(.5),Ga=qa.clone().add(pa).multiplyScalar(.5);0==Z%2?((Ha.clickable||Ha.hoverable)&&(z=new c.Triangle(ta,Ga,qa),G=new c.Triangle(Fa,ha,Ga),F=new c.Triangle(Ga,ha,qa),Ha.intersectionShape.triangle.push(z),Ha.intersectionShape.triangle.push(G),Ha.intersectionShape.triangle.push(F)),(aa.clickable||aa.hoverable)&&
(z=new c.Triangle(W,pa,Ga),G=new c.Triangle(pa,Fa,Ga),F=new c.Triangle(W,Ga,ta),aa.intersectionShape.triangle.push(z),aa.intersectionShape.triangle.push(G),aa.intersectionShape.triangle.push(F))):((aa.clickable||aa.hoverable)&&(z=new c.Triangle(ta,Ga,qa),G=new c.Triangle(Fa,ha,Ga),F=new c.Triangle(Ga,ha,qa),aa.intersectionShape.triangle.push(z),aa.intersectionShape.triangle.push(G),aa.intersectionShape.triangle.push(F)),(Ha.clickable||Ha.hoverable)&&(z=new c.Triangle(W,pa,Ga),G=new c.Triangle(pa,
Fa,Ga),F=new c.Triangle(W,Ga,ta),Ha.intersectionShape.triangle.push(z),Ha.intersectionShape.triangle.push(G),Ha.intersectionShape.triangle.push(F)))}else(aa.clickable||aa.hoverable)&&(z=new c.Triangle(W,pa,qa),G=new c.Triangle(pa,ha,qa),aa.intersectionShape.triangle.push(z),aa.intersectionShape.triangle.push(G))}}R.vertices+=8;var Ha=aa}k=J.length-8;Z=(R=l.updateGeoGroup(8)).vertexArray;qa=R.colorArray;na=R.faceArray;U=3*(K=R.vertices);S=R.faceidx;for(B=0;4>B;B++)J.push(J[2*B]),J.push(J[k+2*B]),l=
J[2*B],m=J[k+2*B],Z[U+6*B]=l.x,Z[U+1+6*B]=l.y,Z[U+2+6*B]=l.z,Z[U+3+6*B]=m.x,Z[U+4+6*B]=m.y,Z[U+5+6*B]=m.z,qa[U+6*B]=ba.r,qa[U+1+6*B]=ba.g,qa[U+2+6*B]=ba.b,qa[U+3+6*B]=ba.r,qa[U+4+6*B]=ba.g,qa[U+5+6*B]=ba.b;z=[K,K+2,K+6,K+4];G=[K+1,K+5,K+7,K+3];na[S]=z[0];na[S+1]=z[1];na[S+2]=z[3];na[S+3]=z[1];na[S+4]=z[2];na[S+5]=z[3];na[S+6]=G[0];na[S+7]=G[1];na[S+8]=G[3];na[S+9]=G[1];na[S+10]=G[2];na[S+11]=G[3];R.faceidx+=12;R.vertices+=8}}(P,e,g,u,n):"rectangle"!==D&&"oval"!==D&&"parabola"!==D||function(l,B,k,
J,m,K,N){var Q,H;if(!(2>(H=B.length)||2>B[0].length)){for(K=0;K<H;K++)B[K]=c.subdivide_spline(B[K],J);if(J=B[0].length,!m)return d(l,B[0],B[H-1],k);var V,W=[],ha=[],U=[];for(Q=0;Q<H;Q++)W.push(.25+1.5*Math.sqrt((H-1)*Q-Math.pow(Q,2))/(H-1)),ha.push(.5),U.push(2*(Math.pow(Q/H,2)-Q/H)+.6);var S,ba=[];for(Q=0;Q<2*H-1;Q++)ba[Q]=[Q,Q+1,Q+1-2*H,Q-2*H];ba[2*H-1]=[Q,Q+1-2*H,Q+1-4*H,Q-2*H];l=l.updateGeoGroup(2*H*J);for(K=0;K<J;K++){Q=Math.round(K*(k.length-1)/J);var Y=c.CC.color(k[Q]);var aa=z;var ia=G;var z=
[];var G=[];var F=[];void 0!==B[0][K].atom&&(S=B[0][K].atom,"oval"===N?V=W:"rectangle"===N?V=ha:"parabola"===N&&(V=U));V||=ha;for(Q=0;Q<H;Q++){var R=K<J-1?B[Q][K+1].clone().sub(B[Q][K]):B[Q][K-1].clone().sub(B[Q][K]).negate();var T=Q<H-1?B[Q+1][K].clone().sub(B[Q][K]):B[Q-1][K].clone().sub(B[Q][K]).negate();F[Q]=T.cross(R).normalize().multiplyScalar(m*V[Q])}for(Q=0;Q<H;Q++)z[Q]=B[Q][K].clone().add(F[Q].clone().negate());for(Q=0;Q<H;Q++)G[Q]=B[Q][K].clone().add(F[Q]);var fa=l.vertexArray;var Z=l.colorArray;
R=l.faceArray;T=3*(F=l.vertices);for(Q=0;Q<H;Q++)fa[T+3*Q+0]=z[Q].x,fa[T+3*Q+1]=z[Q].y,fa[T+3*Q+2]=z[Q].z;for(Q=0;Q<H;Q++)fa[T+3*Q+0+3*H]=G[H-1-Q].x,fa[T+3*Q+1+3*H]=G[H-1-Q].y,fa[T+3*Q+2+3*H]=G[H-1-Q].z;for(Q=0;Q<2*H;++Q)Z[T+3*Q+0]=Y.r,Z[T+3*Q+1]=Y.g,Z[T+3*Q+2]=Y.b;if(0<K){for(Q=0;Q<2*H;Q++)T=[F+ba[Q][0],F+ba[Q][1],F+ba[Q][2],F+ba[Q][3]],R[Y=l.faceidx]=T[0],R[Y+1]=T[1],R[Y+2]=T[3],R[Y+3]=T[1],R[Y+4]=T[2],R[Y+5]=T[3],l.faceidx+=6;if(S.clickable||S.hoverable)for(Q in Y=[],Y.push(new c.Triangle(aa[0],
z[0],z[H-1])),Y.push(new c.Triangle(aa[0],z[H-1],aa[H-1])),Y.push(new c.Triangle(aa[H-1],z[H-1],G[H-1])),Y.push(new c.Triangle(aa[H-1],G[H-1],ia[H-1])),Y.push(new c.Triangle(G[0],ia[0],ia[H-1])),Y.push(new c.Triangle(G[H-1],G[0],ia[H-1])),Y.push(new c.Triangle(z[0],aa[0],ia[0])),Y.push(new c.Triangle(G[0],z[0],ia[0])),Y)S.intersectionShape.triangle.push(Y[Q])}l.vertices+=2*H}R=l.faceArray;F=l.vertices;for(K=0;K<H-1;K++)T=[K,K+1,2*H-2-K,2*H-1-K],R[Y=l.faceidx]=T[0],R[Y+1]=T[1],R[Y+2]=T[3],R[Y+3]=T[1],
R[Y+4]=T[2],R[Y+5]=T[3],l.faceidx+=6;for(K=0;K<H-1;K++)T=[F-1-K,F-2-K,F-2*H+K+1,F-2*H+K],R[Y=l.faceidx]=T[0],R[Y+1]=T[1],R[Y+2]=T[3],R[Y+3]=T[1],R[Y+4]=T[2],R[Y+5]=T[3],l.faceidx+=6}}(P,e,g,u,n,0,D)},x=function(P,e){if(P&&e&&P.chain===e.chain){if(P.reschain===e.reschain&&(P.resi===e.resi||P.resi===e.resi-1))return!0;if(P.resi<e.resi){var g=P.x-e.x,u=P.y-e.y;P=P.z-e.z;if(16>g*g+u*u+P*P)return!0}}return!1},p=function(P,e,g,u,n){null!=e&&0!=e.vertices&&(n&&(e.initTypedArrays(),e.setUpNormals()),n=new c.MeshDoubleLambertMaterial,
n.vertexColors=c.FaceColors,"number"==typeof g&&0<=g&&1>g&&(n.transparent=!0,n.opacity=g),n.outline=u,e=new c.Mesh(e,n),P.add(e))},w=function(P,e,g,u,n,y,D,l,B){var k,J,m;if(u&&n&&D){var K=n.sub(u);K.normalize();var N=l[B];for(B+=1;B<l.length&&(N=l[B]).atom!=D.atom;B++);if((N=N?new c.Vector3(N.x,N.y,N.z):new c.Vector3(0,0,0)).sub(u),"arrow start"===D.ss)B=N.clone().multiplyScalar(.3).cross(n),u.add(B),B=N.clone().cross(K).normalize(),K.rotateAboutVector(B,.43);D.style.cartoon.ribbon?k=D.style.cartoon.thickness||
.4:D.style.cartoon.width?k=D.style.cartoon.width:"c"===D.ss?k="P"===D.atom?.8:.5:"arrow start"===D.ss?(k=1.3,J=!0):k="arrow end"===D.ss||"h"===D.ss&&D.style.cartoon.tubes||"tube start"===D.ss?.5:1.3;null!=y&&0>K.dot(y)&&K.negate();K.multiplyScalar(k);for(B=0;B<e;B++)y=2*B/(e-1)-1,(y=new c.Vector3(u.x+y*K.x,u.y+y*K.y,u.z+y*K.z)).atom=D,g&&"s"===D.ss&&(y.smoothen=!0),P[B].push(y);if(J)for(K.multiplyScalar(2),B=0;B<e;B++)y=2*B/(e-1)-1,(y=new c.Vector3(u.x+y*K.x,u.y+y*K.y,u.z+y*K.z)).atom=D,y.smoothen=
!1,y.skip=!0,P[B].push(y);return m=D.style.cartoon.style||"default",P.style?P.style!=m&&(console.log("Warning: a cartoon chain's strand-style is ambiguous"),P.style="default"):P.style=m,"arrow start"!==D.ss&&"arrow end"!==D.ss||(D.ss="s"),J}},v={C:!0,CA:!0,O:!0,P:!0,OP2:!0,O2P:!0,"O5'":!0,"O3'":!0,"C5'":!0,"C2'":!0,"O5*":!0,"O3*":!0,"C5*":!0,"C2*":!0,N1:!0,N3:!0},C={DA:!0,DG:!0,A:!0,G:!0},M={DT:!0,DC:!0,U:!0,C:!0,T:!0},L={DA:!0,DG:!0,A:!0,G:!0,DT:!0,DC:!0,U:!0,C:!0,T:!0};return function(P,e,g,u){!function(n,
y,D,l,B,k,J){var m,K,N,Q,H,V,W,ha,U,S,ba,Y,aa;k=k||5;J=J||5;var ia=new c.Geometry(!0),z=new c.Geometry(!0),G=[],F=[],R=1,T=!1,fa={};for(H in c.Gradient.builtinGradients)c.Gradient.builtinGradients.hasOwnProperty(H)&&(fa[H]=new c.Gradient.builtinGradients[H](D[1],D[0]));l=function(Ha,Ja){return D&&"spectrum"===Ja.color?Ja.colorscheme in fa?fa[Ja.colorscheme].valueToHex(Ha.resi):fa.sinebow.valueToHex(Ha.resi):c.getColorFromStyle(Ha,Ja).getHex()};for(H=0;H<k;H++)F[H]=[];var Z=!1,qa=!1;B=[];for(H in y){if("C"===
(K=y[H]).elem&&"CA"===K.atom){var na=x(pa,K);na&&"s"===K.ss?Z=!0:Z&&(pa&&ta&&pa.style.cartoon.arrows&&ta.style.cartoon.arrows&&(pa.ss="arrow end",ta.ss="arrow start"),Z=!1);na&&("h"===pa.ss||"tube start"==pa.ss)&&pa.style.cartoon.tubes?!qa&&"tube start"!=pa.ss&&K.style.cartoon.tubes&&(K.ss="tube start",qa=!0):qa&&("tube start"===pa.ss?pa.ss="tube end":ta&&ta.style.cartoon.tubes&&(ta.ss="tube end"),qa=!1);var ta=pa;var pa=K}K&&K.atom in v&&B.push(K)}qa&&pa.style.cartoon.tubes&&(pa.ss="tube end",qa=
!1);y=function(Ha){for(var Ja=0;!Q&&Ja<k;Ja++)h(n,F[Ja],1,0,J);0<F[0].length&&q(z,F,G,J,Q,0,F.style);var Na=[],hb=null;if(Ha){for(Ja=0;Ja<k;Ja++)Na[Ja]=F[Ja][F[Ja].length-1];hb=G[G.length-1]}F=[];for(Ja=0;Ja<k;Ja++)F[Ja]=[];if(G=[],Ha){for(Ja=0;Ja<k;Ja++)F[Ja].push(Na[Ja]);G.push(hb)}p(n,z,R,T,!0);p(n,ia,R,T,!1);z=new c.Geometry(!0);ia=new c.Geometry(!0)};pa=void 0;for(ta=0;ta<B.length;ta++)if(H=(K=B[ta]).resn.trim(),Z=H in L,R=1,m=K.style.cartoon,pa&&pa.style.cartoon&&(R=pa.style.cartoon.opacity),
pa&&pa.style.cartoon&&pa.style.cartoon.outline&&(T=pa.style.cartoon.outline),!pa||!pa.style.cartoon||K.style.cartoon&&pa.style.cartoon.opacity==K.style.cartoon.opacity||y(pa.chain==K.chain),F.length&&F[0].length>3E4/k/J/2&&y(!0),"trace"===m.style){if(!K.hetflag&&("C"===K.elem&&"CA"===K.atom||Z&&"P"===K.atom)){if(N=l(K,m),Q=bb.isNumeric(m.thickness)?m.thickness:.4,x(pa,K))if(N==Fa){var Fa=c.CC.color(N);c.GLDraw.drawCylinder(ia,pa,K,Q,Fa,2,2)}else H=(new c.Vector3).addVectors(pa,K).multiplyScalar(.5),
Fa=c.CC.color(Fa),Z=c.CC.color(N),c.GLDraw.drawCylinder(ia,pa,H,Q,Fa,2,0),c.GLDraw.drawCylinder(ia,H,K,Q,Z,0,2);!0!==K.clickable&&!K.hoverable||void 0===K.intersectionShape||(pa=new c.Vector3(K.x,K.y,K.z),K.intersectionShape.sphere.push(new c.Sphere(pa,Q)));pa=K;Fa=N}}else{if(K&&"C"===K.elem&&"CA"===K.atom||Z&&("P"===K.atom||0==K.atom.indexOf("O5"))){if(Ga)if("tube end"===K.ss){var Ga=!1;H=new c.Vector3(K.x,K.y,K.z);c.GLDraw.drawCylinder(ia,aa,H,2,c.CC.color(Fa),1,1);K.ss="h"}else{if(pa.chain==K.chain&&
"tube end"!==pa.ss)continue;Ga=!1;pa.ss="h";H=new c.Vector3(pa.x,pa.y,pa.z);c.GLDraw.drawCylinder(ia,aa,H,2,c.CC.color(Fa),1,1)}if(pa&&(!x(pa,K)||"tube start"===pa.ss)){"tube start"===pa.ss&&(Ga=!0,aa=new c.Vector3(pa.x,pa.y,pa.z),pa.ss="h");Y&&(ba=U?(new c.Vector3).addVectors(pa,U).multiplyScalar(.5):new c.Vector3(pa.x,pa.y,pa.z),c.GLDraw.drawCylinder(ia,ba,Y,.4,c.CC.color(Y.color),0,2),w(F,k,!0,U,S,ha,pa,B,ta),G.push(N),ba=null,Y=null);for(H=0;!Q&&H<k;H++)h(n,F[H],1,0,J);0<F[0].length&&q(z,F,G,
J,Q,0,F.style);F=[];for(H=0;H<k;H++)F[H]=[];G=[]}if(void 0===pa||pa.rescode!=K.rescode||pa.resi!=K.resi)Y&&(N=(ba=(new c.Vector3).addVectors(pa,K).multiplyScalar(.5)).clone().sub(Y).multiplyScalar(.02),ba.add(N),c.GLDraw.drawCylinder(ia,ba,Y,.4,c.CC.color(Y.color),0,2),Y=ba=null),N=l(K,m),G.push(N),Q=bb.isNumeric(m.thickness)?m.thickness:.4,pa=K,(V=new c.Vector3(pa.x,pa.y,pa.z)).resi=pa.resi,Fa=N;!0!==K.clickable&&!0!==K.hoverable||void 0!==K.intersectionShape&&void 0!==K.intersectionShape.triangle||
(K.intersectionShape={sphere:null,cylinder:[],line:[],triangle:[]})}else pa&&"C"===pa.elem&&"CA"===pa.atom&&"O"===K.atom||Z&&"P"===pa.atom&&("OP2"===K.atom||"O2P"===K.atom)||Z&&0==pa.atom.indexOf("O5")&&0==K.atom.indexOf("C5")?((W=new c.Vector3(K.x,K.y,K.z)).resi=K.resi,"OP2"!==K.atom&&"O2P"!==K.atom||(S=new c.Vector3(K.x,K.y,K.z))):Z&&0==K.atom.indexOf("O3")?U=new c.Vector3(K.x,K.y,K.z):("N1"===K.atom&&H in C||"N3"===K.atom&&H in M)&&((Y=new c.Vector3(K.x,K.y,K.z)).color=c.getColorFromStyle(K,m).getHex());
W&&V&&W.resi===V.resi&&(w(F,k,!0,V,W,ha,pa,B,ta),ha=W,V=null,W=null,G.push(N))}Y&&(ba=U?(new c.Vector3).addVectors(pa,U).multiplyScalar(.5):new c.Vector3(pa.x,pa.y,pa.z),c.GLDraw.drawCylinder(ia,ba,Y,.4,c.CC.color(Y.color),0,2),w(F,k,!0,U,S,ha,pa,B,ta),G.push(N));y()}(P,e,g,0,0,u=u||5,u)}}();c=c||{};c.CAP={NONE:0,FLAT:1,ROUND:2};c.GLDraw=function(){var d,h={},q=(d=new c.Vector3,function(v){d.set(v[0],v[1],v[2]);var C,M,L,P,e;v=d.x;var g=d.y,u=d.z,n=Math.sqrt(v*v+g*g);1E-4>n?(M=0,L=1):(M=-v/n,L=g/
n);g=-M*v+L*g;1E-4>(C=Math.sqrt(g*g+u*u))?(P=0,e=1):(P=u/C,e=g/C);C=new Float32Array(9);return C[0]=L,C[1]=M,C[2]=0,C[3]=-M*e,C[4]=L*e,C[5]=P,C[6]=M*P,C[7]=-L*P,C[8]=e,C}),x=function(){var v,C=[],M=Math.pow(2,4),L,P=Math.pow(2,2),e=M/P;C[0]=new c.Vector3(-1,0,0);C[e]=new c.Vector3(0,0,1);C[2*e]=new c.Vector3(1,0,0);C[3*e]=new c.Vector3(0,0,-1);for(L=3;4>=L;L++){e=M/(P=Math.pow(2,L-1));for(v=0;v<P-1;v++)C[e/2+v*e]=C[v*e].clone().add(C[(v+1)*e]).normalize();C[e/2+(v=P-1)*e]=C[v*e].clone().add(C[0]).normalize()}return C}(),
p={cache:{},getVerticesForRadius:function(v,C,M){if(void 0!==this.cache[v]&&void 0!==this.cache[v][C+M])return this.cache[v][C+M];for(var L,P=x.length,e=[],g=[],u=0;u<P;u++)e.push(x[u].clone().multiplyScalar(v)),e.push(x[u].clone().multiplyScalar(v)),L=x[u].clone().normalize(),g.push(L),g.push(L);var n,y=[],D=2*Math.PI,l=Math.PI;for(n=0;10>=n;n++){var B=0===n||10===n;var k=5===n;var J=[],m=[];for(u=0;u<=P;u++)if(k){var K=u<P?2*u:0;m.push(K+1);J.push(K)}else{K=u/P;var N=n/10;if(B&&0!==u)B&&J.push(e.length-
1);else if(u<P){var Q=new c.Vector3;Q.x=-v*Math.cos(K*D)*Math.sin(N*l);Q.y=1==C?0:v*Math.cos(N*l);Q.z=v*Math.sin(K*D)*Math.sin(N*l);1E-5>Math.abs(Q.x)&&(Q.x=0);1E-5>Math.abs(Q.y)&&(Q.y=0);1E-5>Math.abs(Q.z)&&(Q.z=0);C==c.CAP.FLAT?(L=new c.Vector3(0,Math.cos(N*l),0)).normalize():(L=new c.Vector3(Q.x,Q.y,Q.z)).normalize();e.push(Q);g.push(L);J.push(e.length-1)}else J.push(e.length-P)}k&&y.push(m);y.push(J)}L={vertices:e,normals:g,verticesRows:y,w:P,h:10};return v in this.cache||(this.cache[v]={}),this.cache[v][C+
M]=L,L}};h.drawCylinder=function(v,C,M,L,P,e,g){if(C&&M){var u=g||e;P=P||{r:0,g:0,b:0};var n=[M.x,M.y,M.z];n[0]-=C.x;n[1]-=C.y;n[2]-=C.z;var y;n=q(n);var D=p.getVerticesForRadius(L,g,"to");var l=D.w,B=D.h,k=u?B*l+2:2*l;v=v.updateGeoGroup(k);var J=D.vertices,m=D.normals,K=D.verticesRows,N=K[B/2],Q=K[B/2+1],H=v.vertices,V=v.vertexArray,W=v.normalArray,ha=v.colorArray,U=v.faceArray;for(y=0;y<l;++y){var S=2*y;var ba=n[0]*J[S].x+n[3]*J[S].y+n[6]*J[S].z;D=n[1]*J[S].x+n[4]*J[S].y+n[7]*J[S].z;var Y=n[5]*
J[S].y+n[8]*J[S].z;var aa=3*(H+S);S=v.faceidx;V[aa]=ba+C.x;V[aa+1]=D+C.y;V[aa+2]=Y+C.z;V[aa+3]=ba+M.x;V[aa+4]=D+M.y;V[aa+5]=Y+M.z;W[aa]=ba;W[aa+3]=ba;W[aa+1]=D;W[aa+4]=D;W[aa+2]=Y;W[aa+5]=Y;ha[aa]=P.r;ha[aa+3]=P.r;ha[aa+1]=P.g;ha[aa+4]=P.g;ha[aa+2]=P.b;ha[aa+5]=P.b;U[S]=Q[y]+H;U[S+1]=Q[y+1]+H;U[S+2]=N[y]+H;U[S+3]=N[y]+H;U[S+4]=Q[y+1]+H;U[S+5]=N[y+1]+H;v.faceidx+=6}if(u)for(u=e?B+1:B/2+1,D=g?0:B/2;D<u;D++)if(D!==B/2)for(y=D<=B/2?M:C,ba=p.getVerticesForRadius(L,g,"to"),S=p.getVerticesForRadius(L,e,
"from"),y===M?(J=ba.vertices,m=ba.normals,K=ba.verticesRows):y==C&&(J=S.vertices,m=S.normals,K=S.verticesRows),ba=0;ba<l;ba++){S=v.faceidx;var ia=3*((Y=K[D][ba+1])+H);var z=3*((N=K[D][ba])+H);var G=3*((Q=K[D+1][ba])+H);var F=3*((aa=K[D+1][ba+1])+H);var R=n[0]*J[Y].x+n[3]*J[Y].y+n[6]*J[Y].z;var T=n[0]*J[N].x+n[3]*J[N].y+n[6]*J[N].z;var fa=n[0]*J[Q].x+n[3]*J[Q].y+n[6]*J[Q].z;var Z=n[0]*J[aa].x+n[3]*J[aa].y+n[6]*J[aa].z;var qa=n[1]*J[Y].x+n[4]*J[Y].y+n[7]*J[Y].z;var na=n[1]*J[N].x+n[4]*J[N].y+n[7]*J[N].z;
var ta=n[1]*J[Q].x+n[4]*J[Q].y+n[7]*J[Q].z;var pa=n[1]*J[aa].x+n[4]*J[aa].y+n[7]*J[aa].z;var Fa=n[5]*J[Y].y+n[8]*J[Y].z;var Ga=n[5]*J[N].y+n[8]*J[N].z;var Ha=n[5]*J[Q].y+n[8]*J[Q].z;var Ja=n[5]*J[aa].y+n[8]*J[aa].z;V[ia]=R+y.x;V[z]=T+y.x;V[G]=fa+y.x;V[F]=Z+y.x;V[ia+1]=qa+y.y;V[z+1]=na+y.y;V[G+1]=ta+y.y;V[F+1]=pa+y.y;V[ia+2]=Fa+y.z;V[z+2]=Ga+y.z;V[G+2]=Ha+y.z;V[F+2]=Ja+y.z;ha[ia]=P.r;ha[z]=P.r;ha[G]=P.r;ha[F]=P.r;ha[ia+1]=P.g;ha[z+1]=P.g;ha[G+1]=P.g;ha[F+1]=P.g;ha[ia+2]=P.b;ha[z+2]=P.b;ha[G+2]=P.b;
ha[F+2]=P.b;R=n[0]*m[Y].x+n[3]*m[Y].y+n[6]*m[Y].z;T=n[0]*m[N].x+n[3]*m[N].y+n[6]*m[N].z;fa=n[0]*m[Q].x+n[3]*m[Q].y+n[6]*m[Q].z;Z=n[0]*m[aa].x+n[3]*m[aa].y+n[6]*m[aa].z;qa=n[1]*m[Y].x+n[4]*m[Y].y+n[7]*m[Y].z;na=n[1]*m[N].x+n[4]*m[N].y+n[7]*m[N].z;ta=n[1]*m[Q].x+n[4]*m[Q].y+n[7]*m[Q].z;pa=n[1]*m[aa].x+n[4]*m[aa].y+n[7]*m[aa].z;Fa=n[5]*m[Y].y+n[8]*m[Y].z;Ga=n[5]*m[N].y+n[8]*m[N].z;Ha=n[5]*m[Q].y+n[8]*m[Q].z;Ja=n[5]*m[aa].y+n[8]*m[aa].z;0===D?(W[ia]=R,W[G]=fa,W[F]=Z,W[ia+1]=qa,W[G+1]=ta,W[F+1]=pa,W[ia+
2]=Fa,W[G+2]=Ha,W[F+2]=Ja,U[S]=Y+H,U[S+1]=Q+H,U[S+2]=aa+H,v.faceidx+=3):D===u-1?(W[ia]=R,W[z]=T,W[G]=fa,W[ia+1]=qa,W[z+1]=na,W[G+1]=ta,W[ia+2]=Fa,W[z+2]=Ga,W[G+2]=Ha,U[S]=Y+H,U[S+1]=N+H,U[S+2]=Q+H,v.faceidx+=3):(W[ia]=R,W[z]=T,W[F]=Z,W[ia+1]=qa,W[z+1]=na,W[F+1]=pa,W[ia+2]=Fa,W[z+2]=Ga,W[F+2]=Ja,W[z]=T,W[G]=fa,W[F]=Z,W[z+1]=na,W[G+1]=ta,W[F+1]=pa,W[z+2]=Ga,W[G+2]=Ha,W[F+2]=Ja,U[S]=Y+H,U[S+1]=N+H,U[S+2]=aa+H,U[S+3]=N+H,U[S+4]=Q+H,U[S+5]=aa+H,v.faceidx+=6)}v.vertices+=k}};h.drawCone=function(v,C,M,L,
P){if(C&&M){P=P||{r:0,g:0,b:0};var e=[M.x,M.y,M.z];e.x-=C.x;e.y-=C.y;e.z-=C.z;var g=q(e),u=x.length;v=v.updateGeoGroup(u+2);var n=v.vertices,y=v.vertexArray,D=v.normalArray,l=v.colorArray,B=v.faceArray;var k=3*n;e=(new c.Vector3(e[0],e[1],e[2])).normalize();y[k]=C.x;y[k+1]=C.y;y[k+2]=C.z;D[k]=-e.x;D[k+1]=-e.y;D[k+2]=-e.z;l[k]=P.r;l[k+1]=P.g;l[k+2]=P.b;y[k+3]=M.x;y[k+4]=M.y;y[k+5]=M.z;D[k+3]=e.x;D[k+4]=e.y;D[k+5]=e.z;l[k+3]=P.r;l[k+4]=P.g;l[k+5]=P.b;k+=6;for(M=0;M<u;++M){var J=x[M].clone();J.multiplyScalar(L);
e=g[0]*J.x+g[3]*J.y+g[6]*J.z;var m=g[1]*J.x+g[4]*J.y+g[7]*J.z;J=g[5]*J.y+g[8]*J.z;y[k]=e+C.x;y[k+1]=m+C.y;y[k+2]=J+C.z;D[k]=e;D[k+1]=m;D[k+2]=J;l[k]=P.r;l[k+1]=P.g;l[k+2]=P.b;k+=3}v.vertices+=u+2;C=v.faceidx;for(M=0;M<u;M++)L=n+2+M,P=n+2+(M+1)%u,B[C]=L,B[C+1]=P,B[C+2]=n,B[C+=3]=L,B[C+1]=P,B[C+2]=n+1,C+=3;v.faceidx+=6*u}};var w={cache:{},getVerticesForRadius:function(v){if(void 0!==this.cache[v])return this.cache[v];var C={vertices:[],verticesRows:[],normals:[]},M=16,L=10;1>v&&(M=10,L=8);var P,e,g=
2*Math.PI,u=Math.PI;for(e=0;e<=L;e++){var n=[];for(P=0;P<=M;P++){var y=P/M,D=e/L,l={};l.x=-v*Math.cos(y*g)*Math.sin(D*u);l.y=v*Math.cos(D*u);l.z=v*Math.sin(y*g)*Math.sin(D*u);y=new c.Vector3(l.x,l.y,l.z);y.normalize();C.vertices.push(l);C.normals.push(y);n.push(C.vertices.length-1)}C.verticesRows.push(n)}return this.cache[v]=C,C}};return h.drawSphere=function(v,C,M,L){var P=w.getVerticesForRadius(M),e=P.vertices,g=P.normals;v=v.updateGeoGroup(e.length);for(var u=v.vertices,n=v.vertexArray,y=v.colorArray,
D=v.faceArray,l=v.lineArray,B=v.normalArray,k=0,J=e.length;k<J;++k){var m=3*(u+k),K=e[k];n[m]=K.x+C.x;n[m+1]=K.y+C.y;n[m+2]=K.z+C.z;y[m]=L.r;y[m+1]=L.g;y[m+2]=L.b}v.vertices+=e.length;P=P.verticesRows;n=P.length-1;for(L=0;L<n;L++)for(y=P[L].length-1,C=0;C<y;C++){k=v.faceidx;J=v.lineidx;m=P[L][C+1]+u;K=3*m;var N=P[L][C]+u,Q=3*N,H=P[L+1][C]+u,V=3*H,W=P[L+1][C+1]+u,ha=3*W,U=g[m-u],S=g[N-u],ba=g[H-u],Y=g[W-u];Math.abs(e[m-u].y)===M?(B[K]=U.x,B[V]=ba.x,B[ha]=Y.x,B[K+1]=U.y,B[V+1]=ba.y,B[ha+1]=Y.y,B[K+
2]=U.z,B[V+2]=ba.z,B[ha+2]=Y.z,D[k]=m,D[k+1]=H,D[k+2]=W,l[J]=m,l[J+1]=H,l[J+2]=m,l[J+3]=W,l[J+4]=H,l[J+5]=W,v.faceidx+=3,v.lineidx+=6):Math.abs(e[H-u].y)===M?(B[K]=U.x,B[Q]=S.x,B[V]=ba.x,B[K+1]=U.y,B[Q+1]=S.y,B[V+1]=ba.y,B[K+2]=U.z,B[Q+2]=S.z,B[V+2]=ba.z,D[k]=m,D[k+1]=N,D[k+2]=H,l[J]=m,l[J+1]=N,l[J+2]=m,l[J+3]=H,l[J+4]=N,l[J+5]=H,v.faceidx+=3,v.lineidx+=6):(B[K]=U.x,B[Q]=S.x,B[ha]=Y.x,B[K+1]=U.y,B[Q+1]=S.y,B[ha+1]=Y.y,B[K+2]=U.z,B[Q+2]=S.z,B[ha+2]=Y.z,B[Q]=S.x,B[V]=ba.x,B[ha]=Y.x,B[Q+1]=S.y,B[V+1]=
ba.y,B[ha+1]=Y.y,B[Q+2]=S.z,B[V+2]=ba.z,B[ha+2]=Y.z,D[k]=m,D[k+1]=N,D[k+2]=W,D[k+3]=N,D[k+4]=H,D[k+5]=W,l[J]=m,l[J+1]=N,l[J+2]=m,l[J+3]=W,l[J+4]=N,l[J+5]=H,l[J+6]=H,l[J+7]=W,v.faceidx+=6,v.lineidx+=8)}},h}();c=c||{};c.GLModel=function(){function d(p,w){var v=[],C=[],M=null,L=null,P=!1,e=null,g=null,u=null,n={},y=null,D=new c.Matrix4,l=!0,B=c.elementColors.defaultColor,k=(w=w||{}).defaultcolors?w.defaultcolors:c.elementColors.defaultColors,J=w.defaultSphereRadius?w.defaultSphereRadius:1.5,m=w.cartoonQuality?
w.cartoonQuality:5,K=function(z,G){var F=J;void 0!==G.radius?F=G.radius:q[z.elem]?F=q[z.elem]:1<z.elem.length&&(z=z.elem,z[1]=z[1].toLowerCase(),q[z]&&(F=q[z]));return void 0!==G.scale&&(F*=G.scale),F},N=function(z,G,F){var R,T,fa,Z,qa,na=new c.Vector3(z.x,z.y,z.z),ta=(new c.Vector3(G.x,G.y,G.z)).clone(),pa=null;ta.sub(na);var Fa=function(Ga,Ha){for(var Ja=null,Na=-1,hb=0,Xb=Ga.bonds.length;hb<Xb;hb++)if(Ga.bonds[hb]!=Ha.index){T=Ga.bonds[hb];fa=v[T];Z=new c.Vector3(fa.x,fa.y,fa.z);(qa=Z.clone()).sub(na);
(pa=qa.clone()).cross(ta);var Pb=pa.lengthSq();if(Pb>Na&&(Ja=pa,.1<(Na=Pb)))break}return Ja};1===z.bonds.length?1===G.bonds.length?(pa=ta.clone(),1E-4<Math.abs(pa.x)?pa.y+=1:pa.x+=1):(R=(F+1)%G.bonds.length,T=G.bonds[R],fa=v[T],Z=new c.Vector3(fa.x,fa.y,fa.z),(qa=Z.clone()).sub(na),(pa=qa.clone()).cross(ta)):.01>(pa=Fa(z,G)).lengthSq()&&(z=Fa(G,z),null!=z&&(pa=z));return.01>pa.lengthSq()&&(pa=ta.clone(),1E-4<Math.abs(pa.x)?pa.y+=1:pa.x+=1),pa.cross(ta),pa.normalize(),pa},Q=function(z,G,F,R,T,fa){z[F]=
R.x;z[F+1]=R.y;z[F+2]=R.z;G[F]=fa.r;G[F+1]=fa.g;G[F+2]=fa.b;z[F+3]=T.x;z[F+4]=T.y;z[F+5]=T.z;G[F+3]=fa.r;G[F+4]=fa.g;G[F+5]=fa.b},H=function(z,G){if(z.style.sphere){var F=z.style.sphere;if(!F.hidden){var R=c.getColorFromStyle(z,F);F=K(z,F);if((!0===z.clickable||z.hoverable)&&void 0!==z.intersectionShape){var T=new c.Vector3(z.x,z.y,z.z);z.intersectionShape.sphere.push(new c.Sphere(T,F))}c.GLDraw.drawSphere(G,z,F,R)}}},V=function(z,G){if(z.style.sphere){var F=z.style.sphere;if(!F.hidden){var R=K(z,
F);F=c.getColorFromStyle(z,F);G=G.updateGeoGroup(1);var T=G.vertices,fa=3*T,Z=G.vertexArray,qa=G.colorArray,na=G.radiusArray;(Z[fa]=z.x,Z[fa+1]=z.y,Z[fa+2]=z.z,qa[fa]=F.r,qa[fa+1]=F.g,qa[fa+2]=F.b,na[T]=R,!0!==z.clickable&&!z.hoverable||void 0===z.intersectionShape)||(F=new c.Vector3(z.x,z.y,z.z),z.intersectionShape.sphere.push(new c.Sphere(F,R)));G.vertices+=1}}},W=function(z,G,F,R){var T;z=z.updateGeoGroup(4);var fa=z.vertices,Z=3*fa,qa=z.vertexArray,na=z.colorArray;for(T=0;4>T;T++)qa[Z+3*T]=G.x,
qa[Z+3*T+1]=G.y,qa[Z+3*T+2]=G.z;G=z.normalArray;for(T=0;4>T;T++)na[Z+3*T]=R.r,na[Z+3*T+1]=R.g,na[Z+3*T+2]=R.b;G[Z+0]=-F;G[Z+1]=F;G[Z+2]=0;G[Z+3]=-F;G[Z+4]=-F;G[Z+5]=0;G[Z+6]=F;G[Z+7]=-F;G[Z+8]=0;G[Z+9]=F;G[Z+10]=F;G[Z+11]=0;z.vertices+=4;F=z.faceArray;R=z.faceidx;F[R+0]=fa;F[R+1]=fa+1;F[R+2]=fa+2;F[R+3]=fa+2;F[R+4]=fa+3;F[R+5]=fa;z.faceidx+=6},ha=function(z,G){if(z.style.sphere){var F=z.style.sphere;if(!F.hidden){var R=K(z,F);F=c.getColorFromStyle(z,F);if((!0===z.clickable||z.hoverable)&&void 0!==
z.intersectionShape){var T=new c.Vector3(z.x,z.y,z.z);z.intersectionShape.sphere.push(new c.Sphere(T,R))}W(G,z,R,F)}}},U=function(z,G,F,R,T){var fa;z=z.updateGeoGroup(4);var Z=z.vertices,qa=z.vertexArray,na=z.colorArray,ta=z.radiusArray,pa=z.normalArray,Fa=T.r,Ga=T.g;T=T.b;for(var Ha=3*Z,Ja=0;4>Ja;Ja++)qa[Ha]=G.x,pa[Ha]=F.x,na[Ha]=Fa,qa[++Ha]=G.y,pa[Ha]=F.y,na[Ha]=Ga,qa[++Ha]=G.z,pa[Ha]=F.z,na[Ha]=2>Ja?T:(fa=void 0,0==(fa=-T)&&(fa=-1E-4),fa),Ha++;z.vertices+=4;ta[Z]=-R;ta[Z+1]=R;ta[Z+2]=-R;ta[Z+3]=
R;G=z.faceArray;F=z.faceidx;G[F+0]=Z;G[F+1]=Z+1;G[F+2]=Z+2;G[F+3]=Z+2;G[F+4]=Z+3;G[F+5]=Z;z.faceidx+=6},S=function(z,G){G=G||{};var F,R,T,fa=new c.Object3D,Z=[],qa={},na={},ta=H,pa=null,Fa=null;G.supportsImposters?(ta=ha,(pa=new c.Geometry(!0)).imposter=!0,(Fa=new c.Geometry(!0,!0)).imposter=!0,Fa.sphereGeometry=new c.Geometry(!0),Fa.sphereGeometry.imposter=!0,Fa.drawnCaps={}):G.supportsAIA?(ta=V,(pa=new c.Geometry(!1,!0,!0)).instanced=!0,Fa=new c.Geometry(!0)):(pa=new c.Geometry(!0),Fa=new c.Geometry(!0));
var Ga={},Ha=[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];var Ja=0;for(R=z.length;Ja<R;Ja++){var Na=z[Ja];if(Na&&Na.style){for(F in(Na.clickable||Na.hoverable)&&void 0===Na.intersectionShape&&(Na.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),T={line:void 0,cross:void 0,stick:void 0,sphere:void 0})Na.style[F]?Na.style[F].opacity?T[F]=parseFloat(Na.style[F].opacity):T[F]=1:T[F]=void 0,Ga[F]?null!=T[F]&&Ga[F]!=T[F]&&(console.log("Warning: "+F+" opacity is ambiguous"),Ga[F]=1):
Ga[F]=T[F];ta(Na,pa);var hb=Na;if(hb.style.clicksphere){var Xb=hb.style.clicksphere;if(!Xb.hidden){var Pb=K(hb,Xb);if((!0===hb.clickable||hb.hoverable)&&void 0!==hb.intersectionShape){var Lb=new c.Vector3(hb.x,hb.y,hb.z);hb.intersectionShape.sphere.push(new c.Sphere(Lb,Pb))}}}var xb=Na,Kb=na;if(xb.style.cross){var qb=xb.style.cross;if(!qb.hidden){var dc=qb.linewidth||1;Kb[dc]||(Kb[dc]=new c.Geometry);var tc=Kb[dc].updateGeoGroup(6),ab=K(xb,qb),Va=[[ab,0,0],[-ab,0,0],[0,ab,0],[0,-ab,0],[0,0,ab],[0,
0,-ab]],ob=xb.clickable||xb.hoverable;ob&&void 0===xb.intersectionShape&&(xb.intersectionShape={sphere:[],cylinder:[],line:[]});for(var fb=c.getColorFromStyle(xb,qb),ka=tc.vertexArray,t=tc.colorArray,Ia=0;6>Ia;Ia++){var Ca=3*tc.vertices;if(tc.vertices++,ka[Ca]=xb.x+Va[Ia][0],ka[Ca+1]=xb.y+Va[Ia][1],ka[Ca+2]=xb.z+Va[Ia][2],t[Ca]=fb.r,t[Ca+1]=fb.g,t[Ca+2]=fb.b,ob){var Ra=new c.Vector3(Va[Ia][0],Va[Ia][1],Va[Ia][2]);Ra.multiplyScalar(.1);Ra.set(Ra.x+xb.x,Ra.y+xb.y,Ra.z+xb.z);xb.intersectionShape.line.push(Ra)}}}}var jb=
void 0,Ua=void 0,gb=void 0,Xa=void 0,Za=Na,Cb=z,mb=qa;if(Za.style.line){var bc=Za.style.line;if(!bc.hidden){var wc=bc.linewidth||1;mb[wc]||(mb[wc]=new c.Geometry);for(var Hb=mb[wc].updateGeoGroup(6*Za.bonds.length),Gb=Hb.vertexArray,tb=Hb.colorArray,zb=0;zb<Za.bonds.length;zb++){var Qa=Cb[Za.bonds[zb]];if(Qa.style.line&&!(Za.index>=Qa.index)){var Ab=new c.Vector3(Za.x,Za.y,Za.z),jc=new c.Vector3(Qa.x,Qa.y,Qa.z),Zb=Ab.clone().add(jc).multiplyScalar(.5),cc=!1,r=Za.clickable||Za.hoverable,E=Qa.clickable||
Qa.hoverable;(r||E)&&(r&&(void 0===Za.intersectionShape&&(Za.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Za.intersectionShape.line.push(Ab),Za.intersectionShape.line.push(Zb)),E&&(void 0===Qa.intersectionShape&&(Qa.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}),Qa.intersectionShape.line.push(Zb),Qa.intersectionShape.line.push(jc)));var ea=c.getColorFromStyle(Za,Za.style.line),ja=c.getColorFromStyle(Qa,Qa.style.line);if(Za.bondStyles&&Za.bondStyles[zb]){var va=Za.bondStyles[zb];
if(!va.iswire)continue;va.singleBond&&(cc=!0);void 0!==va.color1&&(ea=c.CC.color(va.color1));void 0!==va.color2&&(ja=c.CC.color(va.color2))}var Aa,xa,Ba=3*Hb.vertices;if(1<Za.bondOrder[zb]&&4>Za.bondOrder[zb]&&!cc){var Ea=N(Za,Qa,zb),za=jc.clone();za.sub(Ab);2==Za.bondOrder[zb]?(Ea.multiplyScalar(.1),(Xa=Ab.clone()).add(Ea),(gb=Ab.clone()).sub(Ea),(Ua=Xa.clone()).add(za),(jb=gb.clone()).add(za),ea==ja?(Hb.vertices+=4,Q(Gb,tb,Ba,Xa,Ua,ea),Q(Gb,tb,Ba+6,gb,jb,ea)):(Hb.vertices+=8,za.multiplyScalar(.5),
(Aa=Xa.clone()).add(za),(xa=gb.clone()).add(za),Q(Gb,tb,Ba,Xa,Aa,ea),Q(Gb,tb,Ba+6,Aa,Ua,ja),Q(Gb,tb,Ba+12,gb,xa,ea),Q(Gb,tb,Ba+18,xa,jb,ja))):3==Za.bondOrder[zb]&&(Ea.multiplyScalar(.1),(Xa=Ab.clone()).add(Ea),(gb=Ab.clone()).sub(Ea),(Ua=Xa.clone()).add(za),(jb=gb.clone()).add(za),ea==ja?(Hb.vertices+=6,Q(Gb,tb,Ba,Ab,jc,ea),Q(Gb,tb,Ba+6,Xa,Ua,ea),Q(Gb,tb,Ba+12,gb,jb,ea)):(Hb.vertices+=12,za.multiplyScalar(.5),(Aa=Xa.clone()).add(za),(xa=gb.clone()).add(za),Q(Gb,tb,Ba,Ab,Zb,ea),Q(Gb,tb,Ba+6,Zb,jc,
ja),Q(Gb,tb,Ba+12,Xa,Aa,ea),Q(Gb,tb,Ba+18,Aa,Ua,ja),Q(Gb,tb,Ba+24,gb,xa,ea),Q(Gb,tb,Ba+30,xa,jb,ja)))}else ea==ja?(Hb.vertices+=2,Q(Gb,tb,Ba,Ab,jc,ea)):(Hb.vertices+=4,Q(Gb,tb,Ba,Ab,Zb,ea),Q(Gb,tb,Ba+6,Zb,jc,ja))}}}}var Sa=void 0,eb=void 0,Ma=void 0,sb=void 0,Yb=void 0,nc=void 0,oc=void 0,Nb=void 0,sc=void 0,xc=void 0,Gc=void 0,$b=void 0,Cc=void 0,kc=void 0,lb=Na,Vc=z,Sb=Fa;if(lb.style.stick){var Eb=lb.style.stick;if(!Eb.hidden){var hc=Eb.radius||.25,Ib=hc,lc=Eb.singleBonds||!1,Ob=0,yb=0,Ta=c.getColorFromStyle(lb,
Eb);!lb.capDrawn&&4>lb.bonds.length&&(Ob=2);var Rb=c.GLDraw.drawCylinder;Sb.imposter&&(Rb=U);for($b=0;$b<lb.bonds.length;$b++){var Fb=Vc[lb.bonds[$b]];if(lb.index<Fb.index){var Yc=Fb.style;if(Yc.stick&&!Yc.stick.hidden){var kb=c.getColorFromStyle(Fb,Yc.stick);if(Ib=hc,Gc=lc,lb.bondStyles&&lb.bondStyles[$b]){if((xc=lb.bondStyles[$b]).iswire)continue;xc.radius&&(Ib=xc.radius);xc.singleBond&&(Gc=!0);void 0!==xc.color1&&(Ta=c.CC.color(xc.color1));void 0!==xc.color2&&(kb=c.CC.color(xc.color2))}var Db=
new c.Vector3(lb.x,lb.y,lb.z),Ub=new c.Vector3(Fb.x,Fb.y,Fb.z);if(1===lb.bondOrder[$b]||Gc||3<lb.bondOrder[$b]){if(!Fb.capDrawn&&4>Fb.bonds.length&&(yb=2),Ta!=kb?(Rb(Sb,Db,Ma=(new c.Vector3).addVectors(Db,Ub).multiplyScalar(.5),Ib,Ta,Ob,0),Rb(Sb,Ma,Ub,Ib,kb,0,yb)):Rb(Sb,Db,Ub,Ib,Ta,Ob,yb),kc=lb.clickable||lb.hoverable,Cc=Fb.clickable||Fb.hoverable,kc||Cc){if(Ma||=(new c.Vector3).addVectors(Db,Ub).multiplyScalar(.5),kc){var Nc=new c.Cylinder(Db,Ma,Ib),yd=new c.Sphere(Db,Ib);lb.intersectionShape.cylinder.push(Nc);
lb.intersectionShape.sphere.push(yd)}if(Cc){var id=new c.Cylinder(Ub,Ma,Ib),zd=new c.Sphere(Ub,Ib);Fb.intersectionShape.cylinder.push(id);Fb.intersectionShape.sphere.push(zd)}}}else if(1<lb.bondOrder[$b]){var Mc=0,Oc=0;Ib!=hc&&(Mc=2,Oc=2);var Jb,yc,zc,Ec,Fc,dd=Ub.clone(),Rc=null;dd.sub(Db);Rc=N(lb,Fb,$b);2==lb.bondOrder[$b]?(Jb=Ib/2.5,Rc.multiplyScalar(1.5*Jb),(yc=Db.clone()).add(Rc),(zc=Db.clone()).sub(Rc),(Ec=yc.clone()).add(dd),(Fc=zc.clone()).add(dd),Ta!=kb?(Ma=(new c.Vector3).addVectors(yc,Ec).multiplyScalar(.5),
eb=(new c.Vector3).addVectors(zc,Fc).multiplyScalar(.5),Rb(Sb,yc,Ma,Jb,Ta,Mc,0),Rb(Sb,Ma,Ec,Jb,kb,0,Oc),Rb(Sb,zc,eb,Jb,Ta,Mc,0),Rb(Sb,eb,Fc,Jb,kb,0,Oc)):(Rb(Sb,yc,Ec,Jb,Ta,Mc,Oc),Rb(Sb,zc,Fc,Jb,Ta,Mc,Oc)),kc=lb.clickable||lb.hoverable,Cc=Fb.clickable||Fb.hoverable,(kc||Cc)&&(Ma||=(new c.Vector3).addVectors(yc,Ec).multiplyScalar(.5),eb||=(new c.Vector3).addVectors(zc,Fc).multiplyScalar(.5),kc&&(sc=new c.Cylinder(yc,Ma,Jb),Nb=new c.Cylinder(zc,eb,Jb),lb.intersectionShape.cylinder.push(sc),lb.intersectionShape.cylinder.push(Nb)),
Cc&&(nc=new c.Cylinder(Ec,Ma,Jb),Yb=new c.Cylinder(Fc,eb,Jb),Fb.intersectionShape.cylinder.push(nc),Fb.intersectionShape.cylinder.push(Yb)))):3==lb.bondOrder[$b]&&(Jb=Ib/4,Rc.cross(dd),Rc.normalize(),Rc.multiplyScalar(3*Jb),(yc=Db.clone()).add(Rc),(zc=Db.clone()).sub(Rc),(Ec=yc.clone()).add(dd),(Fc=zc.clone()).add(dd),Ta!=kb?(Ma=(new c.Vector3).addVectors(yc,Ec).multiplyScalar(.5),eb=(new c.Vector3).addVectors(zc,Fc).multiplyScalar(.5),Sa=(new c.Vector3).addVectors(Db,Ub).multiplyScalar(.5),Rb(Sb,
yc,Ma,Jb,Ta,Mc,0),Rb(Sb,Ma,Ec,Jb,kb,0,Oc),Rb(Sb,Db,Sa,Jb,Ta,Ob,0),Rb(Sb,Sa,Ub,Jb,kb,0,yb),Rb(Sb,zc,eb,Jb,Ta,Mc,0),Rb(Sb,eb,Fc,Jb,kb,0,Oc)):(Rb(Sb,yc,Ec,Jb,Ta,Mc,Oc),Rb(Sb,Db,Ub,Jb,Ta,Ob,yb),Rb(Sb,zc,Fc,Jb,Ta,Mc,Oc)),kc=lb.clickable||lb.hoverable,Cc=Fb.clickable||Fb.hoverable,(kc||Cc)&&(Ma||=(new c.Vector3).addVectors(yc,Ec).multiplyScalar(.5),eb||=(new c.Vector3).addVectors(zc,Fc).multiplyScalar(.5),Sa||=(new c.Vector3).addVectors(Db,Ub).multiplyScalar(.5),kc&&(sc=new c.Cylinder(yc.clone(),Ma.clone(),
Jb),Nb=new c.Cylinder(zc.clone(),eb.clone(),Jb),oc=new c.Cylinder(Db.clone(),Sa.clone(),Jb),lb.intersectionShape.cylinder.push(sc),lb.intersectionShape.cylinder.push(Nb),lb.intersectionShape.cylinder.push(oc)),Cc&&(nc=new c.Cylinder(Ec.clone(),Ma.clone(),Jb),Yb=new c.Cylinder(Fc.clone(),eb.clone(),Jb),sb=new c.Cylinder(Ub.clone(),Sa.clone(),Jb),Fb.intersectionShape.cylinder.push(nc),Fb.intersectionShape.cylinder.push(Yb),Fb.intersectionShape.cylinder.push(sb))))}}}}var nd=!1,od=0,pd=!1;for($b=0;$b<
lb.bonds.length;$b++)Gc=lc,lb.bondStyles&&lb.bondStyles[$b]&&((xc=lb.bondStyles[$b]).singleBond&&(Gc=!0),xc.radius&&xc.radius!=hc&&(pd=!0)),(Gc||1==lb.bondOrder[$b])&&od++;pd?0<od&&(nd=!0):0==od&&0<lb.bonds.length&&(nd=!0);nd&&(Ib=hc,Sb.imposter?W(Sb.sphereGeometry,lb,Ib,Ta):c.GLDraw.drawSphere(Sb,lb,Ib,Ta))}}void 0===Na.style.cartoon||Na.style.cartoon.hidden||("spectrum"!==Na.style.cartoon.color||"number"!=typeof Na.resi||Na.hetflag||(Na.resi<Ha[0]&&(Ha[0]=Na.resi),Na.resi>Ha[1]&&(Ha[1]=Na.resi)),
Z.push(Na))}}if(0<Z.length&&c.drawCartoon(fa,Z,Ha,m),pa&&0<pa.vertices){pa.initTypedArrays();var Sc=null,Zc=null;pa.imposter?Sc=new c.SphereImposterMaterial({ambient:0,vertexColors:!0,reflectivity:0}):pa.instanced?(Zc=new c.Geometry(!0),c.GLDraw.drawSphere(Zc,{x:0,y:0,z:0},1,new c.Color(.5,.5,.5)),Zc.initTypedArrays(),Sc=new c.InstancedMaterial({sphereMaterial:new c.MeshLambertMaterial({ambient:0,vertexColors:!0,reflectivity:0}),sphere:Zc})):Sc=new c.MeshLambertMaterial({ambient:0,vertexColors:!0,
reflectivity:0});1>Ga.sphere&&0<=Ga.sphere&&(Sc.transparent=!0,Sc.opacity=Ga.sphere);Zc=new c.Mesh(pa,Sc);fa.add(Zc)}if(0<Fa.vertices){var Uc=null,jd=null,Ac=Fa.sphereGeometry;Ac&&void 0!==Ac.vertices&&0!=Ac.vertices||(Ac=null);Fa.initTypedArrays();Ac&&Ac.initTypedArrays();var kd={ambient:0,vertexColors:!0,reflectivity:0};Fa.imposter?(Uc=new c.StickImposterMaterial(kd),jd=new c.SphereImposterMaterial(kd)):(Uc=new c.MeshLambertMaterial(kd),jd=new c.MeshLambertMaterial(kd),Uc.wireframe&&(Fa.setUpWireframe(),
Ac&&Ac.setUpWireframe()));1>Ga.stick&&0<=Ga.stick&&(Uc.transparent=!0,Uc.opacity=Ga.stick,jd.transparent=!0,jd.opacity=Ga.stick);var Ad=new c.Mesh(Fa,Uc);if(fa.add(Ad),Ac){var qd=new c.Mesh(Ac,jd);fa.add(qd)}}for(Ja in qa)if(qa.hasOwnProperty(Ja)){var rd=Ja;var sd=new c.LineBasicMaterial({linewidth:rd,vertexColors:!0});1>Ga.line&&0<=Ga.line&&(sd.transparent=!0,sd.opacity=Ga.line);qa[Ja].initTypedArrays();var Fd=new c.Line(qa[Ja],sd,c.LinePieces);fa.add(Fd)}for(Ja in na)if(na.hasOwnProperty(Ja)){rd=
Ja;var b=new c.LineBasicMaterial({linewidth:rd,vertexColors:!0});1>Ga.cross&&0<=Ga.cross&&(b.transparent=!0,b.opacity=Ga.cross);na[Ja].initTypedArrays();var f=new c.Line(na[Ja],b,c.LinePieces);fa.add(f)}if(l&&n.symmetries&&0<n.symmetries.length){var A,I=new c.Object3D;for(A=0;A<n.symmetries.length;A++){var O=new c.Object3D;(O=fa.clone()).matrix.copy(n.symmetries[A]);O.matrixAutoUpdate=!1;I.add(O)}return I}return fa};this.getInternalState=function(){return{atoms:v,frames:C}};this.setInternalState=
function(z){v=z.atoms;C=z.frames;e=null};this.getCrystData=function(){return n.cryst?n.cryst:null};this.setCrystData=function(z,G,F,R,T,fa){n.cryst={a:z||1,b:G||1,c:F||1,alpha:R||90,beta:T||90,gamma:fa||90}};this.getSymmetries=function(){return void 0===n.symmetries&&(n.symmetries=[D]),n.symmetries};this.setSymmetries=function(z){n.symmetries=void 0===z?[D]:z};this.getID=function(){return p};this.getNumFrames=function(){return null!=C.numFrames?C.numFrames:C.length};var ba=function(z,G,F,R){z=G-z;
return z<-F?G+R:z>F?G-R:G};this.setFrame=function(z,G){var F=this.getNumFrames();let R=this;return new Promise(function(T,fa){(0==F&&T(),(0>z||z>=F)&&(z=F-1),null!=C.url)?c.getbin(C.url+"/traj/frame/"+z+"/"+C.path,null,"POST").then(function(Z){Z=new Float32Array(Z,44);for(var qa=0,na=0;na<v.length;na++)v[na].x=Z[qa++],v[na].y=Z[qa++],v[na].z=Z[qa++];if(M&&L&&M&&L){Z=M[0];qa=M[1];na=M[2];for(var ta=.9*Z,pa=.9*qa,Fa=.9*na,Ga=0;Ga<L.length;Ga++)for(var Ha=L[Ga],Ja=1;Ja<Ha.length;Ja++){var Na=v[Ha[Ja][0]],
hb=v[Ha[Ja][1]];Na.x=ba(hb.x,Na.x,ta,Z);Na.y=ba(hb.y,Na.y,pa,qa);Na.z=ba(hb.z,Na.z,Fa,na)}}T()}).catch(fa):(v=C[z],T());e=null;y&&z<y.length&&(n=y[z],R.unitCellObjects&&G&&(G.removeUnitCell(R),G.addUnitCell(R)))})};this.addFrame=function(z){C.push(z)};this.vibrate=function(z,G,F,R,T){G=G||1;var fa=0,Z=z=z||10;F&&(fa=-z,Z=z);fa<Z&&(C=[]);for(F=fa;F<Z;F++){fa=[];var qa=C.length;if(0!=F||T){for(var na=0;na<v.length;na++){var ta=c.getAtomProperty(v[na],"dx"),pa=c.getAtomProperty(v[na],"dy"),Fa=c.getAtomProperty(v[na],
"dz"),Ga=new c.Vector3(ta,pa,Fa),Ha=new c.Vector3(v[na].x,v[na].y,v[na].z);Ga.multiplyScalar(F*G/z);Ha.add(Ga);Ga={};for(var Ja in v[na])Ga[Ja]=v[na][Ja];if(Ga.x=Ha.x,Ga.y=Ha.y,Ga.z=Ha.z,fa.push(Ga),R&&T){var Na=bb.extend({},T);ta=new c.Vector3(ta,pa,Fa);(ta.multiplyScalar(G),ta.add(Ha),Na.start=Ha,Na.end=ta,Na.frame=qa,Na.color)||((Ha=Ga.style.sphere)||(Ha=Ga.style.stick),Ha||=Ga.style.line,Na.color=c.getColorFromStyle(Ga,Ha));R.addArrow(Na)}}C.push(fa)}else C.push(v)}};this.setAtomDefaults=function(z){for(var G=
0;G<z.length;G++){var F=z[G];F&&(F.style=F.style||bb.extend(!0,{},h),F.color=F.color||k[F.elem]||B,F.model=p,(F.clickable||F.hoverable)&&(F.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]}))}};this.addMolData=function(z,G,F){F=F||{};z=c.GLModel.parseMolData(z,G,F);l=!F.duplicateAssemblyAtoms;G=z.modelData;if(G&&(Array.isArray(G)?(n=G[0],F.frames&&(y=G)):n=G),M=z.box?z.box:null,0==C.length){for(G=0;G<z.length;G++)0!=z[G].length&&C.push(z[G]);C[0]&&(v=C[0])}else if(F.frames)for(G=0;G<z.length;G++)C.push(z[G]);
else for(G=0;G<z.length;G++)this.addAtoms(z[G]);for(z=0;z<C.length;z++)this.setAtomDefaults(C[z],p);F.vibrate&&F.vibrate.frames&&F.vibrate.amplitude&&this.vibrate(F.vibrate.frames,F.vibrate.amplitude);F.style&&this.setStyle({},F.style)};this.setDontDuplicateAtoms=function(z){l=z};this.setModelData=function(z){n=z};var Y=function(z,G){if(z==G)return!0;if("string"==typeof G&&"number"==typeof z&&(G=G.match(/(-?\d+)\s*-\s*(-?\d+)/))){var F=parseInt(G[1]),R=parseInt(G[2]);if(G&&z>=F&&z<=R)return!0}return!1};
const aa=function(z,G){if("object"!=typeof z||z.__cache_created)return z;const F={};for(const fa in z){var R=z[fa];if(Array.isArray(R)){F[fa]=[];for(var T=0;T<R.length;T++)F[fa].push(aa(R[T],G))}else F[fa]="object"==typeof R&&"properties"!=fa?aa(R,G):R;if("and"==fa||"or"==fa){R=[];for(const Z of F[fa]){T=new Set;for(const qa of G.selectedAtoms(Z))T.add(qa.index);R.push(T)}if("and"==fa){T=new Set(R[0]);for(const Z of R.splice(1)){R=T;T=Z;const qa=new Set;for(const na of T)R.has(na)&&qa.add(na);T=qa}F[fa].__cached_results=
T}else if("or"==fa){T=new Set;for(const Z of R)for(const qa of Z)T.add(qa);F[fa].__cached_results=T}}}return F.__cache_created=!0,F};this.atomIsSelected=function(z,G){if(void 0===G)return!0;var F=!!G.invert,R=!0,T;for(T in G)if("and"==T||"or"==T||"not"==T)if("not"==T){if(this.atomIsSelected(z,G[T])){R=!1;break}}else{if(void 0===G[T].__cached_results&&(G=aa(G,this)),!(R=G[T].__cached_results.has(z.index)))break}else if("predicate"===T){if(!G.predicate(z)){R=!1;break}}else if("properties"==T&&z[T])for(var fa in G.properties){if(!fa.startsWith("__cache")){if(void 0===
z.properties[fa]){R=!1;break}if(z.properties[fa]!=G.properties[fa]){R=!1;break}}}else if(G.hasOwnProperty(T)&&"props"!=T&&"invert"!=T&&"model"!=T&&"byres"!=T&&"expand"!=T&&"within"!=T&&"and"!=T&&"or"!=T&&"not"!=T&&!T.startsWith("__cache")){if(void 0===z[T]){R=!1;break}var Z=!1;if("bonds"===T){if(G[T]!=z.bonds.length){R=!1;break}}else if(bb.isArray(G[T])){var qa=G[T],na=z[T];for(let ta=0;ta<qa.length;ta++)if(Y(na,qa[ta])){Z=!0;break}if(!Z){R=!1;break}}else if(!Y(z[T],G[T])){R=!1;break}}return F?!R:
R};const ia=function(z,G){var F=G.x-z.x,R=G.y-z.y;z=G.z-z.z;return F*F+R*R+z*z};this.selectedAtoms=function(z,G){var F=[];z=aa(z||{},this);G||=v;for(var R=G.length,T=0;T<R;T++){var fa=G[T];fa&&this.atomIsSelected(fa,z)&&F.push(fa)}if(z.hasOwnProperty("expand")){G=parseFloat(z.expand);fa=G;if(0>=fa)R=F;else{R=c.getExtent(F);T=[[],[],[]];for(var Z=0;3>Z;Z++)T[0][Z]=R[0][Z]-fa,T[1][Z]=R[1][Z]+fa,T[2][Z]=R[2][Z];fa=[];for(let pa=0;pa<v.length;pa++){Z=v[pa].x;var qa=v[pa].y,na=v[pa].z;Z>=T[0][0]&&Z<=T[1][0]&&
qa>=T[0][1]&&qa<=T[1][1]&&na>=T[0][2]&&na<=T[1][2]&&(Z>=R[0][0]&&Z<=R[1][0]&&qa>=R[0][1]&&qa<=R[1][1]&&na>=R[0][2]&&na<=R[1][2]||fa.push(v[pa]))}R=fa}T=F.length;fa=G*G;for(Z=0;Z<R.length;Z++)for(qa=0;qa<T;qa++)G=ia(R[Z],F[qa]),G<fa&&0<G&&F.push(R[Z])}if(z.hasOwnProperty("within")&&z.within.hasOwnProperty("sel")&&z.within.hasOwnProperty("distance")){R=this.selectedAtoms(z.within.sel,v);G={};T=parseFloat(z.within.distance);T*=T;for(fa=0;fa<R.length;fa++)for(Z=0;Z<F.length;Z++)qa=ia(R[fa],F[Z]),qa<T&&
0<qa&&(G[Z]=1);R=[];if(z.within.invert)for(var ta=0;ta<F.length;ta++)G[ta]||R.push(F[ta]);else for(ta in G)R.push(F[ta]);F=R}if(z.hasOwnProperty("byres"))for(z={},ta=[],G=[],qa=0;qa<F.length;qa++)if(na=F[qa],R=na.chain,T=na.resi,void 0===z[R]&&(z[R]={}),na.hasOwnProperty("resi")&&void 0===z[R][T])for(z[R][T]=!0,G.push(na);0<G.length;)if(R=(na=G.pop()).chain,T=na.resi,void 0===ta[na.index])for(ta[na.index]=!0,fa=0;fa<na.bonds.length;fa++)Z=v[na.bonds[fa]],void 0===ta[Z.index]&&Z.hasOwnProperty("resi")&&
Z.chain==R&&Z.resi==T&&(G.push(Z),F.push(Z));return F};this.addAtoms=function(z){e=null;var G,F=v.length,R=[];for(G=0;G<z.length;G++)void 0===z[G].index&&(z[G].index=G),void 0===z[G].serial&&(z[G].serial=G),R[z[G].index]=F+G;for(G=0;G<z.length;G++){F=z[G];var T=R[F.index],fa=bb.extend(!1,{},F);fa.index=T;fa.bonds=[];fa.bondOrder=[];fa.model=p;fa.style=fa.style||bb.extend(!0,{},h);void 0===fa.color&&(fa.color=k[fa.elem]||B);T=F.bonds?F.bonds.length:0;for(var Z=0;Z<T;Z++){var qa=R[F.bonds[Z]];void 0!==
qa&&(fa.bonds.push(qa),fa.bondOrder.push(F.bondOrder?F.bondOrder[Z]:1))}v.push(fa)}};this.removeAtoms=function(z){e=null;var G,F=[];for(G=0;G<z.length;G++)F[z[G].index]=!0;z=[];for(G=0;G<v.length;G++){var R=v[G];F[R.index]||z.push(R)}v=[];this.addAtoms(z)};this.setStyle=function(z,G,F){for(var R in void 0===G&&void 0===F&&(G=z,z={}),z)d.validAtomSelectionSpecs.hasOwnProperty(R)||console.log("Unknown selector "+R);for(R in G)d.validAtomStyleSpecs.hasOwnProperty(R)||console.log("Unknown style "+R);
var T=!1,fa=this;R=function(qa){var na=fa.selectedAtoms(z,qa);for(let ta=0;ta<qa.length;ta++)qa[ta]&&(qa[ta].capDrawn=!1);for(qa=0;qa<na.length;qa++){T=!0;(na[qa].clickable||na[qa].hoverable)&&(na[qa].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]});F||(na[qa].style={});for(let ta in G)G.hasOwnProperty(ta)&&(na[qa].style[ta]=na[qa].style[ta]||{},Object.assign(na[qa].style[ta],G[ta]))}};R(v);for(var Z=0;Z<C.length;Z++)C[Z]!==v&&R(C[Z]);T&&(e=null)};this.setClickable=function(z,G,F){for(var R in z)d.validAtomSelectionSpecs.hasOwnProperty(R)||
console.log("Unknown selector "+R);if(G=!!G,F&&"function"!=typeof F)console.log("Callback is not a function");else{R=this.selectedAtoms(z,v);var T=R.length;for(z=0;z<T;z++)R[z].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},R[z].clickable=G,F&&(R[z].callback=F);0<T&&(e=null)}};this.setHoverable=function(z,G,F,R){for(var T in z)d.validAtomSelectionSpecs.hasOwnProperty(T)||console.log("Unknown selector "+T);if(G=!!G,F&&"function"!=typeof F)console.log("Hover_callback is not a function");
else if(R&&"function"!=typeof R)console.log("Unhover_callback is not a function");else{T=this.selectedAtoms(z,v);var fa=T.length;for(z=0;z<fa;z++)T[z].intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]},T[z].hoverable=G,F&&(T[z].hover_callback=F),R&&(T[z].unhover_callback=R);0<fa&&(e=null)}};this.setColorByElement=function(z,G){var F;(F=null===e)||(F=u,F=!(G&&F?JSON.stringify(G)==JSON.stringify(F):G==F));if(F){u=G;var R=this.selectedAtoms(z,R);0<R.length&&(e=null);for(z=0;z<R.length;z++)F=
R[z],void 0!==G[F.elem]&&(F.color=G[F.elem])}};this.setColorByProperty=function(z,G,F,R){var T=this.selectedAtoms(z,T);u=null;0<T.length&&(e=null);void 0!==c.Gradient.builtinGradients[F]&&(F=new c.Gradient.builtinGradients[F]);R||=F.range();R||=c.getPropertyRange(T,G);for(z=0;z<T.length;z++){var fa=T[z];null!=c.getAtomProperty(fa,G)&&(fa.color=F.valueToHex(parseFloat(fa.properties[G]),R))}};this.setColorByFunction=function(z,G){var F=this.selectedAtoms(z,F);if("function"==typeof G)for(u=null,0<F.length&&
(e=null),z=0;z<F.length;z++){let R=F[z];R.color=G(R)}};this.toCDObject=function(z){var G={a:[],b:[]};z&&(G.s=[]);for(var F=0;F<v.length;F++){var R={},T=v[F];if(R.x=T.x,R.y=T.y,R.z=T.z,"C"!=T.elem&&(R.l=T.elem),z){for(var fa=0;fa<G.s.length&&JSON.stringify(T.style)!==JSON.stringify(G.s[fa]);)fa++;fa===G.s.length&&G.s.push(T.style);0!==fa&&(R.s=fa)}G.a.push(R);for(R=0;R<T.bonds.length;R++){fa=F;var Z=T.bonds[R];fa>=Z||(fa={b:fa,e:Z},Z=T.bondOrder[R],1!=Z&&(fa.o=Z),G.b.push(fa))}}return G};this.globj=
function(z,G){(null===e||G.regen)&&(e=S(v,G),g&&(z.remove(g),g=null),g=e.clone(),P&&(g.setVisible(!1),e.setVisible(!1)),z.add(g))};this.exportVRML=function(){return S(v,{supportsImposters:!1,supportsAIA:!1}).vrml()};this.removegl=function(z){g&&(void 0!==g.geometry&&g.geometry.dispose(),void 0!==g.material&&g.material.dispose(),z.remove(g),g=null);e=null};this.hide=function(){P=!0;g&&g.setVisible(!1);e&&e.setVisible(!1)};this.show=function(){P=!1;g&&g.setVisible(!0);e&&e.setVisible(!0)};this.addPropertyLabels=
function(z,G,F,R){var T=this.selectedAtoms(G,T);G=bb.extend(!0,{},R);for(R=0;R<T.length;R++){var fa=T[R],Z=null;void 0!==fa[z]?Z=String(fa[z]):(fa.properties[z],Z=String(fa.properties[z]));null!=Z&&(G.position=fa,F.addLabel(Z,G))}};this.addResLabels=function(z,G,F,R){var T=[],fa=function(Z,qa){var na=Z.selectedAtoms(z,na);Z={};for(var ta=0;ta<na.length;ta++){var pa=na[ta],Fa=pa.chain,Ga=pa.resn+""+pa.resi;Z[Fa]||(Z[Fa]={});Z[Fa][Ga]||(Z[Fa][Ga]=[]);Z[Fa][Ga].push(pa)}na=bb.extend(!0,{},F);for(let Ha in Z)if(Z.hasOwnProperty(Ha)){ta=
Z[Ha];for(let Ja in ta)if(ta.hasOwnProperty(Ja)){pa=ta[Ja];Fa=new c.Vector3(0,0,0);for(Ga=0;Ga<pa.length;Ga++){let Na=pa[Ga];Fa.x+=Na.x;Fa.y+=Na.y;Fa.z+=Na.z}Fa.divideScalar(pa.length);na.position=Fa;na.frame=qa;pa=G.addLabel(Ja,na,void 0,!0);T.push(pa)}}};if(R){R=this.getNumFrames();let Z=v;for(let qa=0;qa<R;qa++)C[qa]&&(v=C[qa],fa(this,qa));v=Z}else fa(this);return T};this.setCoordinatesFromURL=function(z,G){C=[];var F=this;return M&&function(){L=[];var R=new Int8Array(v.length);R.fill(0);for(var T=
function(qa,na,ta){ta.push([qa,na]);na=v[qa];R[qa]=1;for(var pa=0;pa<na.bonds.length;pa++){var Fa=na.bonds[pa];v[Fa]&&!R[Fa]&&T(Fa,qa,ta)}},fa=0;fa<v.length;fa++)if(v[fa]&&!R[fa]){var Z=[];T(fa,-1,Z);L.push(Z)}}(),new Promise(function(R,T){z.startsWith("http://")||(z="http://"+z);bb.get(z+"/traj/numframes/"+G,function(fa){isNaN(parseInt(fa))||(C.push(v),C.numFrames=fa,C.url=z,C.path=G,F.setFrame(0).then(function(){R()}).catch(T))})})};this.setCoordinates=function(z,G){if(!z)return[];if(/\.gz$/.test(G=
G||"")){G=G.replace(/\.gz$/,"");try{z=pako.inflate(z,{to:"string"})}catch(qa){console.log(qa)}}if({mdcrd:"",inpcrd:"",pdb:"",netcdf:""}.hasOwnProperty(G)){C=[];var F=v.length;z=d.parseCrd(z,G);for(G=0;G<z.length;){for(var R=[],T=0;T<F;T++){var fa={},Z;for(Z in v[T])fa[Z]=v[T][Z];R[T]=fa;R[T].x=z[G++];R[T].y=z[G++];R[T].z=z[G++]}C.push(R)}return v=C[0],C}return[]};this.addAtomSpecs=function(z){for(var G=0;G<z.length;G++)d.validAtomSelectionSpecs.hasOwnProperty(z[G])||d.validAtomSelectionSpecs.push(z[G])}}
var h={line:{}},q={H:1.2,He:1.4,Li:1.82,Be:1.53,B:1.92,C:1.7,N:1.55,O:1.52,F:1.47,Ne:1.54,Na:2.27,Mg:1.73,Al:1.84,Si:2.1,P:1.8,S:1.8,Cl:1.75,Ar:1.88,K:2.75,Ca:2.31,Ni:1.63,Cu:1.4,Zn:1.39,Ga:1.87,Ge:2.11,As:1.85,Se:1.9,Br:1.85,Kr:2.02,Rb:3.03,Sr:2.49,Pd:1.63,Ag:1.72,Cd:1.58,In:1.93,Sn:2.17,Sb:2.06,Te:2.06,I:1.98,Xe:2.16,Cs:3.43,Ba:2.68,Pt:1.75,Au:1.66,Hg:1.55,Tl:1.96,Pb:2.02,Bi:2.07,Po:1.97,At:2.02,Rn:2.2,Fr:3.48,Ra:2.83,U:1.86};d.validElements="H Li LI Na NA K C N O F P S CL Cl BR Br SE Se ZN Zn CU Cu NI Ni".split(" ");
d.validAtomSpecs={resn:{type:"string",valid:!0},x:{type:"number",valid:!1,step:.1},y:{type:"number",valid:!1,step:.1},z:{type:"number",valid:!1,step:.1},color:{type:"color",gui:!0},surfaceColor:{type:"color",gui:!0},elem:{type:"element",gui:!0},hetflag:{type:"boolean",valid:!1},chain:{type:"string",gui:!0},resi:{type:"number",gui:!0},icode:{type:"number",valid:!1,step:.1},rescode:{type:"number",valid:!1,step:.1},serial:{type:"number",valid:!1,step:.1},atom:{type:"string",valid:!1},bonds:{type:"array",
valid:!1},ss:{type:"string",valid:!1},singleBonds:{type:"boolean",valid:!1},bondOrder:{type:"array",valid:!1},properties:{type:"properties",valid:!1},b:{type:"number",valid:!1,step:.1},pdbline:{type:"string",valid:!1},clickable:{type:"boolean",valid:!1},callback:{type:"function",valid:!1},invert:{type:"boolean",valid:!1},reflectivity:{type:"number",gui:!0,step:.1},altLoc:{type:"invalid",valid:!1},sym:{type:"number",gui:!1}};d.validAtomSelectionSpecs=function(p,w){for(var v in w)w.hasOwnProperty(v)&&
(p[v]=w[v]);return p}(d.validAtomSpecs,{model:{type:"string",valid:!1},bonds:{type:"string",valid:!1},predicate:{type:"string",valid:!1},invert:{type:"string",valid:!1},byres:{type:"string",valid:!1},expand:{type:"string",valid:!1},within:{type:"string",valid:!1},and:{type:"string",valid:!1},or:{type:"string",valid:!1},not:{type:"string",valid:!1}});var x={hidden:{type:"boolean",gui:!0},singleBonds:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",
gui:!0,step:.1,default:1.5,min:0},scale:{type:"number",gui:!0,step:.1,default:1,min:.1}};d.validAtomStyleSpecs={line:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!0,step:.1,default:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0}},gui:!0},cross:{validItems:{hidden:{type:"boolean",gui:!0},linewidth:{type:"number",gui:!1,step:.1,default:1,min:0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,
default:1,min:.1},scale:{type:"number",gui:!0,step:.1,default:1,min:0}},gui:!0},stick:{validItems:{hidden:{type:"boolean",gui:!0},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},radius:{type:"number",gui:!0,step:.1,default:.25,min:.1},singleBonds:{type:"boolean",gui:!0}},gui:!0},sphere:{validItems:x,gui:!0},cartoon:{validItems:{style:{validItems:["trace","oval","rectangle","parabola","edged"],gui:!0},color:{type:"color",gui:!0},arrows:{type:"boolean",gui:!0},ribbon:{type:"boolean",
gui:!0},hidden:{type:"boolean",gui:!0},tubes:{type:"boolean",gui:!0},thickness:{type:"number",gui:!0,step:.1,default:1,min:0},width:{type:"number",gui:!0,step:.1,default:1,min:0},opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1}},gui:!0},colorfunc:{validItems:null,valid:!1},clicksphere:{validItems:x}};d.validSurfaceSpecs={opacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},colorscheme:{type:"colorscheme",gui:!0},color:{type:"color",gui:!0},voldata:{type:"number",gui:!1},volscheme:{type:"number",
gui:!1},map:{type:"number",gui:!1}};d.validLabelResSpecs={font:{type:"string",gui:!0},fontSize:{type:"number",gui:!0,step:1,default:12,min:1},fontColor:{type:"color",gui:!0},fontOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},borderThickness:{type:"number",gui:!0,step:.1,default:1,min:0},borderColor:{type:"color",gui:!0},borderOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,max:1},backgroundColor:{type:"color",gui:!0},backgroundOpacity:{type:"number",gui:!0,step:.1,default:1,min:0,
max:1},position:{type:"array",valid:!1},inFront:{type:"boolean",gui:!0},showBackground:{type:"boolean",gui:!0},fixed:{type:"boolean",gui:!0},alignment:{validItems:"topLeft topCenter topRight centerLeft center centerRight bottomLeft bottomCenter bottomRight".split(" "),gui:!0},scale:{type:"boolean",gui:!1}};return d.parseCrd=function(p,w){var v=[],C=0;if("pdb"==w)for(w=p.indexOf("\nATOM");-1!=w;){for(;"\nATOM"==p.slice(w,w+5)||"\nHETATM"==p.slice(w,w+7);)v[C++]=parseFloat(p.slice(w+31,w+39)),v[C++]=
parseFloat(p.slice(w+39,w+47)),v[C++]=parseFloat(p.slice(w+47,w+55)),w=p.indexOf("\n",w+54),"\nTER"==p.slice(w,w+4)&&(w=p.indexOf("\n",w+5));w=p.indexOf("\nATOM",w)}else"netcdf"==w?(p=new netcdfjs(p),v=[].concat.apply([],p.getDataVariable("coordinates"))):(v=p.indexOf("\n"),"inpcrd"==w&&(v=p.indexOf("\n",v+1)),v=p.slice(v+1).match(/\S+/g).map(parseFloat));return v},d.parseMolData=function(p,w,v){if(!p)return[];if(/\.gz$/.test(w=w||"")){w=w.replace(/\.gz$/,"");try{p=pako.inflate(p,{to:"string"})}catch(C){console.log(C)}}return void 0===
c.Parsers[w]&&(w=w.split(".").pop(),void 0===c.Parsers[w]&&(console.log("Unknown format: "+w),w=p instanceof Uint8Array?"mmtf":p.match(/^@<TRIPOS>MOLECULE/gm)?"mol2":p.match(/^data_/gm)&&p.match(/^loop_/gm)?"cif":p.match(/^HETATM/gm)||p.match(/^ATOM/gm)?"pdb":p.match(/ITEM: TIMESTEP/gm)?"lammpstrj":p.match(/^.*\n.*\n.\s*(\d+)\s+(\d+)/gm)?"sdf":p.match(/^%VERSION\s+VERSION_STAMP/gm)?"prmtop":"xyz",console.log("Best guess: "+w))),(0,c.Parsers[w])(p,v)},d}();c.GLShape=function(){function d(w){w=w||{};
c.ShapeIDCount++;this.boundingSphere=new c.Sphere;this.intersectionShape={sphere:[],cylinder:[],line:[],triangle:[]};p(this,w);var v=[],C=null,M=null,L=new c.Geometry(!0),P=new c.Geometry(!0);this.updateStyle=function(e){for(var g in e)w[g]=e[g];p(this,w)};this.addCustom=function(e){e.vertexArr=e.vertexArr||[];e.faceArr=e.faceArr||[];e.normalArr=e.normalArr||[];x(this,L,e)};this.addSphere=function(e){e.center=e.center||{x:0,y:0,z:0};e.radius=e.radius?c.Math.clamp(e.radius,0,1/0):1.5;e.color=c.CC.color(e.color);
this.intersectionShape.sphere.push(new c.Sphere(e.center,e.radius));c.GLDraw.drawSphere(L,e.center,e.radius,e.color);v.push({centroid:new c.Vector3(e.center.x,e.center.y,e.center.z)});e=L.updateGeoGroup(0);q(this.boundingSphere,v,e.vertexArray,e.vertices)};this.addBox=function(e){var g=e.dimensions||{w:1,h:1,d:1},u=g.w;"number"==typeof g.w&&(u={x:g.w,y:0,z:0});var n=g.h;"number"==typeof g.h&&(n={x:0,y:g.h,z:0});var y=g.d;"number"==typeof g.d&&(y={x:0,y:0,z:g.d});g=e.corner;null==g&&(g=void 0!==e.center?
{x:e.center.x-.5*(u.x+n.x+y.x),y:e.center.y-.5*(u.y+n.y+y.y),z:e.center.z-.5*(u.z+n.z+y.z)}:{x:0,y:0,z:0});u=[{x:g.x,y:g.y,z:g.z},{x:g.x+u.x,y:g.y+u.y,z:g.z+u.z},{x:g.x+n.x,y:g.y+n.y,z:g.z+n.z},{x:g.x+u.x+n.x,y:g.y+u.y+n.y,z:g.z+u.z+n.z},{x:g.x+y.x,y:g.y+y.y,z:g.z+y.z},{x:g.x+u.x+y.x,y:g.y+u.y+y.y,z:g.z+u.z+y.z},{x:g.x+n.x+y.x,y:g.y+n.y+y.y,z:g.z+n.z+y.z},{x:g.x+u.x+n.x+y.x,y:g.y+u.y+n.y+y.y,z:g.z+u.z+n.z+y.z}];n=[];y=[];n.splice(n.length,0,u[0],u[1],u[2],u[3]);y.splice(y.length,0,0,2,1,1,2,3);g=
4;n.splice(n.length,0,u[2],u[3],u[6],u[7]);y.splice(y.length,0,g+0,g+2,g+1,g+1,g+2,g+3);g+=4;n.splice(n.length,0,u[4],u[5],u[0],u[1]);y.splice(y.length,0,g+0,g+2,g+1,g+1,g+2,g+3);g+=4;n.splice(n.length,0,u[6],u[7],u[4],u[5]);y.splice(y.length,0,g+0,g+2,g+1,g+1,g+2,g+3);g+=4;n.splice(n.length,0,u[3],u[1],u[7],u[5]);y.splice(y.length,0,g+0,g+2,g+1,g+1,g+2,g+3);g+=4;n.splice(n.length,0,u[2],u[6],u[0],u[4]);y.splice(y.length,0,g+0,g+2,g+1,g+1,g+2,g+3);e=bb.extend({},e);e.vertexArr=n;e.faceArr=y;e.normalArr=
[];x(this,L,e);e=new c.Vector3;v.push({centroid:e.addVectors(u[0],u[7]).multiplyScalar(.5)});e=L.updateGeoGroup(0);q(this.boundingSphere,v,e.vertexArray,e.vertices)};this.addCylinder=function(e){e.start=e.start||{};e.end=e.end||{};var g=new c.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),u=new c.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===u.x&&(u.x=3);var n=e.radius||.1,y=c.CC.color(e.color);this.intersectionShape.cylinder.push(new c.Cylinder(g,u,n));c.GLDraw.drawCylinder(L,g,u,n,y,e.fromCap,
e.toCap);e=new c.Vector3;v.push({centroid:e.addVectors(g,u).multiplyScalar(.5)});g=L.updateGeoGroup(0);q(this.boundingSphere,v,g.vertexArray,g.vertices)};this.addDashedCylinder=function(e){e.start=e.start||{};e.end=e.end||{};e.dashLength=e.dashLength||.25;e.gapLength=e.gapLength||.25;var g=new c.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),u=new c.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===u.x&&(u.x=3);var n=e.radius||.1,y=c.CC.color(e.color),D=Math.sqrt(Math.pow(g.x-u.x,2)+Math.pow(g.y-u.y,
2)+Math.pow(g.z-u.z,2)),l=D/(e.gapLength+e.dashLength),B=new c.Vector3(e.start.x||0,e.start.y||0,e.start.z||0);new c.Vector3(e.end.x,e.end.y||0,e.end.z||0);for(var k=new c.Vector3((u.x-g.x)/(D/e.gapLength),(u.y-g.y)/(D/e.gapLength),(u.z-g.z)/(D/e.gapLength)),J=new c.Vector3((u.x-g.x)/(D/e.dashLength),(u.y-g.y)/(D/e.dashLength),(u.z-g.z)/(D/e.dashLength)),m=0;m<l;m++)D=new c.Vector3(B.x+J.x,B.y+J.y,B.z+J.z),this.intersectionShape.cylinder.push(new c.Cylinder(B,D,n)),c.GLDraw.drawCylinder(L,B,D,n,y,
e.fromCap,e.toCap),B=new c.Vector3(D.x+k.x,D.y+k.y,D.z+k.z);e=new c.Vector3;v.push({centroid:e.addVectors(g,u).multiplyScalar(.5)});g=L.updateGeoGroup(0);q(this.boundingSphere,v,g.vertexArray,g.vertices)};this.addCurve=function(e){e.points=e.points||[];e.smooth=e.smooth||10;void 0===e.fromCap&&(e.fromCap=2);void 0===e.toCap&&(e.toCap=2);var g=c.subdivide_spline(e.points,e.smooth);if(3>g.length)console.log("Too few points in addCurve");else{var u=e.radius||.1,n=c.CC.color(e.color),y=0,D=g.length-1,
l=g[0].distanceTo(g[1]);l=Math.ceil(2*u/l);if(e.toArrow){let B={start:g[D-=l],end:g[g.length-1],radius:u,color:n,mid:1E-4};this.addArrow(B)}e.fromArrow&&(e={start:g[y+=l],end:g[0],radius:u,color:n,mid:1E-4},this.addArrow(e));e=Math.ceil(g.length/2);for(u={radius:u,color:n,fromCap:2,toCap:2};y<D;y++)u.start=g[y],u.end=g[y+1],u.fromCap=2,u.toCap=2,y<e?(u.fromCap=2,u.toCap=0):y>e?(u.fromCap=0,u.toCap=2):(u.fromCap=2,u.toCap=2),this.addCylinder(u)}};this.addLine=function(e){e.start=e.start||{};e.end=
e.end||{};var g=new c.Vector3(e.start.x||0,e.start.y||0,e.start.z||0);e=new c.Vector3(e.end.x,e.end.y||0,e.end.z||0);void 0===e.x&&(e.x=3);var u=L.updateGeoGroup(2),n=u.vertices,y=3*n,D=u.vertexArray;D[y]=g.x;D[y+1]=g.y;D[y+2]=g.z;D[y+3]=e.x;D[y+4]=e.y;D[y+5]=e.z;u.vertices+=2;y=u.lineArray;D=u.lineidx;y[D]=n;y[D+1]=n+1;u.lineidx+=2;u=new c.Vector3;v.push({centroid:u.addVectors(g,e).multiplyScalar(.5)});u=L.updateGeoGroup(0);q(this.boundingSphere,v,u.vertexArray,u.vertices)};this.addArrow=function(e){if(e.start=
e.start||{},e.end=e.end||{},e.start=new c.Vector3(e.start.x||0,e.start.y||0,e.start.z||0),e.dir instanceof c.Vector3&&"number"==typeof e.length){var g=e.dir.clone().multiplyScalar(e.length).add(e.start);e.end=g}else e.end=new c.Vector3(e.end.x,e.end.y||0,e.end.z||0),void 0===e.end.x&&(e.end.x=3);e.radius=e.radius||.1;e.radiusRatio=e.radiusRatio||1.618034;e.mid=0<e.mid&&1>e.mid?e.mid:.618034;var u=e.start,n=e.end,y=e.radius,D=e.radiusRatio,l=e.mid,B=e.midpos;if(u&&n){g=L.updateGeoGroup(51);var k=n.clone().sub(u);
B&&(l=k.length(),l=0<B?B/l:(l+B)/l);k.multiplyScalar(l);var J=u.clone().add(k);B=k.clone().negate();this.intersectionShape.cylinder.push(new c.Cylinder(u.clone(),J.clone(),y));this.intersectionShape.sphere.push(new c.Sphere(u.clone(),y));l=[];l[0]=k.clone();1E-4<Math.abs(l[0].x)?l[0].y+=1:l[0].x+=1;l[0].cross(k);l[0].normalize();l[0]=l[0];l[4]=l[0].clone();l[4].crossVectors(l[0],k);l[4].normalize();l[8]=l[0].clone().negate();l[12]=l[4].clone().negate();l[2]=l[0].clone().add(l[4]).normalize();l[6]=
l[4].clone().add(l[8]).normalize();l[10]=l[8].clone().add(l[12]).normalize();l[14]=l[12].clone().add(l[0]).normalize();l[1]=l[0].clone().add(l[2]).normalize();l[3]=l[2].clone().add(l[4]).normalize();l[5]=l[4].clone().add(l[6]).normalize();l[7]=l[6].clone().add(l[8]).normalize();l[9]=l[8].clone().add(l[10]).normalize();l[11]=l[10].clone().add(l[12]).normalize();l[13]=l[12].clone().add(l[14]).normalize();l[15]=l[14].clone().add(l[0]).normalize();var m,K,N,Q=g.vertices;var H=g.vertexArray;var V=g.faceArray,
W=g.normalArray,ha=g.lineArray;var U=0;for(m=l.length;U<m;++U){var S=3*(Q+3*U);var ba=l[U].clone().multiplyScalar(y).add(u);var Y=l[U].clone().multiplyScalar(y).add(J);var aa=l[U].clone().multiplyScalar(y*D).add(J);if(H[S]=ba.x,H[S+1]=ba.y,H[S+2]=ba.z,H[S+3]=Y.x,H[S+4]=Y.y,H[S+5]=Y.z,H[S+6]=aa.x,H[S+7]=aa.y,H[S+8]=aa.z,0<U)S=new c.Vector3(H[S-3],H[S-2],H[S-1]),ba=n.clone(),Y=J.clone(),aa=new c.Vector3(aa.x,aa.y,aa.z),this.intersectionShape.triangle.push(new c.Triangle(aa,ba,S)),this.intersectionShape.triangle.push(new c.Triangle(S.clone(),
Y,aa.clone()))}g.vertices+=48;H[S=3*g.vertices]=u.x;H[S+1]=u.y;H[S+2]=u.z;H[S+3]=J.x;H[S+4]=J.y;H[S+5]=J.z;H[S+6]=n.x;H[S+7]=n.y;H[S+8]=n.z;g.vertices+=3;var ia=g.vertices-3,z=g.vertices-2,G=g.vertices-1,F=3*ia,R=3*z,T=3*G;U=0;for(m=l.length-1;U<m;++U){var fa=Q+3*U;u=g.faceidx;n=g.lineidx;S=3*(y=fa);ba=3*(D=fa+1);Y=3*(J=fa+2);var Z=3*(H=fa+4);var qa=3*(aa=fa+5);var na=3*(fa+=3);l[U];l[U];l[U+1];l[U+1];var ta=K=l[U];var pa=N=l[U+1];W[S]=ta.x;W[ba]=K.x;W[na]=N.x;W[S+1]=ta.y;W[ba+1]=K.y;W[na+1]=N.y;
W[S+2]=ta.z;W[ba+2]=K.z;W[na+2]=N.z;W[ba]=K.x;W[Z]=pa.x;W[na]=N.x;W[ba+1]=K.y;W[Z+1]=pa.y;W[na+1]=N.y;W[ba+2]=K.z;W[Z+2]=pa.z;W[na+2]=N.z;W[Y]=K.x;W[qa]=pa.x;W[Y+1]=K.y;W[qa+1]=pa.y;W[Y+2]=K.z;W[qa+2]=pa.z;V[u]=y;V[u+1]=D;V[u+2]=fa;V[u+3]=D;V[u+4]=H;V[u+5]=fa;V[u+6]=y;V[u+7]=fa;V[u+8]=ia;V[u+9]=J;V[u+10]=z;V[u+11]=aa;V[u+12]=J;V[u+13]=G;V[u+14]=aa;ha[n]=y;ha[n+1]=D;ha[n+2]=y;ha[n+3]=fa;ha[n+4]=H;ha[n+5]=fa;ha[n+6]=y;ha[n+7]=fa;ha[n+8]=J;ha[n+9]=D;ha[n+10]=J;ha[n+11]=aa;ha[n+12]=H;ha[n+13]=aa;ha[n+
14]=J;ha[n+15]=G;ha[n+16]=J;ha[n+17]=aa;ha[n+18]=G;ha[n+19]=aa;g.faceidx+=15;g.lineidx+=20}U=[Q+45,Q+46,Q+1,Q,Q+47,Q+2];l[15];l[15];l[0];l[0];u=g.faceidx;n=g.lineidx;S=3*(y=U[0]);ba=3*(D=U[1]);Y=3*(J=U[4]);Z=3*(H=U[2]);qa=3*(aa=U[5]);na=3*(fa=U[3]);ta=K=l[15];pa=N=l[0];W[S]=ta.x;W[ba]=K.x;W[na]=N.x;W[S+1]=ta.y;W[ba+1]=K.y;W[na+1]=N.y;W[S+2]=ta.z;W[ba+2]=K.z;W[na+2]=N.z;W[ba]=K.x;W[Z]=pa.x;W[na]=N.x;W[ba+1]=K.y;W[Z+1]=pa.y;W[na+1]=N.y;W[ba+2]=K.z;W[Z+2]=pa.z;W[na+2]=N.z;W[Y]=K.x;W[qa]=pa.x;W[Y+1]=
K.y;W[qa+1]=pa.y;W[Y+2]=K.z;W[qa+2]=pa.z;k.normalize();B.normalize();W[F]=B.x;W[R]=W[T]=k.x;W[F+1]=B.y;W[R+1]=W[T+1]=k.y;W[F+2]=B.z;W[R+2]=W[T+2]=k.z;V[u]=y;V[u+1]=D;V[u+2]=fa;V[u+3]=D;V[u+4]=H;V[u+5]=fa;V[u+6]=y;V[u+7]=fa;V[u+8]=ia;V[u+9]=J;V[u+10]=z;V[u+11]=aa;V[u+12]=J;V[u+13]=G;V[u+14]=aa;ha[n]=y;ha[n+1]=D;ha[n+2]=y;ha[n+3]=fa;ha[n+4]=H;ha[n+5]=fa;ha[n+6]=y;ha[n+7]=fa;ha[n+8]=J;ha[n+9]=D;ha[n+10]=J;ha[n+11]=aa;ha[n+12]=H;ha[n+13]=aa;ha[n+14]=J;ha[n+15]=G;ha[n+16]=J;ha[n+17]=aa;ha[n+18]=G;ha[n+
19]=aa;g.faceidx+=15;g.lineidx+=20}g=new c.Vector3;v.push({centroid:g.addVectors(e.start,e.end).multiplyScalar(.5)});e=L.updateGeoGroup(0);q(this.boundingSphere,v,e.vertexArray,e.vertices)};this.addIsosurface=function(e,g,u){var n,y=void 0!==g.isoval&&"number"==typeof g.isoval?g.isoval:0,D=!!g.voxel,l=void 0===g.smoothness?1:g.smoothness,B=e.size.x,k=e.size.y,J=e.size.z,m=new Int16Array(B*k*J),K=e.data;var N=0;for(n=m.length;N<n;++N)m[N]=-1;m=new Uint8Array(B*k*J);N=0;for(n=K.length;N<n;++N)0<(0<=
y?K[N]-y:y-K[N])&&(m[N]|=2);N=[];n=[];c.MarchingCube.march(m,N,n,{fulltable:!0,voxel:D,unitCube:e.unit,origin:e.origin,matrix:e.matrix,nX:B,nY:k,nZ:J});!D&&0<l&&c.MarchingCube.laplacianSmooth(l,N,n);D=[];l=[];B=[];if(g.selectedRegion&&void 0===g.coords&&(g.coords=g.selectedRegion),void 0!==g.coords){k=g.coords[0].x;J=g.coords[0].y;m=g.coords[0].z;y=g.coords[0].x;K=g.coords[0].y;var Q=g.coords[0].z;for(var H=0;H<g.coords.length;H++)g.coords[H].x>k?k=g.coords[H].x:g.coords[H].x<y&&(y=g.coords[H].x),
g.coords[H].y>J?J=g.coords[H].y:g.coords[H].y<K&&(K=g.coords[H].y),g.coords[H].z>m?m=g.coords[H].z:g.coords[H].z<Q&&(Q=g.coords[H].z);H=2;void 0!==g.radius&&(H=g.radius);void 0!==g.selectedOffset&&(H=g.selectedOffset);void 0!==g.seldist&&(H=g.seldist);y-=H;k+=H;K-=H;J+=H;Q-=H;m+=H;for(let S=0;S<N.length;S++){var V;if(V=N[S].x>y&&N[S].x<k&&N[S].y>K&&N[S].y<J&&N[S].z>Q&&N[S].z<m)a:{for(var W=V=void 0,ha=g.coords,U=0;U<ha.length;U++)if(W=ha[U],V=N[S],Math.sqrt(Math.pow(W.x-V.x,2)+Math.pow(W.y-V.y,2)+
Math.pow(W.z-V.z,2))<=H){V=!0;break a}V=!1}V?(D.push(l.length),l.push(N[S])):D.push(-1)}for(N=0;N+2<n.length;N+=3)-1!==D[n[N]]&&-1!==D[n[N+1]]&&-1!==D[n[N+2]]&&(B.push(n[N]-(n[N]-D[n[N]])),B.push(n[N+1]-(n[N+1]-D[n[N+1]])),B.push(n[N+2]-(n[N+2]-D[n[N+2]])));N=l;n=B}x(this,L,{vertexArr:N,faceArr:n,normalArr:[],clickable:g.clickable,hoverable:g.hoverable});this.updateStyle(g);n=new c.Vector3(e.origin.x,e.origin.y,e.origin.z);D=new c.Vector3(e.size.x*e.unit.x,e.size.y*e.unit.y,e.size.z*e.unit.z);e=new c.Vector3(0,
0,0);g=n.clone();n=n.clone().add(D);for(D=0;D<N.length;D++)e.add(N[D]),g.max(N[D]),n.min(N[D]);e.divideScalar(N.length);N=e.distanceTo(n);g=e.distanceTo(g);this.boundingSphere.center=e;this.boundingSphere.radius=Math.max(N,g);"function"==typeof u&&u()};this.addVolumetricData=function(e,g,u){e=new c.VolumeData(e,g);this.addIsosurface(e,u)};this.finalize=function(){return h(L),L.initTypedArrays(),L};this.globj=function(e){if(M&&(e.remove(M),M=null),!this.hidden){h(L);L.initTypedArrays();this.wireframe&&
L.setUpWireframe();if(void 0!==this.color){var g=this.color,u,n,y,D;for(D in g=g||c.CC.color(g),L.colorsNeedUpdate=!0,g.constructor!==Array&&(u=g.r,n=g.g,y=g.b),L.geometryGroups){var l=L.geometryGroups[D],B=l.colorArray,k=0;for(l=l.vertices;k<l;++k)g.constructor===Array&&(y=g[k],u=y.r,n=y.g,y=y.b),B[3*k]=u,B[3*k+1]=n,B[3*k+2]=y}}C=new c.Object3D;g=this.side==c.DoubleSide?new c.MeshDoubleLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth}):
new c.MeshLambertMaterial({wireframe:this.wireframe,side:this.side,transparent:1>this.opacity,opacity:this.opacity,wireframeLinewidth:this.linewidth});g=new c.Mesh(L,g);C.add(g);g=new c.LineBasicMaterial({linewidth:this.linewidth,color:this.color});g=new c.Line(P,g,c.LinePieces);C.add(g);M=C.clone();e.add(M)}};this.removegl=function(e){M&&(void 0!==M.geometry&&M.geometry.dispose(),void 0!==M.material&&M.material.dispose(),e.remove(M),M=null);C=null}}var h=function(w){w=w.updateGeoGroup(0);0<w.vertices&&
w.truncateArrayBuffers(!0,!0)},q=function(w,v,C,M){var L;if(w.center.set(0,0,0),0<v.length){var P=0;for(L=v.length;P<L;++P)w.center.add(v[P].centroid);w.center.divideScalar(v.length)}v=w.radius*w.radius;C.length/3<M&&(M=C.length/3);P=0;for(L=M;P<L;P++)M=w.center.distanceToSquared({x:C[3*P],y:C[3*P+1],z:C[3*P+2]}),v=Math.max(v,M);w.radius=Math.sqrt(v)},x=function(w,v,C){var M=C.faceArr;0!==C.vertexArr.length&&0!==M.length||console.warn("Error adding custom shape component: No vertices and/or face indices supplied!");
M=C.color;void 0===M&&(M=w.color);M=c.CC.color(M);for(var L=c.splitMesh(C),P=0,e=L.length;P<e;P++){var g=void 0,u=void 0,n,y=void 0,D=void 0;var l=w;var B=v,k=L[P],J=L[P].colorArr?L[P].colorArr:M,m=C.clickable,K=B.addGeoGroup(),N=k.vertexArr,Q=k.normalArr;k=k.faceArr;K.vertices=N.length;K.faceidx=k.length;var H=K.vertexArray,V=K.colorArray;J.constructor!==Array&&(u=J.r,g=J.g,D=J.b);var W=0;for(n=K.vertices;W<n;++W){var ha=3*W;var U=N[W];H[ha]=U.x;H[ha+1]=U.y;H[ha+2]=U.z;J.constructor===Array&&(u=
(y=J[W]).r,g=y.g,D=y.b);V[ha]=u;V[ha+1]=g;V[ha+2]=D}if(m)for(W=0,n=K.faceidx/3;W<n;++W)g=k[ha=3*W],D=k[ha+1],y=k[ha+2],ha=new c.Vector3,u=new c.Vector3,J=new c.Vector3,l.intersectionShape.triangle.push(new c.Triangle(ha.copy(N[g]),u.copy(N[D]),J.copy(N[y])));if(m){n=new c.Vector3(0,0,0);W=0;for(y=0;y<B.geometryGroups.length;y++)n.add(B.geometryGroups[y].getCentroid()),W++;n.divideScalar(W);q(l.boundingSphere,{centroid:n},H,K.vertices)}if(K.faceArray=new Uint16Array(k),K.truncateArrayBuffers(!0,!0),
Q.length<K.vertices)K.setNormals();else for(B=K.normalArray=new Float32Array(3*K.vertices),W=0,n=K.vertices;W<n;++W)ha=3*W,l=Q[W],B[ha]=l.x,B[ha+1]=l.y,B[ha+2]=l.z;K.setLineIndices();K.lineidx=K.lineArray.length}},p=function(w,v){void 0!==v.color?(w.color=v.color||new c.Color,v.color instanceof c.Color||(w.color=c.CC.color(v.color))):w.color=c.CC.color(0);w.wireframe=!!v.wireframe;w.opacity=v.alpha?c.Math.clamp(v.alpha,0,1):1;void 0!==v.opacity&&(w.opacity=c.Math.clamp(v.opacity,0,1));w.side=void 0!==
v.side?v.side:c.DoubleSide;w.linewidth=void 0===v.linewidth?1:v.linewidth;w.clickable=!!v.clickable;w.callback="function"==typeof v.callback?v.callback:null;w.hoverable=!!v.hoverable;w.hover_callback="function"==typeof v.hover_callback?v.hover_callback:null;w.unhover_callback="function"==typeof v.unhover_callback?v.unhover_callback:null;w.hidden=v.hidden;w.frame=v.frame};return Object.defineProperty(d.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(d.prototype,
"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(d.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(d.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),d}();c.ShapeIDCount=0;c.splitMesh=function(d){if(64E3>d.vertexArr.length)return[d];var h=[{vertexArr:[],normalArr:[],faceArr:[]}];d.colorArr&&(h.colorArr=[]);var q=[],x=[],p=0,w=d.faceArr;for(let C=0,M=w.length;C<M;C+=3){let L=h[p];for(let P=0;3>P;P++){var v=
w[C+P];q[v]!==p&&(q[v]=p,x[v]=L.vertexArr.length,L.vertexArr.push(d.vertexArr[v]),d.normalArr&&d.normalArr[v]&&L.normalArr.push(d.normalArr[v]),d.colorArr&&d.colorArr[v]&&L.colorArr.push(d.colorArr[v]));L.faceArr.push(x[v])}64E3<=L.vertexArr.length&&(h.push({vertexArr:[],normalArr:[],faceArr:[]}),d.colorArr&&(h.colorArr=[]),p++)}return h};c.GLViewer=function(d,h){function q(r){var E=[];if(void 0===r||void 0===r.model)for(r=0;r<n.length;r++)n[r]&&E.push(n[r]);else{E=r.model;bb.isArray(E)||(E=[E]);
for(let ea=0;ea<E.length;ea++)"number"==typeof E[ea]&&(r=E[ea],0>r&&(r+=n.length),E[ea]=n[r])}return E}function x(r){var E=[];void 0===r&&(r={});for(var ea=q(r),ja=0;ja<ea.length;ja++)E=E.concat(ea[ja].selectedAtoms(r));return E}function p(r,E,ea,ja,va,Aa,xa){for(var Ba=q(E),Ea=0;Ea<Ba.length;Ea++)Ba[Ea][r](E,ea,ja,va,Aa,xa)}function w(r){var E=new c.MeshLambertMaterial,ea;for(ea in E.vertexColors=c.VertexColors,r)"color"===ea||"map"===ea||r.hasOwnProperty(ea)&&(E[ea]=r[ea]);return void 0!==r.opacity&&
(1===r.opacity?E.transparent=!1:E.transparent=!0),E}var v=(h=h||{}).callback,C=h.defaultcolors;C||=c.elementColors.defaultColors;var M=h.nomouse,L=0;h.backgroundColor=h.backgroundColor||"#ffffff";L=c.CC.color(h.backgroundColor).getHex();var P=0;P=parseFloat(h.camerax);var e=this,g=bb(d),u=null,n=[],y={},D=[],l=[],B=[],k=[],J=[],m=null,K=500,N=0;null!=h.hoverDuration&&(K=h.hoverDuration);void 0===h.antialias&&(h.antialias=!0);void 0===h.cartoonQuality&&(h.cartoonQuality=5);var Q=function(){let r=g[0],
E=r.getBoundingClientRect();if(0==E.width&&0==E.height&&"none"===r.style.display){let ea=r.style.position,ja=r.style.visibility;r.style.display="block";r.style.visibility="hidden";r.style.position="absolute";E=r.getBoundingClientRect();r.style.display="none";r.style.visibility=ja;r.style.position=ea}return E},H=Q().width,V=Q().height,W=null,ha=null,U=[],S=new c.Renderer({antialias:h.antialias,preserveDrawingBuffer:!0,premultipliedAlpha:!1,id:h.id,row:h.row,col:h.col,rows:h.rows,cols:h.cols,canvas:h.canvas,
containerWidth:H,containerHeight:V});S.domElement.style.width="100%";S.domElement.style.height="100%";S.domElement.style.padding="0";S.domElement.style.position="absolute";S.domElement.style.top="0px";S.domElement.style.left="0px";S.domElement.style.zIndex="0";var ba=h.row,Y=h.col,aa=h.cols,ia=h.rows,z=h.viewers,G=h.control_all,F=S.getAspect(H,V),R=new c.Camera(20,F,1,800,h.orthographic);R.position=new c.Vector3(P,0,150);var T=new c.Vector3;R.lookAt(T);var fa=new c.Raycaster(new c.Vector3(0,0,0),
new c.Vector3(0,0,0)),Z=new c.Projector,qa=null,na=null,ta=null,pa=-50,Fa=50,Ga=new c.Quaternion(0,0,0,1),Ha=new c.Quaternion(0,0,0,1),Ja=0,Na=new Set,hb=!1,Xb=0,Pb=0,Lb=0,xb=0,Kb=0,qb=0,dc=0,tc=function(){0>--Ja&&(Ja=0)},ab=function(){var r=0,E;for(E in y)if(y.hasOwnProperty(E)){var ea=parseInt(E);isNaN(ea)||(E=ea);E>r&&(r=E)}return r+1},Va=function(){var r=R.position.z-na.position.z;1>r&&(r=1);R.near=r+pa;1>R.near&&(R.near=1);R.far=r+Fa;R.near+1>R.far&&(R.far=R.near+1);R.fov=20;R.right=r*Math.tan(Math.PI/
180*20);R.left=-R.right;R.top=R.right/F;R.bottom=-R.top;R.updateProjectionMatrix();qa.fog.near=R.near+.4*(R.far-R.near);qa.fog.far=R.far;h.disableFog&&(qa.fog.near=qa.fog.far)},ob=function(r){if(S.setViewport(),qa&&(Va(),S.render(qa,R),W&&W(e.getView()),!r&&0<U.length)){r=e.getView();for(var E=0;E<U.length;E++)U[E].setView(r,!0)}};!function(){(qa=new c.Scene).fog=new c.Fog(L,100,200);ta=new c.Object3D;(na=new c.Object3D).useQuaternion=!0;na.quaternion=new c.Quaternion(0,0,0,1);na.add(ta);qa.add(na);
var r=new c.Light(16777215);r.position=(new c.Vector3(.2,.2,1)).normalize();r.intensity=1;qa.add(r)}();S.setClearColorHex(L,1);qa.fog.color=c.CC.color(L);var fb=function(r,E){m!=r&&(m&&m.unhover_callback(m,e,E,g),m=r,r&&void 0!==r.hover_callback&&"function"==typeof r.hover_callback&&r.hover_callback(r,e,E,g))},ka=function(r){var E=r.originalEvent.targetTouches[0].pageX-r.originalEvent.targetTouches[1].pageX;r=r.originalEvent.targetTouches[0].pageY-r.originalEvent.targetTouches[1].pageY;return Math.sqrt(E*
E+r*r)},t=function(r){var E=r.pageX;return null==E&&(E=r.originalEvent.pageX),r.originalEvent.targetTouches&&r.originalEvent.targetTouches[0]?E=r.originalEvent.targetTouches[0].pageX:r.originalEvent.changedTouches&&r.originalEvent.changedTouches[0]&&(E=r.originalEvent.changedTouches[0].pageX),E},Ia=function(r){var E=r.pageY;return null==E&&(E=r.originalEvent.pageY),r.originalEvent.targetTouches&&r.originalEvent.targetTouches[0]?E=r.originalEvent.targetTouches[0].pageY:r.originalEvent.changedTouches&&
r.originalEvent.changedTouches[0]&&(E=r.originalEvent.changedTouches[0].pageY),E},Ca=function(r,E){r/=H;E/=V;var ea=na.quaternion,ja=new c.Vector3(0,0,na.position.z);return Z.projectVector(ja,R),ja.x+=2*r,ja.y-=2*E,Z.unprojectVector(ja,R),ja.z=0,ja.applyQuaternion(ea),ja},Ra=function(){var r=u.get(0);let E=r.getBoundingClientRect();var ea=r.ownerDocument;r=ea.documentElement;ea=ea.defaultView;return{top:E.top+ea.pageYOffset-r.clientTop,left:E.left+ea.pageXOffset-r.clientLeft}},jb=function(r,E){if(null!=
z&&!G){var ea=H/aa,ja=V/ia,va=Ra();r=Math.floor((r-va.left)/ea);if(ia-Math.floor((E-va.top)/ja)-1!=ba||r!=Y)return!1}return!0};bb("body").bind("mouseup touchend",function(r){if(hb&&qa){var E=t(r),ea=Ia(r);if(E==Xb&&ea==Pb){var ja=Ra();0!=k.length&&(fa.setFromCamera({x:(E-ja.left)/H*2-1,y:-(ea-ja.top)/V*2+1,z:-1},R),(E=fa.intersectObjects(ta,k)).length)&&(E=E[0].clickable,void 0!==E.callback&&"function"==typeof E.callback&&E.callback(E,e,r,g));!0}}hb=!1});var Ua,gb=function(r){if(h.lowerZoomLimit&&
0<h.lowerZoomLimit){var E=150-h.lowerZoomLimit;r>E&&(r=E)}h.upperZoomLimit&&0<h.upperZoomLimit&&(E=150-h.upperZoomLimit,r<E&&(r=E));return 150<r&&(r=149.85),r};this.setViewChangeCallback=function(r){"function"!=typeof r&&null!=r||(W=r)};this.setStateChangeCallback=function(r){"function"!=typeof r&&null!=r||(ha=r)};this.getInternalState=function(){var r={models:[],surfaces:[],shapes:[],labels:[]};for(let E=0;E<n.length;E++)n[E]&&(r.models[E]=n[E].getInternalState());return r};this.setInternalState=
function(r){this.clear();r=r.models;for(let E=0;E<r.length;E++)r[E]&&(n[E]=new c.GLModel(E),n[E].setInternalState(r[E]));this.render()};this.setZoomLimits=function(r,E){void 0!==r&&(h.lowerZoomLimit=r);E&&(h.upperZoomLimit=E);na.position.z=gb(na.position.z);ob()};var Xa,Za=this._handleMouseDown=function(r){if(r.preventDefault(),qa){var E=t(r),ea=Ia(r);void 0!==E&&(hb=!0,Ua=r.which,Xb=E,Pb=ea,Lb=0,r.originalEvent.targetTouches&&2==r.originalEvent.targetTouches.length&&(Lb=ka(r)),Ga=na.quaternion.clone(),
Kb=na.position.z,xb=ta.position.clone(),qb=pa,dc=Fa)}},Cb=this._handleMouseScroll=function(r){if(r.preventDefault(),qa){var E=t(r),ea=Ia(r);void 0!==E&&jb(E,ea)&&(E=.85*(150-na.position.z),ea=1,r.originalEvent.ctrlKey&&(ea=-1),r.originalEvent.detail?na.position.z+=ea*E*r.originalEvent.detail/10:r.originalEvent.wheelDelta&&(na.position.z-=ea*E*r.originalEvent.wheelDelta/400),na.position.z=gb(na.position.z),ob())}};this.pngURI=function(){return this.getCanvas().toDataURL("image/png")};this.getCanvas=
function(){return u.get(0)};this.getRenderer=function(){return S};this.setHoverDuration=function(r){K=r};var mb=this._handleMouseMove=function(r){clearTimeout(Xa);var E=Ra(),ea=(t(r)-E.left)/H*2-1,ja=-(Ia(r)-E.top)/V*2+1;if(null!==m&&function(eb,Ma){var sb;fa.setFromCamera({x:eb,y:Ma,z:-1},R);0!=(sb=fa.intersectObjects(ta,J)).length&&void 0!==sb[0]||fb(null);void 0!==sb[0]&&sb[0].clickable!==m&&fb(null)}(ea,ja),0<J.length&&(Xa=setTimeout(function(){if(0!=J.length){var eb;(fa.setFromCamera({x:ea,y:ja,
z:-1},R),(eb=fa.intersectObjects(ta,J)).length)?(eb=eb[0].clickable,fb(eb),m=eb):fb(null)}!0},K)),r.preventDefault(),qa&&hb){var va=0,Aa=t(r),xa=Ia(r);if(void 0!==Aa&&jb(Aa,xa)){var Ba=(Aa-Xb)/H;E=(xa-Pb)/V;0!=Lb&&r.originalEvent.targetTouches&&2==r.originalEvent.targetTouches.length?(va=2,E=2*(ka(r)-Lb)/(H+V)):r.originalEvent.targetTouches&&3==r.originalEvent.targetTouches.length&&(va=1);var Ea=S.getXRatio(),za=S.getYRatio();Ba*=Ea;E*=za;var Sa=Math.sqrt(Ba*Ba+E*E);3==va||3==Ua&&r.ctrlKey?(pa=qb+
100*Ba,Fa=dc-100*E):2==va||3==Ua||r.shiftKey?(80>(r=.85*(150-na.position.z))&&(r=80),na.position.z=Kb+E*r,na.position.z=gb(na.position.z)):1==va||2==Ua||r.ctrlKey?(E=Ca(Ea*(Aa-Xb),za*(xa-Pb)),ta.position.addVectors(xb,E)):0!==va&&1!=Ua||0===Sa||(r=Math.sin(Sa*Math.PI)/Sa,Ha.x=Math.cos(Sa*Math.PI),Ha.y=0,Ha.z=r*Ba,Ha.w=-r*E,na.quaternion.set(1,0,0,0),na.quaternion.multiply(Ha),na.quaternion.multiply(Ga));ob()}}},bc=function(r){g=r;H=Q().width;V=Q().height;F=S.getAspect(H,V);S.setSize(H,V);g.append(S.domElement);
u=bb(S.domElement);M||(u.bind("mousedown touchstart",Za),u.bind("DOMMouseScroll mousewheel",Cb),u.bind("mousemove touchmove",mb),u.bind("contextmenu",function(E){E.preventDefault()}))};bc(g);this.setContainer=function(r){return"string"===bb.type(r)&&(r=bb("#"+r)),r||=g,bc(r),this};this.setBackgroundColor=function(r,E){(void 0===E||0>E||1<E)&&(E=1);r=c.CC.color(r);return qa.fog.color=r,L=r.getHex(),S.setClearColorHex(r.getHex(),E),ob(),this};this.setProjection=function(r){R.ortho="orthographic"===
r;Va()};this.setViewStyle=function(r){if("outline"===r.style){var E={};r.color&&(E.color=c.CC.color(r.color));r.width&&(E.width=r.width);S.enableOutline(E)}else S.disableOutline();return this};h.style&&this.setViewStyle(h);this.setWidth=function(r){return H=r||H,S.setSize(H,V),this};this.setHeight=function(r){return V=r||V,S.setSize(H,V),this};this.resize=function(){return H=Q().width,V=Q().height,F=S.getAspect(H,V),S.setSize(H,V),R.aspect=F,R.updateProjectionMatrix(),ob(),this};bb(window).resize(this.resize);
(new window.ResizeObserver(this.resize)).observe(g[0]);this.getModel=function(r){return void 0===r?0==n.length?null:n[n.length-1]:r instanceof c.GLModel?r:r in n?n[r]:0==n.length?null:n[n.length-1]};var wc,Hb=function(r,E,ea){if(1==ea)return E;if(0==ea)return r;var ja=r.x*E.x+r.y*E.y+r.z*E.z+r.w*E.w;if(.9995<ja)return r=new c.Quaternion(r.x+ea*(E.x-r.x),r.y+ea*(E.y-r.y),r.z+ea*(E.z-r.z),r.w+ea*(E.w-r.w)),r.normalize(),r;0>ja&&(E=E.clone().multiplyScalar(-1),ja=-ja);1<ja?ja=1:-1>ja&&(ja=-1);ea*=Math.acos(ja);
E=E.clone();E.sub(r.clone().multiplyScalar(ja));E.normalize();ja=Math.cos(ea);ea=Math.sin(ea);r=new c.Quaternion(r.x*ja+E.x*ea,r.y*ja+E.y*ea,r.z*ja+E.z*ea,r.w*ja+E.w*ea);return r.normalize(),r};this.spin=function(r){if(clearInterval(wc),void 0===r&&(r="y"),"boolean"==typeof r){if(!r)return;r="y"}Array.isArray(r)&&(r={x:r[0],y:r[1],z:r[2]});var E=this;wc=setInterval(function(){E.rotate(1,r)},25)};var Gb=function(r,E,ea,ja,va,Aa){var xa=Math.ceil(r/20);1>xa&&(xa=1);Ja++;var Ba=ta.position.clone(),Ea=
na.position.z;r=na.quaternion.clone();var za=T.clone();if(E){E=(xa=Array(xa)).length;for(var Sa=0;Sa<E;Sa++){let Nb=(Sa+1)/E,sc={mpos:Ba,rz:Ea,rot:r};ea&&(sc.mpos=ea.clone().sub(Ba).multiplyScalar(Nb).add(Ba));void 0!==ja&&null!=ja&&(sc.rz=Ea+Nb*(ja-Ea));va&&(sc.rot=Hb(r,va,Nb));Aa&&(sc.cam=Aa.clone().sub(za).multiplyScalar(Nb).add(za));xa[Sa]=sc}let nc=0,oc=function(){var Nb=xa[nc];nc+=1;Nb.mpos&&(ta.position=Nb.mpos);Nb.rz&&(na.position.z=Nb.rz);Nb.rot&&(na.quaternion=Nb.rot);Nb.cam&&R.lookAt(Nb.cam);
nc<xa.length?setTimeout(oc,20):tc();ob()};setTimeout(oc,20)}else{var eb,Ma,sb;E=1/xa;if(ea&&(eb=ea.clone().sub(Ba).multiplyScalar(E)),void 0!==ja&&null!=ja&&(Ma=E*(ja-Ea)),va){ea=Hb(r,va,E);var Yb=r.clone().inverse().multiply(ea)}Aa&&(sb=Aa.clone().sub(za).multiplyScalar(E));let nc=0,oc=function(){nc+=1;eb&&ta.position.add(eb);Ma&&(na.position.z+=Ma);Yb&&na.quaternion.multiply(Yb);sb&&(T.add(sb),R.lookAt(T));nc<xa?setTimeout(oc,20):tc();ob()};setTimeout(oc,20)}};this.rotate=function(r,E,ea,ja){if(ea=
void 0!==ea?ea:0,void 0===E&&(E="y"),"x"==E?E={x:1,y:0,z:0}:"y"==E?E={x:0,y:1,z:0}:"z"==E&&(E={x:0,y:0,z:1}),"vx"==E?E={vx:1,vy:0,vz:0}:"vy"==E?E={vx:0,vy:1,vz:0}:"vz"==E&&(E={vx:0,vy:0,vz:1}),void 0!==E.vx)E=new c.Vector3(E.vx,E.vy,E.vz),E.applyQuaternion(na.quaternion),E={x:E.x,y:E.y,z:E.z};var va=Math.PI*r/180;var Aa,xa,Ba;r=Math.sin(va/2);var Ea=Math.cos(va/2);va=(Aa=E.x*r,xa=E.y*r,Ba=E.z*r,(new c.Quaternion(Aa,xa,Ba,Ea)).normalize());ea?(Aa=(new c.Quaternion).copy(na.quaternion).multiply(va),
Gb(ea,ja,ta.position,na.position.z,Aa,T)):(na.quaternion.multiply(va),ob());return this};this.surfacesFinished=function(){for(var r in y)if(!y[r][0].done)return!1;return!0};this.getView=function(){if(!ta)return[0,0,0,0,0,0,0,1];var r=ta.position,E=na.quaternion;return[r.x,r.y,r.z,na.position.z,E.x,E.y,E.z,E.w]};this.setView=function(r,E){return void 0!==r&&(r instanceof Array||8!==r.length)&&ta&&na?(ta.position.x=r[0],ta.position.y=r[1],ta.position.z=r[2],na.position.z=r[3],na.quaternion.x=r[4],na.quaternion.y=
r[5],na.quaternion.z=r[6],na.quaternion.w=r[7],void 0!==r[8]&&(na.position.x=r[8],na.position.y=r[9]),ob(E),this):this};this.render=function(r,E){S.setViewport();k.splice(0,k.length);J.splice(0,J.length);for(let Sa=0,eb=n.length;Sa<eb;Sa++){var ea=n[Sa];if(ea){var ja=ea.selectedAtoms({clickable:!0});ea=ea.selectedAtoms({hoverable:!0});Array.prototype.push.apply(J,ea);Array.prototype.push.apply(k,ja)}}for(let Sa=0,eb=D.length;Sa<eb;Sa++)(ja=D[Sa])&&ja.clickable&&k.push(ja),ja&&ja.hoverable&&J.push(ja);
var va=this.getView();ha&&ha(this.getInternalState());E||=S.supportedExtensions();for(ja=0;ja<n.length;ja++)n[ja]&&n[ja].globj(ta,E);for(ja=0;ja<D.length;ja++)D[ja]&&(void 0===D[ja].frame||0>N||0>D[ja].frame||D[ja].frame==N?D[ja].globj(ta,E):D[ja].removegl(ta));for(ja=0;ja<l.length;ja++)l[ja]&&void 0!==l[ja].frame&&0<=l[ja].frame&&(ta.remove(l[ja].sprite),(0>N||l[ja].frame==N)&&ta.add(l[ja].sprite));for(ja in y)if(y.hasOwnProperty(ja)){var Aa=y[ja];for(ea=0;ea<Aa.length;ea++)if(Aa.hasOwnProperty(ea)){var xa=
Aa[ea].geo;if(!Aa[ea].finished||E.regen){xa.verticesNeedUpdate=!0;xa.elementsNeedUpdate=!0;xa.normalsNeedUpdate=!0;xa.colorsNeedUpdate=!0;xa.buffersNeedUpdate=!0;xa.boundingSphere=null;Aa[ea].done&&(Aa[ea].finished=!0);Aa[ea].lastGL&&ta.remove(Aa[ea].lastGL);var Ba=null;if(Ba=Aa[ea].mat instanceof c.LineBasicMaterial?new c.Line(xa,Aa[ea].mat):new c.Mesh(xa,Aa[ea].mat),Aa[ea].mat.transparent&&0==Aa[ea].mat.opacity?Ba.visible=!1:Ba.visible=!0,1<Aa[ea].symmetries.length||1==Aa[ea].symmetries.length&&
!Aa[ea].symmetries[ea].isIdentity()){var Ea=new c.Object3D;for(xa=0;xa<Aa[ea].symmetries.length;xa++){var za=Ba.clone();za.matrix=Aa[ea].symmetries[xa];za.matrixAutoUpdate=!1;Ea.add(za)}Aa[ea].lastGL=Ea;ta.add(Ea)}else Aa[ea].lastGL=Ba,ta.add(Ba)}}}return this.setView(va),"function"==typeof r&&r(this),this};this.selectedAtoms=function(r){return x(r)};this.getUniqueValues=function(r,E){void 0===E&&(E={});E=x(E);var ea={},ja;for(ja in E)E[ja].hasOwnProperty(r)&&(ea[E[ja][r]]=!0);return Object.keys(ea)};
this.pdbData=function(r){r=x(r);for(var E="",ea=0,ja=r.length;ea<ja;++ea)E+=r[ea].pdbline+"\n";return E};this.zoom=function(r,E,ea){E=void 0!==E?E:0;r=150-(150-na.position.z)/(r||2);return 0<E?Gb(E,ea,ta.position,gb(r),na.quaternion,T):(na.position.z=gb(r),ob()),this};this.translate=function(r,E,ea,ja){ea=void 0!==ea?ea:0;r/=H;E/=V;var va=new c.Vector3(0,0,-150);Z.projectVector(va,R);va.x-=r;va.y-=E;Z.unprojectVector(va,R);va.z=0;r=T.clone().add(va);return 0<ea?Gb(ea,ja,ta.position,na.position.z,
na.quaternion,r):(T=r,R.lookAt(T),ob()),this};this.translateScene=function(r,E,ea,ja){ea=void 0!==ea?ea:0;r=Ca(r,E);r=ta.position.clone().add(r);return 0<ea?Gb(ea,ja,ta.position,na.position.z,na.quaternion,T):(ta.position=r,ob()),this};this.fitSlab=function(r){r=x(r||{});var E=c.getExtent(r);r=E[1][0]-E[0][0];var ea=E[1][1]-E[0][1];E=E[1][2]-E[0][2];r=Math.sqrt(r*r+ea*ea+E*E);return 5>r&&(r=5),pa=-r/1.9,Fa=r/2,this};this.center=function(r,E,ea){var ja,va;E=void 0!==E?E:0;var Aa=x(r=r||{}),xa=c.getExtent(Aa);
bb.isEmptyObject(r)?(bb.each(D,function(Ea,za){za&&za.boundingSphere&&za.boundingSphere.center&&(Ea=za.boundingSphere.center,za=za.boundingSphere.radius,0<za?(Aa.push(new c.Vector3(Ea.x+za,Ea.y,Ea.z)),Aa.push(new c.Vector3(Ea.x-za,Ea.y,Ea.z)),Aa.push(new c.Vector3(Ea.x,Ea.y+za,Ea.z)),Aa.push(new c.Vector3(Ea.x,Ea.y-za,Ea.z)),Aa.push(new c.Vector3(Ea.x,Ea.y,Ea.z+za)),Aa.push(new c.Vector3(Ea.x,Ea.y,Ea.z-za))):Aa.push(Ea))}),xa=c.getExtent(Aa),ja=Aa,va=xa):(ja=x({}),va=c.getExtent(ja));r=new c.Vector3(xa[2][0],
xa[2][1],xa[2][2]);ja=va[1][0]-va[0][0];var Ba=va[1][1]-va[0][1];va=va[1][2]-va[0][2];va=Math.sqrt(ja*ja+Ba*Ba+va*va);5>va&&(va=5);pa=-va/1.9;Fa=va/2;ja=xa[1][0]-xa[0][0];Ba=xa[1][1]-xa[0][1];va=xa[1][2]-xa[0][2];5>(va=Math.sqrt(ja*ja+Ba*Ba+va*va))&&(va=5);xa=25;for(va=0;va<Aa.length;va++)Aa[va]&&(ja=r.distanceToSquared(Aa[va]),ja>xa&&(xa=ja));va=2*Math.sqrt(xa);r=r.clone().multiplyScalar(-1);return 0<E?Gb(E,ea,r,na.position.z,na.quaternion,T):(ta.position=r,ob()),this};this.zoomTo=function(r,E,ea){var ja,
va;E=void 0!==E?E:0;var Aa=x(r=r||{}),xa=c.getExtent(Aa);bb.isEmptyObject(r)?(bb.each(D,function(za,Sa){Sa&&Sa.boundingSphere&&Sa.boundingSphere.center&&(za=Sa.boundingSphere.center,Sa=Sa.boundingSphere.radius,0<Sa?(Aa.push(new c.Vector3(za.x+Sa,za.y,za.z)),Aa.push(new c.Vector3(za.x-Sa,za.y,za.z)),Aa.push(new c.Vector3(za.x,za.y+Sa,za.z)),Aa.push(new c.Vector3(za.x,za.y-Sa,za.z)),Aa.push(new c.Vector3(za.x,za.y,za.z+Sa)),Aa.push(new c.Vector3(za.x,za.y,za.z-Sa))):Aa.push(za))}),xa=c.getExtent(Aa),
ja=Aa,va=xa):(ja=x({}),va=c.getExtent(ja));ja=new c.Vector3(xa[2][0],xa[2][1],xa[2][2]);var Ba=va[1][0]-va[0][0],Ea=va[1][1]-va[0][1];va=va[1][2]-va[0][2];Ba=Math.sqrt(Ba*Ba+Ea*Ea+va*va);5>Ba&&(Ba=5);pa=-Ba/1.9;Fa=Ba/2;0===Object.keys(r).length&&(pa=-999999,Fa=999999);r=h.minimumZoomToDistance||5;Ba=xa[1][0]-xa[0][0];Ea=xa[1][1]-xa[0][1];va=xa[1][2]-xa[0][2];(Ba=Math.sqrt(Ba*Ba+Ea*Ea+va*va))<r&&(Ba=r);xa=r*r;for(r=0;r<Aa.length;r++)Aa[r]&&(Ba=ja.distanceToSquared(Aa[r]),Ba>xa&&(xa=Ba));Ba=2*Math.sqrt(xa);
ja=ja.clone().multiplyScalar(-1);xa=-(.5*Ba/Math.tan(Math.PI/180*R.fov/2)-150);return xa=gb(xa),0<E?Gb(E,ea,ja,xa,na.quaternion,T):(ta.position=ja,na.position.z=xa,ob()),this};this.setSlab=function(r,E){pa=r;Fa=E};this.getSlab=function(){return{near:pa,far:Fa}};this.addLabel=function(r,E,ea,ja){if(E=E||{},ea)ea=c.getExtent(x(ea)),E.position={x:ea[2][0],y:ea[2][1],z:ea[2][2]};r=new c.Label(r,E);return r.setContext(),ta.add(r.sprite),E.fixed&&B.push(l.length),l.push(r),ja||ob(),r};this.addResLabels=
function(r,E,ea){let ja=l.length;return p("addResLabels",r,this,E,ea),ob(),l.slice(ja)};this.addPropertyLabels=function(r,E,ea){return p("addPropertyLabels",r,E,this,ea),ob(),this};this.removeLabel=function(r){for(var E=0;E<l.length;E++)if(l[E]==r){l.splice(E,1);r.dispose();ta.remove(r.sprite);break}return ob(),this};this.removeAllLabels=function(){for(var r=0;r<l.length;r++)l[r]&&l[r].sprite&&ta.remove(l[r].sprite);return l.splice(0,l.length),ob(),this};this.setLabelStyle=function(r,E){return ta.remove(r.sprite),
r.dispose(),r.stylespec=E,r.setContext(),ta.add(r.sprite),ob(),r};this.setLabelText=function(r,E){return ta.remove(r.sprite),r.dispose(),r.text=E,r.setContext(),ta.add(r.sprite),ob(),r};this.addShape=function(r){r=r||{};r=new c.GLShape(r);return r.shapePosition=D.length,D.push(r),r};this.removeShape=function(r){if(!r)return this;r.removegl(ta);for(delete D[r.shapePosition];0<D.length&&void 0===D[D.length-1];)D.pop();return this};this.removeAllShapes=function(){for(var r=0;r<D.length;r++){var E=D[r];
E&&E.removegl(ta)}return D.splice(0,D.length),this};var tb=function(r){if(r.hasOwnProperty("x")&&r.hasOwnProperty("y")&&r.hasOwnProperty("z"))return r;r=x(r);if(0==r.length)return{x:0,y:0,z:0};r=c.getExtent(r);return{x:r[0][0]+(r[1][0]-r[0][0])/2,y:r[0][1]+(r[1][1]-r[0][1])/2,z:r[0][2]+(r[1][2]-r[0][2])/2}};this.addSphere=function(r){(r=r||{}).center=tb(r.center);var E=new c.GLShape(r);return E.shapePosition=D.length,E.addSphere(r),D.push(E),E.finalize(),E};this.addBox=function(r){null!=(r=r||{}).corner&&
(r.corner=tb(r.corner));null!=r.center&&(r.center=tb(r.center));var E=new c.GLShape(r);return E.shapePosition=D.length,E.addBox(r),D.push(E),E.finalize(),E};this.addArrow=function(r){(r=r||{}).start=tb(r.start);r.end=tb(r.end);var E=new c.GLShape(r);return E.shapePosition=D.length,E.addArrow(r),D.push(E),E.finalize(),E};this.addCylinder=function(r){(r=r||{}).start=tb(r.start);r.end=tb(r.end);var E=new c.GLShape(r);return E.shapePosition=D.length,r.dashed?E.addDashedCylinder(r):E.addCylinder(r),D.push(E),
E.finalize(),E};this.addCurve=function(r){r=r||{};var E=new c.GLShape(r);return E.shapePosition=D.length,E.addCurve(r),D.push(E),E.finalize(),E};this.addLine=function(r){(r=r||{}).start=tb(r.start);r.end=tb(r.end);r.wireframe=!0;var E=new c.GLShape(r);E.shapePosition=D.length;if(r.dashed){r.dashLength=r.dashLength||.5;r.gapLength=r.gapLength||.5;r.start=r.start||{};r.end=r.end||{};var ea,ja=new c.Vector3(r.start.x||0,r.start.y||0,r.start.z||0),va=new c.Vector3(r.end.x,r.end.y||0,r.end.z||0);var Aa=
new c.Vector3;new c.Vector3;new c.Vector3;var xa=ja.clone(),Ba=0;Aa.subVectors(va,ja);var Ea=Aa.length();Aa.normalize();var za=Aa.clone();var Sa=Aa.clone();za.multiplyScalar(r.dashLength);Sa.multiplyScalar(r.gapLength);Aa=za.length();for(ea=Sa.length();Ba<Ea;){if(Ba+Aa>Ea){r.start=ja;r.end=va;E.addLine(r);break}xa.addVectors(ja,za);r.start=ja;r.end=xa;E.addLine(r);ja=xa.clone();Ba+=Aa;xa.addVectors(ja,Sa);ja=xa.clone();Ba+=ea}E=(E.finalize(),E)}else E.addLine(r);return D.push(E),E.finalize(),E};this.addUnitCell=
function(r,E){r=this.getModel(r);(E=E||{alabel:"a",blabel:"b",clabel:"c"}).box=E.box||{};E.astyle=E.astyle||{color:"red",radius:.1,midpos:-1};E.bstyle=E.bstyle||{color:"green",radius:.1,midpos:-1};E.cstyle=E.cstyle||{color:"blue",radius:.1,midpos:-1};E.alabelstyle=E.alabelstyle||{fontColor:"red",showBackground:!1,alignment:"center",inFront:!1};E.blabelstyle=E.blabelstyle||{fontColor:"green",showBackground:!1,alignment:"center",inFront:!1};E.clabelstyle=E.clabelstyle||{fontColor:"blue",showBackground:!1,
alignment:"center",inFront:!1};r.unitCellObjects&&this.removeUnitCell(r);r.unitCellObjects={shapes:[],labels:[]};var ea=r.getCrystData();if(ea){if(ea.matrix)var ja=ea.matrix;else{var va=ea.a;ja=ea.b;var Aa=ea.c;var xa=ea.alpha;var Ba=ea.beta,Ea=ea.gamma;xa=xa*Math.PI/180;Ba=Ba*Math.PI/180;Ea=Ea*Math.PI/180;ea=Math.cos(Ba);xa=(Math.cos(xa)-Math.cos(Ba)*Math.cos(Ea))/Math.sin(Ea);ja=new c.Matrix4(va,ja*Math.cos(Ea),Aa*ea,0,0,ja*Math.sin(Ea),Aa*xa,0,0,0,Aa*Math.sqrt(Math.max(0,1-ea*ea-xa*xa)),0,0,0,
0,1)}va=[new c.Vector3(0,0,0),new c.Vector3(1,0,0),new c.Vector3(0,1,0),new c.Vector3(0,0,1),new c.Vector3(1,1,0),new c.Vector3(0,1,1),new c.Vector3(1,0,1),new c.Vector3(1,1,1)];for(Aa=0;Aa<va.length;Aa++)va[Aa]=va[Aa].applyMatrix4(ja);E.box&&!E.box.hidden&&(E.box.wireframe=!0,ja=new c.GLShape(E.box),ja.shapePosition=D.length,ja.addLine({start:va[0],end:va[1]}),ja.addLine({start:va[0],end:va[2]}),ja.addLine({start:va[1],end:va[4]}),ja.addLine({start:va[2],end:va[4]}),ja.addLine({start:va[0],end:va[3]}),
ja.addLine({start:va[3],end:va[5]}),ja.addLine({start:va[2],end:va[5]}),ja.addLine({start:va[1],end:va[6]}),ja.addLine({start:va[4],end:va[7]}),ja.addLine({start:va[6],end:va[7]}),ja.addLine({start:va[3],end:va[6]}),ja.addLine({start:va[5],end:va[7]}),D.push(ja),r.unitCellObjects.shapes.push(ja),ja.finalize());E.astyle.hidden||(E.astyle.start=va[0],E.astyle.end=va[1],ja=this.addArrow(E.astyle),r.unitCellObjects.shapes.push(ja));E.bstyle.hidden||(E.bstyle.start=va[0],E.bstyle.end=va[2],ja=this.addArrow(E.bstyle),
r.unitCellObjects.shapes.push(ja));E.cstyle.hidden||(E.cstyle.start=va[0],E.cstyle.end=va[3],ja=this.addArrow(E.cstyle),r.unitCellObjects.shapes.push(ja));E.alabel&&(E.alabelstyle.position=va[1],ja=this.addLabel(E.alabel,E.alabelstyle),r.unitCellObjects.labels.push(ja));E.blabel&&(E.blabelstyle.position=va[2],ja=this.addLabel(E.blabel,E.blabelstyle),r.unitCellObjects.labels.push(ja));E.clabel&&(E.clabelstyle.position=va[3],E=this.addLabel(E.clabel,E.clabelstyle),r.unitCellObjects.labels.push(E))}};
this.removeUnitCell=function(r){if((r=this.getModel(r)).unitCellObjects){let E=this;r.unitCellObjects.shapes.forEach(function(ea){E.removeShape(ea)});r.unitCellObjects.labels.forEach(function(ea){E.removeLabel(ea)})}delete r.unitCellObjects};this.replicateUnitCell=function(r,E,ea,ja){r=r||3;E=E||r;ea=ea||E;var va=(ja=this.getModel(ja)).getCrystData();if(va){let Aa=ja.selectedAtoms({});va=c.conversionMatrix3(va.a,va.b,va.c,va.alpha,va.beta,va.gamma);let xa=function(Ba){return 0==Ba%2?-Ba/2:Math.ceil(Ba/
2)};for(let Ba=0;Ba<r;Ba++)for(let Ea=0;Ea<E;Ea++)for(let za=0;za<ea;za++){if(0==Ba&&0==Ea&&0==za)continue;let Sa=new c.Vector3(xa(Ba),xa(Ea),xa(za));Sa.applyMatrix3(va);let eb=[];for(let Ma=0;Ma<Aa.length;Ma++){let sb={};for(let Yb in Aa[Ma])sb[Yb]=Aa[Ma][Yb];sb.x+=Sa.x;sb.y+=Sa.y;sb.z+=Sa.z;eb.push(sb)}ja.addAtoms(eb)}}};this.addCustom=function(r){r=r||{};var E=new c.GLShape(r);return E.shapePosition=D.length,E.addCustom(r),D.push(E),E.finalize(),E};this.addVolumetricData=function(r,E,ea){ea=ea||
{};r=new c.VolumeData(r,E);return ea.transferfn?this.addVolumetricRender(r,ea):this.addIsosurface(r,ea)};this.addIsosurface=function(r,E,ea){E=E||{};var ja=new c.GLShape(E);return ja.shapePosition=D.length,ja.addIsosurface(r,E,ea),D.push(ja),ja};this.addVolumetricRender=function(r,E){E=E||{};r=new c.GLVolumetricRender(r,E);return r.shapePosition=D.length,D.push(r),r};this.hasVolumetricRender=function(){return S.supportsVolumetric()};this.enableFog=function(r){r?qa.fog=new c.Fog(L,100,200):(h.disableFog=
!0,ob())};this.setFrame=function(r){N=r;let E=this;return new Promise(function(ea){var ja=n.map(function(va){return va.setFrame(r,E)});Promise.all(ja).then(function(){ea()})})};this.getFrame=function(){return N};this.getNumFrames=function(){var r=0;for(var E=0;E<n.length;E++)n[E].getNumFrames()>r&&(r=n[E].getNumFrames());for(E=0;E<D.length;E++)D[E].frame&&D[E].frame>=r&&(r=D[E].frame+1);for(E=0;E<l.length;E++)l[E].frame&&l[E].frame>=r&&(r=l[E].frame+1);return r};this.animate=function(r){Ja++;var E=
100,ea="forward",ja=0;(r=r||{}).interval&&(E=r.interval);r.loop&&(ea=r.loop);r.reps&&(ja=r.reps);var va=this.getNumFrames(),Aa=this,xa=0,Ba=1;r.step&&(ja/=Ba=r.step);var Ea,za,Sa=0,eb=va*ja,Ma=new Date,sb=function(Yb){Ma=new Date;"forward"==Yb?Aa.setFrame(xa).then(function(){xa=(xa+Ba)%va;Ea()}):"backward"==Yb?Aa.setFrame(va-1-xa).then(function(){xa=(xa+Ba)%va;Ea()}):Aa.setFrame(xa).then(function(){Ba*=0==(xa+=Ba)%(va-1)?-1:1;Ea()})};return Ea=function(){if(Aa.render(),++Sa!=eb&&Aa.isAnimated()){var Yb=
E-(new Date-Ma);Yb=0<Yb?Yb:0;Na.delete(za);za=setTimeout(sb,Yb,ea);Na.add(za)}else clearTimeout(za),Na.delete(za),tc()},za=setTimeout(sb,0,ea),Na.add(za),this};this.stopAnimate=function(){return Ja=0,Na.forEach(function(r){clearTimeout(r)}),Na=new Set,this};this.isAnimated=function(){return 0<Ja};this.addModel=function(r,E,ea){ea&&!ea.defaultcolors?(ea.defaultcolors=C,ea.cartoonQuality=h.cartoonQuality):void 0===ea&&(ea={defaultcolors:C,cartoonQuality:h.cartoonQuality});var ja=new c.GLModel(n.length,
ea);return ja.addMolData(r,E,ea),n.push(ja),ja};this.addModels=function(r,E,ea){(ea=ea||{}).multimodel=!0;ea.frames=!0;r=c.GLModel.parseMolData(r,E,ea);for(E=0;E<r.length;E++){var ja=new c.GLModel(n.length,C);ja.setAtomDefaults(r[E]);ja.addFrame(r[E]);ja.setFrame(0);r.modelData&&ja.setModelData(r.modelData[E]);ja.setDontDuplicateAtoms(!ea.duplicateAssemblyAtoms);n.push(ja)}return n};this.addModelsAsFrames=function(r,E,ea){(ea=ea||{}).multimodel=!0;ea.frames=!0;var ja=new c.GLModel(n.length,C);return ja.addMolData(r,
E,ea),n.push(ja),ja};this.addAsOneMolecule=function(r,E,ea){(ea=ea||{}).multimodel=!0;ea.onemol=!0;var ja=new c.GLModel(n.length,C);return ja.addMolData(r,E,ea),n.push(ja),ja};this.removeModel=function(r){if(r=this.getModel(r)){r.removegl(ta);for(delete n[r.getID()];0<n.length&&void 0===n[n.length-1];)n.pop();return this}};this.removeAllModels=function(){for(var r=0;r<n.length;r++){var E=n[r];E&&E.removegl(ta)}return n.splice(0,n.length),this};this.exportJSON=function(r,E){var ea={};return ea.m=void 0===
E?n.map(function(ja){return ja.toCDObject(r)}):[n[E].toCDObject()],JSON.stringify(ea)};this.exportVRML=function(){var r=ta;p("removegl",ta);ta=new c.Object3D;this.render(null,{supportsImposters:!1,supportsAIA:!1,regen:!0});var E="#VRML V2.0 utf8\n"+ta.vrml()+"\n";return p("removegl",ta),ta=r,E};this.createModelFrom=function(r,E){for(var ea=new c.GLModel(n.length,C),ja=0;ja<n.length;ja++)if(n[ja]){var va=n[ja].selectedAtoms(r);ea.addAtoms(va);E&&n[ja].removeAtoms(va)}return n.push(ea),ea};this.setStyle=
function(r,E){return void 0===E&&(E=r,r={}),p("setStyle",r,E,!1),this};this.addStyle=function(r,E){return void 0===E&&(E=r,r={}),p("setStyle",r,E,!0),this};this.setClickable=function(r,E,ea){return p("setClickable",r,E,ea),this};this.setHoverable=function(r,E,ea,ja){return p("setHoverable",r,E,ea,ja),this};this.vibrate=function(r,E,ea,ja){return p("vibrate",r,E,ea,this,ja),this};this.setColorByProperty=function(r,E,ea,ja){return p("setColorByProperty",r,E,ea,ja),this};this.setColorByElement=function(r,
E){return p("setColorByElement",r,E),this};var zb=function(r,E){for(var ea=[],ja=0;ja<r.length;ja++){var va=r[ja];void 0!==va&&(va.x<E[0][0]||va.x>E[1][0]||va.y<E[0][1]||va.y>E[1][1]||va.z<E[0][2]||va.z>E[1][2]||ea.push(va))}return ea},Qa=function(r){return(r[1][0]-r[0][0])*(r[1][1]-r[0][1])*(r[1][2]-r[0][2])},Ab=function(r,E,ea){var ja=new c.Geometry(!0),va=ja.updateGeoGroup(0),Aa=[];for(let Ma=0,sb=r.length;Ma<sb;Ma++){var xa=r[Ma];xa&&(void 0!==xa.surfaceColor?Aa[Ma]=xa.surfaceColor:xa.color&&
(Aa[Ma]=c.CC.color(xa.color)))}xa=va.vertexArray;r=E.vertices;for(let Ma=0,sb=r.length;Ma<sb;Ma++){var Ba=3*va.vertices;xa[Ba]=r[Ma].x;xa[Ba+1]=r[Ma].y;xa[Ba+2]=r[Ma].z;va.vertices++}xa=va.colorArray;if(ea.voldata&&ea.volscheme){Aa=ea.volscheme;Ba=ea.voldata;var Ea=Aa.range()||[-1,1];for(let Ma=0,sb=r.length;Ma<sb;Ma++){var za=Ba.getVal(r[Ma].x,r[Ma].y,r[Ma].z);za=c.CC.color(Aa.valueToHex(za,Ea));var Sa=3*Ma;xa[Sa]=za.r;xa[Sa+1]=za.g;xa[Sa+2]=za.b}}else if(0<Aa.length)for(let Ma=0,sb=r.length;Ma<
sb;Ma++)Ba=r[Ma].atomid,Ea=3*Ma,xa[Ea]=Aa[Ba].r,xa[Ea+1]=Aa[Ba].g,xa[Ea+2]=Aa[Ba].b;E=E.faces;va.faceidx=E.length;ja.initTypedArrays();var eb;r=va.vertexArray;xa=va.normalArray;for(let Ma=0,sb=E.length;Ma<sb;Ma+=3)Aa=3*E[Ma],Ba=3*E[Ma+1],Ea=3*E[Ma+2],za=new c.Vector3(r[Aa],r[Aa+1],r[Aa+2]),Sa=new c.Vector3(r[Ba],r[Ba+1],r[Ba+2]),(eb=new c.Vector3(r[Ea],r[Ea+1],r[Ea+2])).subVectors(eb,Sa),za.subVectors(za,Sa),eb.cross(za),(za=eb).normalize(),xa[Aa]+=za.x,xa[Ba]+=za.x,xa[Ea]+=za.x,xa[Aa+1]+=za.y,xa[Ba+
1]+=za.y,xa[Ea+1]+=za.y,xa[Aa+2]+=za.z,xa[Ba+2]+=za.z,xa[Ea+2]+=za.z;va.faceArray=new Uint16Array(E);ea=new c.Mesh(ja,ea);return ea.doubleSided=!0,ea};this.addMesh=function(r){r={geo:r.geometry,mat:r.material,done:!0,finished:!1};var E=ab();return y[E]=r,E};var jc=function(r){var E=[];return bb.each(r,function(ea,ja){E[ea]=bb.extend({},ja)}),E},Zb={VDW:c.SurfaceType.VDW,MS:c.SurfaceType.MS,SAS:c.SurfaceType.SAS,SES:c.SurfaceType.SES},cc=function(r){if(r instanceof c.Gradient)return r;if(void 0!==
r.gradient&&c.Gradient.builtinGradients[r.gradient]){let E=void 0===r.min?-1:r.min,ea=void 0===r.max?1:r.max;return void 0===r.mid?new c.Gradient.builtinGradients[r.gradient](E,ea):new c.Gradient.builtinGradients[r.gradient](E,ea,r.mid)}return r};this.addSurface=function(r,E,ea,ja,va,Aa){var xa=ab(),Ba=null;"string"==typeof r?void 0!==Zb[r]?r=Zb[r]:console.log("Surface type : "+r+" is not recognized"):void 0===r&&(r=c.SurfaceType.VDW);var Ea=null;ea=jc(x(ea));ja=ja?jc(x(ja)):ea;!E||!E.volformat||
E.voldata instanceof c.VolumeData||(E.voldata=new c.VolumeData(E.voldata,E.volformat));E&&E.volscheme&&(E.volscheme=cc(E.volscheme));var za,Sa=!1;for(za=0;za<n.length;za++)if(n[za]){var eb=n[za].getSymmetries();if(1<eb.length||1==eb.length&&!eb[0].isIdentity()){Sa=!0;break}}eb=function(Yb,nc,oc){var Nb;Ea=va?jc(x(va)):oc;var sc=c.getExtent(oc,!0);if(E.map&&E.map.prop){var xc=E.map.prop,Gc=E.map.scheme||E.map.gradient||new c.Gradient.RWB,$b=Gc.range();$b||=c.getPropertyRange(oc,xc);E.colorscheme={prop:xc,
gradient:Gc}}for(let Eb=0,hc=nc.length;Eb<hc;Eb++)(Nb=nc[Eb]).surfaceColor=c.getColorFromStyle(Nb,E);var Cc=Qa(sc),kc=function(Eb,hc,Ib){for(var lc=[],Ob={},yb=0,Ta=hc.length;yb<Ta;yb++)Ob[hc[yb].index]=yb;yb=function(kb){for(var Db=[],Ub=0,Nc=kb.length;Ub<Nc;Ub++)kb[Ub].index in Ob&&Db.push(Ob[kb[Ub].index]);return Db};var Rb=function(kb){var Db=[];return Db[0]=[kb[0][0],kb[0][1],kb[0][2]],Db[1]=[kb[1][0],kb[1][1],kb[1][2]],Db},Fb=function(kb){if(64E3>Qa(kb))return[kb];var Db=kb[1][0]-kb[0][0];var Ub=
kb[1][1]-kb[0][1];var Nc=kb[1][2]-kb[0][2];Ub=Db>Ub&&Db>Nc?0:Ub>Db&&Ub>Nc?1:2;Nc=Rb(kb);Db=Rb(kb);kb=(kb[1][Ub]-kb[0][Ub])/2+kb[0][Ub];Nc[1][Ub]=kb;Db[0][Ub]=kb;kb=Fb(Nc);Db=Fb(Db);return kb.concat(Db)};Eb=Fb(Eb);for(let kb=0,Db=Eb.length;kb<Db;kb++){Ta=Rb(Eb[kb]);Ta[0][0]-=6;Ta[0][1]-=6;Ta[0][2]-=6;Ta[1][0]+=6;Ta[1][1]+=6;Ta[1][2]+=6;Ta=zb(hc,Ta);var Yc=zb(Ib,Eb[kb]);lc.push({extent:Eb[kb],atoms:yb(Ta),toshow:yb(Yc)})}return lc}(sc,nc,oc);if(Ea&&Ea.length&&0<Ea.length){var lb=c.getExtent(Ea,!0);
kc.sort(function(Eb,hc){var Ib=function(lc,Ob){var yb=lc.extent;lc=yb[1][0]-yb[0][0]-Ob[2][0];var Ta=yb[1][1]-yb[0][1]-Ob[2][1];Ob=yb[1][2]-yb[0][2]-Ob[2][2];return lc*lc+Ta*Ta+Ob*Ob};return Ib(Eb,lb)-Ib(hc,lb)})}var Vc=[];for(let Eb=0,hc=nc.length;Eb<hc;Eb++)Nb=nc[Eb],Vc[Eb]={x:Nb.x,y:Nb.y,z:Nb.z,serial:Eb,elem:Nb.elem};if(c.syncSurface){oc=function(Eb){return new Promise(function(hc){var Ib=r,lc=kc[Eb].extent,Ob=kc[Eb].atoms;var yb=kc[Eb].toshow;var Ta=new c.ProteinSurface;yb=(Ta.initparm(lc,1!==
Ib,Cc),Ta.fillvoxels(Vc,Ob),Ta.buildboundary(),Ib!=c.SurfaceType.SES&&Ib!=c.SurfaceType.MS||(Ta.fastdistancemap(),Ta.boundingatom(!1),Ta.fillvoxelswaals(Vc,Ob)),Ta.marchingcube(Ib),Ta.getFacesAndVertices(yb));Ib=c.splitMesh({vertexArr:yb.vertices,faceArr:yb.faces});lc=0;for(Ob=Ib.length;lc<Ob;lc++)yb={vertices:Ib[lc].vertexArr,faces:Ib[lc].faceArr},yb=Ab(nc,yb,Ba),c.mergeGeos(Yb.geo,yb);e.render();hc()})};Nb=[];for(sc=0;sc<kc.length;sc++)Nb.push(oc(sc));return Promise.all(Nb).then(function(){return Yb.done=
!0,Promise.resolve(xa)})}var Sb=[];0>r&&(r=0);for(let Eb=0,hc=4;Eb<hc;Eb++)oc=new Worker(c.SurfaceWorker),Sb.push(oc),oc.postMessage({type:-1,atoms:Vc,volume:Cc});return new Promise(function(Eb,hc){var Ib=0,lc=function(Ta){Ta=c.splitMesh({vertexArr:Ta.data.vertices,faceArr:Ta.data.faces});for(var Rb=0,Fb=Ta.length;Rb<Fb;Rb++){var Yc=Ab(nc,{vertices:Ta[Rb].vertexArr,faces:Ta[Rb].faceArr},Ba);c.mergeGeos(Yb.geo,Yc)}e.render();++Ib==kc.length&&(Yb.done=!0,Eb(xa))},Ob=function(Ta){console.log(Ta.message+
" ("+Ta.filename+":"+Ta.lineno+")");hc(Ta)};for(let Ta=0;Ta<kc.length;Ta++){var yb=Sb[Ta%Sb.length];yb.onmessage=lc;yb.onerror=Ob;yb.postMessage({type:r,expandedExtent:kc[Ta].extent,extendedAtoms:kc[Ta].atoms,atomsToShow:kc[Ta].toshow})}})};Ba=w(E=E||{});var Ma=[];za=null;if(Sa){Sa={};var sb={};for(za=0;za<n.length;za++)Sa[za]=[],sb[za]=[];for(za=0;za<ja.length;za++)Sa[ja[za].model].push(ja[za]);for(za=0;za<ea.length;za++)sb[ea[za].model].push(ea[za]);ea=[];for(za=0;za<n.length;za++)0<sb[za].length&&
(Ma.push({geo:new c.Geometry(!0),mat:Ba,done:!1,finished:!1,symmetries:n[za].getSymmetries()}),ea.push(eb(Ma[za],Sa[za],sb[za])));za=Promise.all(ea)}else Ma.push({geo:new c.Geometry(!0),mat:Ba,done:!1,finished:!1,symmetries:[new c.Matrix4]}),za=eb(Ma[Ma.length-1],ja,ea);return y[xa]=Ma,za.surfid=xa,Aa&&"function"==typeof Aa?(za.then(function(Yb){Aa(Yb)}),xa):za};this.setSurfaceMaterialStyle=function(r,E){if(!E.volformat||E.voldata instanceof c.VolumeData||(E.voldata=new c.VolumeData(E.voldata,E.volformat)),
E.volscheme&&(E.volscheme=cc(E.volscheme)),y[r]){r=y[r];for(var ea=0;ea<r.length;ea++){var ja=r[ea].mat=w(E);if(r[ea].mat.side=c.FrontSide,E.color){r[ea].mat.color=E.color;r[ea].geo.colorsNeedUpdate=!0;const va=c.CC.color(E.color);r[ea].geo.setColors(function(){return va})}else if(ja.voldata&&ja.volscheme){const va=ja.volscheme,Aa=ja.voldata,xa=c.CC,Ba=va.range()||[-1,1];r[ea].geo.setColors(function(Ea,za,Sa){Ea=Aa.getVal(Ea,za,Sa);return xa.color(va.valueToHex(Ea,Ba))})}r[ea].finished=!1}}return this};
this.removeSurface=function(r){for(var E=y[r],ea=0;ea<E.length;ea++)E[ea]&&E[ea].lastGL&&(void 0!==E[ea].geo&&E[ea].geo.dispose(),void 0!==E[ea].mat&&E[ea].mat.dispose(),ta.remove(E[ea].lastGL));return delete y[r],ob(),this};this.removeAllSurfaces=function(){for(var r in y)if(y.hasOwnProperty(r)){for(var E=y[r],ea=0;ea<E.length;ea++)E[ea]&&E[ea].lastGL&&(void 0!==E[ea].geo&&E[ea].geo.dispose(),void 0!==E[ea].mat&&E[ea].mat.dispose(),ta.remove(E[ea].lastGL));delete y[r]}return ob(),this};this.jmolMoveTo=
function(){var r=ta.position,E=na.quaternion;return"center { "+-r.x+" "+-r.y+" "+-r.z+" }; moveto .5 quaternion { "+E.x+" "+E.y+" "+E.z+" "+E.w+" };"};this.clear=function(){return this.removeAllSurfaces(),this.removeAllModels(),this.removeAllLabels(),this.removeAllShapes(),ob(),this};this.mapAtomProperties=function(r,E){E=x(E||{});if("function"==typeof r)for(let Ea=0,za=E.length;Ea<za;Ea++)r(E[Ea]);else for(let Ea=0,za=E.length;Ea<za;Ea++){var ea=E[Ea];for(let Sa=0,eb=r.length;Sa<eb;Sa++){let Ma=
r[Sa];if(Ma.props)for(var ja in Ma.props){var va;if(va=Ma.props.hasOwnProperty(ja))a:{va=ea;var Aa=Ma;void 0===Aa&&(Aa={});for(var xa=q(Aa),Ba=0;Ba<xa.length;Ba++)if(xa[Ba].atomIsSelected(va,Aa)){va=!0;break a}va=!1}va&&(ea.properties||(ea.properties={}),ea.properties[ja]=Ma.props[ja])}}}return this};this.linkViewer=function(r){return U.push(r),this};try{"function"==typeof v&&v(this)}catch(r){console.log("error with glviewer callback: "+r)}this.getPerceivedDistance=function(){return 150-na.position.z};
this.setPerceivedDistance=function(r){na.position.z=150-r};this.setAutoEyeSeparation=function(r){var E=this.getPerceivedDistance();return r||0<R.position.x?R.position.x=E*Math.tan(Math.PI/180*5):R.position.x=-E*Math.tan(Math.PI/180*5),R.lookAt(new c.Vector3(0,0,na.position.z)),R.position.x};this.setDefaultCartoonQuality=function(r){h.cartoonQuality=r}};c.glmolViewer=c.GLViewer;c=c||{};c.Gradient=function(){};c.Gradient.valueToHex=function(){};c.Gradient.range=function(){};c.Gradient.normalizeValue=
function(d,h,q){return h>=d?(q<d&&(q=d),q>h&&(q=h),{lo:d,hi:h,val:q}):(q>d&&(q=d),q<h&&(q=h),{lo:h,hi:d,val:d-q+h})};c.Gradient.RWB=function(d,h,q){void 0===h&&bb.isArray(d)&&2<=d.length&&(h=d[1],d=d[0]);this.valueToHex=function(x,p){var w,v;if(x*=1,p?(w=p[0],v=p[1]):(w=d,v=h),void 0===x)return 16777215;var C=c.Gradient.normalizeValue(w,v,x);w=C.lo;var M,L=v=C.hi;return(x=C.val)<=(L=p&&void 0!==p[2]?p[2]:void 0!==q?q:(w+v)/2)?16711680+256*(M=Math.floor(255*Math.sqrt((x-w)/(L-w))))+M:65536*(M=Math.floor(255*
Math.sqrt(1-(x-L)/(v-L))))+256*M+255};this.range=function(){return void 0!==d&&void 0!==h?[d,h]:null}};c.Gradient.ROYGB=function(d,h){void 0===h&&bb.isArray(d)&&2<=d.length&&(h=d[1],d=d[0]);this.valueToHex=function(q,x){var p,w;if(q*=1,x?(p=x[0],w=x[1]):(p=d,w=h),void 0===q)return 16777215;x=c.Gradient.normalizeValue(p,w,q);var v=((p=x.lo)+(w=x.hi))/2,C=(p+v)/2,M=(v+w)/2;return(q=x.val)<C?16711680+256*Math.floor(255*Math.sqrt((q-p)/(C-p))):q<v?65536*Math.floor(255*Math.sqrt(1-(q-C)/(v-C)))+65280:
q<M?65280+1*Math.floor(255*Math.sqrt((q-v)/(M-v))):256*Math.floor(255*Math.sqrt(1-(q-M)/(w-M)))+255};this.range=function(){return void 0!==d&&void 0!==h?[d,h]:null}};c.Gradient.Sinebow=function(d,h){var q=1;void 0===h&&bb.isArray(d)&&2<=d.length&&(h=d[1],d=d[0]);h<d&&(q=-1,d*=-1,h*=-1);this.valueToHex=function(x,p){var w,v;if(x*=q,p?(w=p[0],v=p[1]):(w=d,v=h),void 0===x)return 16777215;x=c.Gradient.normalizeValue(w,v,x);w=x.lo;v=x.hi;x=(x.val-w)/(v-w)*5/6+.5;w=Math.sin(Math.PI*x);v=Math.sin(Math.PI*
(x+1/3));x=Math.sin(Math.PI*(x+2/3));return x*=255*x,65536*Math.floor(255*w*w)+256*Math.floor(x)+1*Math.floor(255*v*v)};this.range=function(){return void 0!==d&&void 0!==h?[d,h]:null}};c.Gradient.builtinGradients={rwb:c.Gradient.RWB,roygb:c.Gradient.ROYGB,sinebow:c.Gradient.Sinebow};c.LabelCount=0;c.Label=function(d,h){this.id=c.LabelCount++;this.stylespec=h||{};this.canvas=document.createElement("canvas");this.canvas.width=134;this.canvas.height=35;this.context=this.canvas.getContext("2d");this.sprite=
new c.Sprite;this.text=d;this.frame=this.stylespec.frame};c.Label.prototype={constructor:c.Label,getStyle:function(){return this.stylespec},setContext:function(){var d=function(h,q,x){return void 0!==h&&(h instanceof c.Color?x=h.scaled():void 0!==(x=c.CC.color(h)).scaled&&(x=x.scaled())),void 0!==q&&(x.a=parseFloat(q)),x};return function(){var h=this.stylespec,q=void 0!==h.useScreen&&h.useScreen,x=h.showBackground;"0"!==x&&"false"!==x||(x=!1);void 0===x&&(x=!0);var p=h.font?h.font:"sans-serif",w=
parseInt(h.fontSize)?parseInt(h.fontSize):18,v=d(h.fontColor,h.fontOpacity,{r:255,g:255,b:255,a:1}),C=h.padding?h.padding:4,M=h.borderThickness?h.borderThickness:0,L=d(h.backgroundColor,h.backgroundOpacity,{r:0,g:0,b:0,a:1}),P=d(h.borderColor,h.borderOpacity,L),e=h.position?h.position:{x:-10,y:1,z:1},g=void 0===h.inFront||h.inFront;"false"!==g&&"0"!==g||(g=!1);var u=h.alignment||c.SpriteAlignment.topLeft;"string"==typeof u&&u in c.SpriteAlignment&&(u=c.SpriteAlignment[u]);var n="";h.bold&&(n="bold ");
this.context.font=n+w+"px  "+p;var y=this.context.measureText(this.text).width;x||(M=0);var D=y+2.5*M+2*C,l=1.25*w+2*M+2*C;if(h.backgroundImage){var B=h.backgroundImage;n=h.backgroundWidth?h.backgroundWidth:B.width;B=h.backgroundHeight?h.backgroundHeight:B.height;n>D&&(D=n);B>l&&(l=B)}this.canvas.width=D;this.canvas.height=l;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);n="";h.bold&&(n="bold ");this.context.font=n+w+"px  "+p;this.context.fillStyle="rgba("+L.r+","+L.g+","+L.b+","+
L.a+")";this.context.strokeStyle="rgba("+P.r+","+P.g+","+P.b+","+P.a+")";this.context.lineWidth=M;x&&(x=this.context,L=p=M,D-=2*M,l-=2*M,P=0<M,x.beginPath(),x.moveTo(p+6,L),x.lineTo(p+D-6,L),x.quadraticCurveTo(p+D,L,p+D,L+6),x.lineTo(p+D,L+l-6),x.quadraticCurveTo(p+D,L+l,p+D-6,L+l),x.lineTo(p+6,L+l),x.quadraticCurveTo(p,L+l,p,L+l-6),x.lineTo(p,L+6),x.quadraticCurveTo(p,L,p+6,L),x.closePath(),x.fill(),P&&x.stroke());h.backgroundImage&&(l=h.backgroundImage,this.context.drawImage(l,0,0,h.backgroundWidth?
h.backgroundWidth:l.width,h.backgroundHeight?h.backgroundHeight:l.height));this.context.fillStyle="rgba("+v.r+","+v.g+","+v.b+","+v.a+")";this.context.fillText(this.text,M+C,w+M+C,y);h=new c.Texture(this.canvas);h.needsUpdate=!0;this.sprite.material=new c.SpriteMaterial({map:h,useScreenCoordinates:q,alignment:u,depthTest:!g});this.sprite.scale.set(1,1,1);this.sprite.position.set(e.x,e.y,e.z)}}(),dispose:function(){void 0!==this.sprite.material.map&&this.sprite.material.map.dispose();void 0!==this.sprite.material&&
this.sprite.material.dispose()}};c=c||{};c.MarchingCubeInitializer=function(){var d,h,q,x,p={march:function(w,v,C,M){var L=!!M.fulltable,P=M.hasOwnProperty("origin")&&M.origin.hasOwnProperty("x")?M.origin:{x:0,y:0,z:0},e=!!M.voxel,g=M.matrix,u=M.nX||0,n=M.nY||0,y=M.nZ||0,D=M.scale||1;var l=M.unitCube?M.unitCube:{x:D,y:D,z:D};var B=new Int32Array(u*n*y);M=0;for(D=B.length;M<D;++M)B[M]=-1;D=function(ha,U,S,ba,Y,aa){var ia={x:0,y:0,z:0},z=Y;!(ba&1<<Y)&&ba&1<<aa&&(z=aa);1&z&&S++;2&z&&U++;4&z&&ha++;g?
ia={x:(ia=(ia=new c.Vector3(ha,U,S)).applyMatrix4(g)).x,y:ia.y,z:ia.z}:(ia.x=P.x+l.x*ha,ia.y=P.y+l.y*U,ia.z=P.z+l.z*S);ha=(n*ha+U)*y+S;return e?(v.push(ia),v.length-1):(0>B[ha]&&(B[ha]=v.length,v.push(ia)),B[ha])};var k=new Int32Array(12),J=L?h:d;L=L?x:q;for(M=0;M<u-1;++M)for(var m=0;m<n-1;++m)for(var K=0;K<y-1;++K){for(var N=0,Q=0;8>Q;++Q)N|=!!(2&w[(n*(M+((4&Q)>>2))+m+((2&Q)>>1))*y+K+(1&Q)])<<Q;if(0!==N&&255!==N){var H=J[N];if(0!==H)for(Q=L[N],1&H&&(k[0]=D(M,m,K,N,0,1)),2&H&&(k[1]=D(M,m,K,N,1,3)),
4&H&&(k[2]=D(M,m,K,N,3,2)),8&H&&(k[3]=D(M,m,K,N,2,0)),16&H&&(k[4]=D(M,m,K,N,4,5)),32&H&&(k[5]=D(M,m,K,N,5,7)),64&H&&(k[6]=D(M,m,K,N,7,6)),128&H&&(k[7]=D(M,m,K,N,6,4)),256&H&&(k[8]=D(M,m,K,N,0,4)),512&H&&(k[9]=D(M,m,K,N,1,5)),1024&H&&(k[10]=D(M,m,K,N,3,7)),2048&H&&(k[11]=D(M,m,K,N,2,6)),N=0;N<Q.length;N+=3){H=k[Q[N]];var V=k[Q[N+1]],W=k[Q[N+2]];e&&3<=N&&(v.push(v[H]),H=v.length-1,v.push(v[V]),V=v.length-1,v.push(v[W]),W=v.length-1);C.push(H);C.push(V);C.push(W)}}}},laplacianSmooth:function(w,v,C){var M,
L,P=Array(v.length);var e=0;for(M=v.length;e<M;e++)P[e]={x:0,y:0,z:0};var g=Array(20);for(e=0;20>e;e++)g[e]=Array(v.length);e=0;for(M=v.length;e<M;e++)g[0][e]=0;e=0;for(M=C.length/3;e<M;e++){var u=3*e,n=3*e+1,y=3*e+2;var D=!0;var l=0;for(L=g[0][C[u]];l<L;l++)if(C[n]==g[l+1][C[u]]){D=!1;break}D&&(g[0][C[u]]++,g[g[0][C[u]]][C[u]]=C[n]);D=!0;l=0;for(L=g[0][C[u]];l<L;l++)if(C[y]==g[l+1][C[u]]){D=!1;break}D&&(g[0][C[u]]++,g[g[0][C[u]]][C[u]]=C[y]);D=!0;l=0;for(L=g[0][C[n]];l<L;l++)if(C[u]==g[l+1][C[n]]){D=
!1;break}D&&(g[0][C[n]]++,g[g[0][C[n]]][C[n]]=C[u]);D=!0;l=0;for(L=g[0][C[n]];l<L;l++)if(C[y]==g[l+1][C[n]]){D=!1;break}D&&(g[0][C[n]]++,g[g[0][C[n]]][C[n]]=C[y]);D=!0;for(l=0;l<g[0][C[y]];l++)if(C[u]==g[l+1][C[y]]){D=!1;break}D&&(g[0][C[y]]++,g[g[0][C[y]]][C[y]]=C[u]);D=!0;l=0;for(L=g[0][C[y]];l<L;l++)if(C[n]==g[l+1][C[y]]){D=!1;break}D&&(g[0][C[y]]++,g[g[0][C[y]]][C[y]]=C[n])}for(C=0;C<w;C++){e=0;for(M=v.length;e<M;e++)if(3>g[0][e])P[e].x=v[e].x,P[e].y=v[e].y,P[e].z=v[e].z;else if(3==g[0][e]||4==
g[0][e]){P[e].x=0;P[e].y=0;l=P[e].z=0;for(L=g[0][e];l<L;l++)P[e].x+=v[g[l+1][e]].x,P[e].y+=v[g[l+1][e]].y,P[e].z+=v[g[l+1][e]].z;P[e].x+=.5*v[e].x;P[e].y+=.5*v[e].y;P[e].z+=.5*v[e].z;P[e].x/=.5+g[0][e];P[e].y/=.5+g[0][e];P[e].z/=.5+g[0][e]}else{P[e].x=0;P[e].y=0;l=P[e].z=0;for(L=g[0][e];l<L;l++)P[e].x+=v[g[l+1][e]].x,P[e].y+=v[g[l+1][e]].y,P[e].z+=v[g[l+1][e]].z;P[e].x+=1*v[e].x;P[e].y+=1*v[e].y;P[e].z+=1*v[e].z;P[e].x/=1+g[0][e];P[e].y/=1+g[0][e];P[e].z/=1+g[0][e]}e=0;for(M=v.length;e<M;e++)v[e].x=
P[e].x,v[e].y=P[e].y,v[e].z=P[e].z}},edgeTable:[0,0,0,0,0,0,0,2816,0,0,0,1792,0,3328,3584,3840,0,0,0,138,0,21,0,134,0,0,0,652,0,2067,3865,3600,0,0,0,42,0,0,0,294,0,0,21,28,0,3875,1049,3360,0,168,162,170,0,645,2475,2210,0,687,293,172,4010,3747,3497,3232,0,0,0,0,0,69,0,900,0,0,0,1792,138,131,1608,1920,0,81,0,2074,84,85,84,86,0,81,0,3676,330,1105,1881,1616,0,0,0,42,0,69,0,502,0,0,21,3580,138,2035,1273,1520,2816,104,2337,106,840,581,367,102,2816,3695,3429,3180,1898,1635,1385,1120,0,0,0,0,0,0,0,3910,0,
0,69,588,42,2083,41,2880,0,0,0,1722,0,2293,4095,3830,0,255,757,764,2538,2291,3065,2800,0,0,81,338,0,3925,1119,3414,84,855,85,340,2130,2899,89,2384,1792,712,194,1162,4036,3781,3535,3270,708,719,197,204,3018,2755,2505,2240,0,0,0,0,168,420,168,1958,162,162,676,2988,170,163,680,928,3328,3096,3328,3642,52,53,1855,1590,2340,2111,2869,2620,298,51,825,560,3584,3584,3090,3482,1668,1941,1183,1430,146,2975,2069,2460,154,915,153,400,3840,3592,3329,3082,1796,1541,1295,1030,2818,2575,2309,2060,778,515,265,0]};
return d=new Uint32Array(p.edgeTable),q=p.triTable=[[],[],[],[],[],[],[],[11,9,8],[],[],[],[8,10,9],[],[10,8,11],[9,11,10],[8,10,9,8,11,10],[],[],[],[1,7,3],[],[4,2,0],[],[2,1,7],[],[],[],[2,7,3,2,9,7],[],[1,4,11,1,0,4],[3,8,0,11,9,4,11,10,9],[4,11,9,11,10,9],[],[],[],[5,3,1],[],[],[],[2,5,8,2,1,5],[],[],[2,4,0],[3,2,4],[],[0,9,1,8,10,5,8,11,10],[3,4,0,3,10,4],[5,8,10,8,11,10],[],[3,5,7],[7,1,5],[1,7,3,1,5,7],[],[9,2,0,9,7,2],[0,3,8,1,7,11,1,5,7],[11,1,7,1,5,7],[],[9,1,0,5,3,2,5,7,3],[8,2,5,8,0,2],
[2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[],[],[],[],[],[0,6,2],[],[7,2,9,7,9,8],[],[],[],[8,10,9],[7,1,3],[7,1,0],[6,9,3,6,10,9],[7,10,8,10,9,8],[],[6,0,4],[],[11,1,4,11,3,1],[2,4,6],[2,0,4,2,4,6],[2,4,6],[1,4,2,4,6,2],[],[6,0,4],[],[2,11,3,6,9,4,6,10,9],[8,6,1,8,1,3],[10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[],[],[],[5,3,1],[],[0,6,2],[],[7,4,8,5,2,1,5,6,2],[],[],[2,4,0],[7,4,8,2,11,3,10,5,6],[7,1,3],[5,6,10,0,9,1,8,7,4],
[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[9,11,8],[3,5,6],[0,5,11,0,11,8],[6,3,5,3,1,5],[3,9,6,3,8,9],[9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[],[],[],[],[],[],[],[1,10,2,9,11,6,9,8,11],[],[],[6,0,2],[3,6,9,3,2,6],[3,5,1],[0,5,1,0,11,5],[0,3,5],[6,9,11,9,8,11],[],[],[],[4,5,9,7,1,10,7,3,1],[],[11,6,7,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[],[4,
1,0,4,5,1,6,7,3,6,3,2],[9,4,5,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[],[],[0,6,4],[8,6,4,8,1,6],[],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[4,2,6],[1,0,9,2,4,8,2,6,4],[2,4,0,2,6,4],[8,2,4,2,6,4],[11,4,1,11,6,4],[0,9,1,4,11,6,4,8,11],[3,6,0,6,4,0],[8,6,4,8,11,6],[10,8,9],[6,3,9,6,7,3],[6,7,1],[10,7,1,7,3,1],[7,11,6,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,
2,6,7,9,2],[1,0,9,3,6,7,3,2,6],[7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[],[],[],[],[5,3,7],[8,5,2,8,7,5],[5,3,7],[1,10,2,5,8,7,5,9,8],[1,7,5],[1,7,5],[9,2,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[0,7,1,7,5,1],[9,3,5,3,7,5],[9,7,5,9,8,7],[8,10,11],[3,4,10,3,10,11],[8,10,11],[5,9,4,1,11,3,1,10,11],[2,4,5],[5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[2,8,5,2,11,8],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[8,5,3,5,1,3],[5,0,4,5,
1,0],[3,8,0,4,5,9],[9,4,5],[11,9,10],[11,9,10],[1,11,4,1,10,11],[8,7,4,11,1,10,11,3,1],[2,7,9,2,9,10],[4,8,7,0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[1,7,4],[3,2,11,4,8,7,9,1,0],[11,4,2,4,0,2],[2,11,3,7,4,8],[4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[3,9,11,9,10,11],[0,10,8,10,11,8],[10,3,1,10,11,3],[2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],h=[0,265,515,778,2060,
2309,2575,2822,1030,1295,1541,1804,3082,3331,3593,3840,400,153,915,666,2460,2197,2975,2710,1430,1183,1941,1692,3482,3219,3993,3728,560,825,51,314,2620,2869,2111,2358,1590,1855,1077,1340,3642,3891,3129,3376,928,681,419,170,2988,2725,2479,2214,1958,1711,1445,1196,4010,3747,3497,3232,2240,2505,2755,3018,204,453,719,966,3270,3535,3781,4044,1226,1475,1737,1984,2384,2137,2899,2650,348,85,863,598,3414,3167,3925,3676,1370,1107,1881,1616,2800,3065,2291,2554,764,1013,255,502,3830,4095,3317,3580,1786,2035,1273,
1520,2912,2665,2403,2154,876,613,367,102,3942,3695,3429,3180,1898,1635,1385,1120,1120,1385,1635,1898,3180,3429,3695,3942,102,367,613,876,2154,2403,2665,2912,1520,1273,2035,1786,3580,3317,4095,3830,502,255,1013,764,2554,2291,3065,2800,1616,1881,1107,1370,3676,3925,3167,3414,598,863,85,348,2650,2899,2137,2384,1984,1737,1475,1226,4044,3781,3535,3270,966,719,453,204,3018,2755,2505,2240,3232,3497,3747,4010,1196,1445,1711,1958,2214,2479,2725,2988,170,419,681,928,3376,3129,3891,3642,1340,1077,1855,1590,
2358,2111,2869,2620,314,51,825,560,3728,3993,3219,3482,1692,1941,1183,1430,2710,2975,2197,2460,666,915,153,400,3840,3593,3331,3082,1804,1541,1295,1030,2822,2575,2309,2060,778,515,265,0],x=[[],[8,3,0],[9,0,1],[8,3,1,8,1,9],[11,2,3],[11,2,0,11,0,8],[11,2,3,0,1,9],[2,1,11,1,9,11,11,9,8],[10,1,2],[8,3,0,1,2,10],[9,0,2,9,2,10],[3,2,8,2,10,8,8,10,9],[10,1,3,10,3,11],[1,0,10,0,8,10,10,8,11],[0,3,9,3,11,9,9,11,10],[8,10,9,8,11,10],[8,4,7],[3,0,4,3,4,7],[1,9,0,8,4,7],[9,4,1,4,7,1,1,7,3],[2,3,11,7,8,4],[7,
11,4,11,2,4,4,2,0],[3,11,2,4,7,8,9,0,1],[2,7,11,2,1,7,1,4,7,1,9,4],[10,1,2,8,4,7],[2,10,1,0,4,7,0,7,3],[4,7,8,0,2,10,0,10,9],[2,7,3,2,9,7,7,9,4,2,10,9],[8,4,7,11,10,1,11,1,3],[11,4,7,1,4,11,1,11,10,1,0,4],[3,8,0,7,11,4,11,9,4,11,10,9],[7,11,4,4,11,9,11,10,9],[9,5,4],[3,0,8,4,9,5],[5,4,0,5,0,1],[4,8,5,8,3,5,5,3,1],[11,2,3,9,5,4],[9,5,4,8,11,2,8,2,0],[3,11,2,1,5,4,1,4,0],[8,5,4,2,5,8,2,8,11,2,1,5],[2,10,1,9,5,4],[0,8,3,5,4,9,10,1,2],[10,5,2,5,4,2,2,4,0],[3,4,8,3,2,4,2,5,4,2,10,5],[5,4,9,1,3,11,1,11,
10],[0,9,1,4,8,5,8,10,5,8,11,10],[3,4,0,3,10,4,4,10,5,3,11,10],[4,8,5,5,8,10,8,11,10],[9,5,7,9,7,8],[0,9,3,9,5,3,3,5,7],[8,0,7,0,1,7,7,1,5],[1,7,3,1,5,7],[11,2,3,8,9,5,8,5,7],[9,2,0,9,7,2,2,7,11,9,5,7],[0,3,8,2,1,11,1,7,11,1,5,7],[2,1,11,11,1,7,1,5,7],[1,2,10,5,7,8,5,8,9],[9,1,0,10,5,2,5,3,2,5,7,3],[5,2,10,8,2,5,8,5,7,8,0,2],[10,5,2,2,5,3,5,7,3],[3,9,1,3,8,9,7,11,10,7,10,5],[9,1,0,10,7,11,10,5,7],[3,8,0,7,10,5,7,11,10],[11,5,7,11,10,5],[11,7,6],[0,8,3,11,7,6],[9,0,1,11,7,6],[7,6,11,3,1,9,3,9,8],[2,
3,7,2,7,6],[8,7,0,7,6,0,0,6,2],[1,9,0,3,7,6,3,6,2],[7,6,2,7,2,9,2,1,9,7,9,8],[1,2,10,6,11,7],[2,10,1,7,6,11,8,3,0],[11,7,6,10,9,0,10,0,2],[7,6,11,3,2,8,8,2,10,8,10,9],[6,10,7,10,1,7,7,1,3],[6,10,1,6,1,7,7,1,0,7,0,8],[9,0,3,6,9,3,6,10,9,6,3,7],[6,10,7,7,10,8,10,9,8],[8,4,6,8,6,11],[11,3,6,3,0,6,6,0,4],[0,1,9,4,6,11,4,11,8],[1,9,4,11,1,4,11,3,1,11,4,6],[3,8,2,8,4,2,2,4,6],[2,0,4,2,4,6],[1,9,0,3,8,2,2,8,4,2,4,6],[9,4,1,1,4,2,4,6,2],[10,1,2,11,8,4,11,4,6],[10,1,2,11,3,6,6,3,0,6,0,4],[0,2,10,0,10,9,4,
11,8,4,6,11],[2,11,3,6,9,4,6,10,9],[8,4,6,8,6,1,6,10,1,8,1,3],[1,0,10,10,0,6,0,4,6],[8,0,3,9,6,10,9,4,6],[10,4,6,10,9,4],[9,5,4,7,6,11],[4,9,5,3,0,8,11,7,6],[6,11,7,4,0,1,4,1,5],[6,11,7,4,8,5,5,8,3,5,3,1],[4,9,5,6,2,3,6,3,7],[9,5,4,8,7,0,0,7,6,0,6,2],[4,0,1,4,1,5,6,3,7,6,2,3],[7,4,8,5,2,1,5,6,2],[6,11,7,1,2,10,9,5,4],[11,7,6,8,3,0,1,2,10,9,5,4],[11,7,6,10,5,2,2,5,4,2,4,0],[7,4,8,2,11,3,10,5,6],[4,9,5,6,10,7,7,10,1,7,1,3],[5,6,10,0,9,1,8,7,4],[5,6,10,7,0,3,7,4,0],[10,5,6,4,8,7],[5,6,9,6,11,9,9,11,
8],[0,9,5,0,5,3,3,5,6,3,6,11],[0,1,5,0,5,11,5,6,11,0,11,8],[11,3,6,6,3,5,3,1,5],[9,5,6,3,9,6,3,8,9,3,6,2],[5,6,9,9,6,0,6,2,0],[0,3,8,2,5,6,2,1,5],[1,6,2,1,5,6],[1,2,10,5,6,9,9,6,11,9,11,8],[1,0,9,6,10,5,11,3,2],[6,10,5,2,8,0,2,11,8],[3,2,11,10,5,6],[10,5,6,9,3,8,9,1,3],[0,9,1,5,6,10],[8,0,3,10,5,6],[10,5,6],[10,6,5],[8,3,0,10,6,5],[0,1,9,5,10,6],[10,6,5,9,8,3,9,3,1],[3,11,2,10,6,5],[6,5,10,2,0,8,2,8,11],[1,9,0,6,5,10,11,2,3],[1,10,2,5,9,6,9,11,6,9,8,11],[1,2,6,1,6,5],[0,8,3,2,6,5,2,5,1],[5,9,6,9,
0,6,6,0,2],[9,6,5,3,6,9,3,9,8,3,2,6],[11,6,3,6,5,3,3,5,1],[0,5,1,0,11,5,5,11,6,0,8,11],[0,5,9,0,3,5,3,6,5,3,11,6],[5,9,6,6,9,11,9,8,11],[10,6,5,4,7,8],[5,10,6,7,3,0,7,0,4],[5,10,6,0,1,9,8,4,7],[4,5,9,6,7,10,7,1,10,7,3,1],[7,8,4,2,3,11,10,6,5],[11,6,7,10,2,5,2,4,5,2,0,4],[11,6,7,8,0,3,1,10,2,9,4,5],[6,7,11,1,10,2,9,4,5],[7,8,4,5,1,2,5,2,6],[4,1,0,4,5,1,6,7,3,6,3,2],[9,4,5,8,0,7,0,6,7,0,2,6],[4,5,9,6,3,2,6,7,3],[6,7,11,4,5,8,5,3,8,5,1,3],[6,7,11,4,1,0,4,5,1],[4,5,9,3,8,0,11,6,7],[9,4,5,7,11,6],[10,
6,4,10,4,9],[8,3,0,9,10,6,9,6,4],[1,10,0,10,6,0,0,6,4],[8,6,4,8,1,6,6,1,10,8,3,1],[2,3,11,6,4,9,6,9,10],[0,10,2,0,9,10,4,8,11,4,11,6],[10,2,1,11,6,3,6,0,3,6,4,0],[10,2,1,11,4,8,11,6,4],[9,1,4,1,2,4,4,2,6],[1,0,9,3,2,8,2,4,8,2,6,4],[2,4,0,2,6,4],[3,2,8,8,2,4,2,6,4],[1,4,9,11,4,1,11,1,3,11,6,4],[0,9,1,4,11,6,4,8,11],[11,6,3,3,6,0,6,4,0],[8,6,4,8,11,6],[6,7,10,7,8,10,10,8,9],[9,3,0,6,3,9,6,9,10,6,7,3],[6,1,10,6,7,1,7,0,1,7,8,0],[6,7,10,10,7,1,7,3,1],[7,11,6,3,8,2,8,10,2,8,9,10],[11,6,7,10,0,9,10,2,0],
[2,1,10,7,11,6,8,0,3],[1,10,2,6,7,11],[7,2,6,7,9,2,2,9,1,7,8,9],[1,0,9,3,6,7,3,2,6],[8,0,7,7,0,6,0,2,6],[2,7,3,2,6,7],[7,11,6,3,9,1,3,8,9],[9,1,0,11,6,7],[0,3,8,11,6,7],[11,6,7],[11,7,5,11,5,10],[3,0,8,7,5,10,7,10,11],[9,0,1,10,11,7,10,7,5],[3,1,9,3,9,8,7,10,11,7,5,10],[10,2,5,2,3,5,5,3,7],[5,10,2,8,5,2,8,7,5,8,2,0],[9,0,1,10,2,5,5,2,3,5,3,7],[1,10,2,5,8,7,5,9,8],[2,11,1,11,7,1,1,7,5],[0,8,3,2,11,1,1,11,7,1,7,5],[9,0,2,9,2,7,2,11,7,9,7,5],[11,3,2,8,5,9,8,7,5],[1,3,7,1,7,5],[8,7,0,0,7,1,7,5,1],[0,
3,9,9,3,5,3,7,5],[9,7,5,9,8,7],[4,5,8,5,10,8,8,10,11],[3,0,4,3,4,10,4,5,10,3,10,11],[0,1,9,4,5,8,8,5,10,8,10,11],[5,9,4,1,11,3,1,10,11],[3,8,4,3,4,2,2,4,5,2,5,10],[10,2,5,5,2,4,2,0,4],[0,3,8,5,9,4,10,2,1],[2,1,10,9,4,5],[8,4,5,2,8,5,2,11,8,2,5,1],[3,2,11,1,4,5,1,0,4],[9,4,5,8,2,11,8,0,2],[11,3,2,9,4,5],[4,5,8,8,5,3,5,1,3],[5,0,4,5,1,0],[3,8,0,4,5,9],[9,4,5],[7,4,11,4,9,11,11,9,10],[3,0,8,7,4,11,11,4,9,11,9,10],[11,7,4,1,11,4,1,10,11,1,4,0],[8,7,4,11,1,10,11,3,1],[2,3,7,2,7,9,7,4,9,2,9,10],[4,8,7,
0,10,2,0,9,10],[2,1,10,0,7,4,0,3,7],[10,2,1,8,7,4],[2,11,7,2,7,1,1,7,4,1,4,9],[3,2,11,4,8,7,9,1,0],[7,4,11,11,4,2,4,0,2],[2,11,3,7,4,8],[9,1,4,4,1,7,1,3,7],[1,0,9,8,7,4],[3,4,0,3,7,4],[8,7,4],[8,9,10,8,10,11],[0,9,3,3,9,11,9,10,11],[1,10,0,0,10,8,10,11,8],[10,3,1,10,11,3],[3,8,2,2,8,10,8,9,10],[9,2,0,9,10,2],[8,0,3,1,10,2],[10,2,1],[2,11,1,1,11,9,11,8,9],[11,3,2,0,9,1],[11,0,2,11,8,0],[11,3,2],[8,1,3,8,9,1],[9,1,0],[8,0,3],[]],p};c.MarchingCube=c.MarchingCubeInitializer();c.Parsers=function(){var d=
{},h={H:.37,He:.32,Li:1.34,Be:.9,B:.82,C:.77,N:.75,O:.73,F:.71,Ne:.69,Na:1.54,Mg:1.3,Al:1.18,Si:1.11,P:1.06,S:1.02,Cl:.99,Ar:.97,K:1.96,Ca:1.74,Sc:1.44,Ti:1.56,V:1.25,Mn:1.39,Fe:1.25,Co:1.26,Ni:1.21,Cu:1.38,Zn:1.31,Ga:1.26,Ge:1.22,Se:1.16,Br:1.14,Kr:1.1,Rb:2.11,Sr:1.92,Y:1.62,Zr:1.48,Nb:1.37,Mo:1.45,Tc:1.56,Ru:1.26,Rh:1.35,Pd:1.31,Ag:1.53,Cd:1.48,In:1.44,Sn:1.41,Sb:1.38,Te:1.35,I:1.33,Xe:1.3,Cs:2.25,Ba:1.98,Lu:1.6,Hf:1.5,Ta:1.38,W:1.46,Re:1.59,Os:1.44,Ir:1.37,Pt:1.28,Au:1.44,Hg:1.49,Tl:1.48,Pb:1.47,
Bi:1.46,Rn:1.45},q=function(e,g){var u=(h[e.elem]||1.6)+(h[g.elem]||1.6);u+=.25;u*=u;var n=e.x-g.x;if((n*=n)>u)return!1;var y=e.y-g.y;if((y*=y)>u)return!1;var D=e.z-g.z;if((D*=D)>u)return!1;n=n+y+D;return!(isNaN(n)||.5>n||n>u||e.altLoc!=g.altLoc&&" "!=e.altLoc&&" "!=g.altLoc)},x=function(e){for(var g=0,u=e.length;g<u;g++)e[g].index||(e[g].index=g);g={};for(u=0;u<e.length;u++){var n=e[u],y=Math.floor(n.x/4.95),D=Math.floor(n.y/4.95),l=Math.floor(n.z/4.95);g[y]||(g[y]={});g[y][D]||(g[y][D]={});g[y][D][l]||
(g[y][D][l]=[]);g[y][D][l].push(n)}e=[{x:0,y:0,z:1},{x:0,y:1,z:-1},{x:0,y:1,z:0},{x:0,y:1,z:1},{x:1,y:-1,z:-1},{x:1,y:-1,z:0},{x:1,y:-1,z:1},{x:1,y:0,z:-1},{x:1,y:0,z:0},{x:1,y:0,z:1},{x:1,y:1,z:-1},{x:1,y:1,z:0},{x:1,y:1,z:1}];for(let N in g){N=parseInt(N);for(let Q in g[N]){Q=parseInt(Q);for(let H in g[N][Q]){H=parseInt(H);u=g[N][Q][H];for(n=0;n<u.length;n++)for(y=u[n],D=n+1;D<u.length;D++)l=u[D],q(y,l)&&-1==y.bonds.indexOf(l.index)&&(y.bonds.push(l.index),y.bondOrder.push(1),l.bonds.push(y.index),
l.bondOrder.push(1));for(y=0;y<e.length;y++)if(D=e[y],g[N+D.x]&&g[N+D.x][Q+D.y]&&g[N+D.x][Q+D.y][H+D.z])for(n=u,D=g[N+D.x][Q+D.y][H+D.z],l=0;l<n.length;l++)for(var B=n[l],k=0;k<D.length;k++){var J=D[k];if(q(B,J)){var m=B.bonds.indexOf(J.index),K=J.bonds.indexOf(B.index);-1==m&&-1==K?(B.bonds.push(J.index),B.bondOrder.push(1),J.bonds.push(B.index),J.bondOrder.push(1)):-1==m?(B.bonds.push(J.index),B.bondOrder.push(J.bondOrder[K])):-1==K&&(J.bonds.push(B.index),J.bondOrder.push(B.bondOrder[m]))}}}}}},
p=new Set("ABU ACD ALA ALB ALI ARG AR0 ASN ASP ASX BAS CYS CYH CYX CSS CSH GLN GLU GLX GLY HIS HIE HID HIP HYP ILE ILU LEU LYS MET PCA PGA PHE PR0 PRO PRZ SAR THR TYR VAL A 1MA C 5MC OMC G 1MG 2MG M2G 7MG OMG YG I T U +U H2U 5MU PSU ACE F0R H2O HOH WAT".split(" ")),w=function(e){var g,u=[],n=[];var y=0;for(g=e.length;y<g;y++){var D=e[y];D.index=y;D.hetflag||!p.has(D.resn)?n.push(D):u.push(D)}x(n);u.sort(function(J,m){return J.chain!=m.chain?J.chain<m.chain?-1:1:J.resi-m.resi});var l;n=e=-1;y=0;for(g=
u.length;y<g;y++){D=u[y];D.resi!==e&&(e=D.resi,l||n++,l=!1);D.reschain=n;for(var B=y+1;B<u.length;B++){var k=u[B];if(k.chain!=D.chain)break;if(1<k.resi-D.resi)break;q(D,k)&&(-1===D.bonds.indexOf(k.index)&&(D.bonds.push(k.index),D.bondOrder.push(1),k.bonds.push(D.index),k.bondOrder.push(1)),D.resi!==k.resi&&(l=!0))}}},v=function(e){!function(k){var J,m=[];var K=0;for(J=k.length;K<J;K++){k[K].index=K;var N=k[K];N.hetflag||"N"!==N.atom&&"O"!==N.atom||(m.push(N),N.hbondOther=null,N.hbondDistanceSq=Number.POSITIVE_INFINITY)}m.sort(function(ha,
U){return ha.z-U.z});K=0;for(J=m.length;K<J;K++)for(N=m[K],k=K+1;k<J;k++){var Q=m[k],H=Q.z-N.z;if(3.2<H)break;if(Q.atom!=N.atom){var V=Math.abs(Q.y-N.y);if(!(3.2<V)){var W=Math.abs(Q.x-N.x);3.2<W||(H=W*W+V*V+H*H,10.24<H||Q.chain==N.chain&&4>Math.abs(Q.resi-N.resi)||(H<N.hbondDistanceSq&&(N.hbondOther=Q,N.hbondDistanceSq=H),H<Q.hbondDistanceSq&&(Q.hbondOther=N,Q.hbondDistanceSq=H)))}}}}(e);var g,u,n={};var y=0;for(g=e.length;y<g;y++)if(void 0===n[(u=e[y]).chain]&&(n[u.chain]=[]),isFinite(u.hbondDistanceSq)){var D=
u.hbondOther;void 0===n[D.chain]&&(n[D.chain]=[]);4===Math.abs(D.resi-u.resi)&&(n[u.chain][u.resi]="h")}for(B in n)for(y=1;y<n[B].length-1;y++){g=n[B][y-1];var l=n[B][y+1];D=n[B][y];"h"==g&&g==l&&D!=g&&(n[B][y]=g)}y=0;for(g=e.length;y<g;y++)u=e[y],isFinite(u.hbondDistanceSq)&&"h"!=n[u.chain][u.resi]&&"h"!=u.ss&&(n[u.chain][u.resi]="maybesheet");for(let k=0,J=e.length;k<J;k++)if(u=e[k],isFinite(u.hbondDistanceSq)&&"maybesheet"==n[u.chain][u.resi]){D=u.hbondOther;var B=n[D.chain][D.resi];"maybesheet"!=
B&&"s"!=B||(n[u.chain][u.resi]="s",n[D.chain][D.resi]="s")}for(let k in n){for(B=1;B<n[k].length-1;B++)y=n[k][B-1],g=n[k][B+1],D=n[k][B],"s"==y&&y==g&&D!=y&&(n[k][B]=y);for(D=0;D<n[k].length;D++)B=n[k][D],"h"!=B&&"s"!=B||n[k][D-1]!=B&&n[k][D+1]!=B&&delete n[k][D]}y=0;for(g=e.length;y<g;y++)D=n[(u=e[y]).chain][u.resi],delete u.hbondOther,delete u.hbondDistanceSq,void 0!==D&&"maybesheet"!=D&&(u.ss=D,n[u.chain][u.resi-1]!=D&&(u.ssbegin=!0),n[u.chain][u.resi+1]!=D&&(u.ssend=!0))},C=function(e,g,u,n){var y=
!u.duplicateAssemblyAtoms;var D=g.length,l=D,B=-1;if(u.normalizeAssembly&&n){var k=c.conversionMatrix3(n.a,n.b,n.c,n.alpha,n.beta,n.gamma),J=new c.Matrix3;J.getInverse3(k);for(u=0;u<e.length;u++){let N=new c.Vector3(0,0,0);for(n=0;n<D;n++){var m=new c.Vector3(g[n].x,g[n].y,g[n].z);m.applyMatrix4(e[u]);m.applyMatrix3(J);N.add(m)}N.divideScalar(D);N=[N.x,N.y,N.z];n=[0,0,0];for(m=0;3>m;m++){for(;-.001>N[m];)N[m]+=1,n[m]+=1;for(;1.001<N[m];)--N[m],--n[m]}(n=new c.Vector3(n[0],n[1],n[2])).applyMatrix3(k);
e[u].isNearlyIdentity()&&.001<n.lengthSq()&&(B=u);e[u].translate(n)}}if(y){if(1<e.length)for(u=0;u<g.length;u++){D=[];for(y=0;y<e.length;y++)e[y].isNearlyIdentity()||(B=new c.Vector3,B.set(g[u].x,g[u].y,g[u].z),B.applyMatrix4(e[y]),D.push(B));g[u].symmetries=D}}else{for(n=0;n<D;n++)g[n].sym=-1;for(u=0;u<e.length;u++)if(e[u].isNearlyIdentity()||B==u)for(n=0;n<D;n++)g[n].sym=u;else{J=new c.Vector3;for(n=0;n<D;n++){k=[];for(y=0;y<g[n].bonds.length;y++)k.push(g[n].bonds[y]+l);J.set(g[n].x,g[n].y,g[n].z);
J.applyMatrix4(e[u]);y={};for(var K in g[n])y[K]=g[n][K];y.x=J.x;y.y=J.y;y.z=J.z;y.bonds=k;y.sym=u;y.index=g.length;g.push(y)}l=g.length}if(0<=B)for(u=new c.Vector3,n=0;n<D;n++)u.set(g[n].x,g[n].y,g[n].z),u.applyMatrix4(e[B]),g[n].x=u.x,g[n].y=u.y,g[n].z=u.z;e.length=0}};d.vasp=d.VASP=function(e){var g=[[]],u,n=e.replace(/^\s+/,"").split(/[\n\r]/);if(3>n.length)return g;if(!n[1].match(/\d+/))return console.log("Warning: second line of the vasp structure file must be a number"),g;if(u=parseFloat(n[1]),
0>u)return console.log("Warning: Vasp implementation for negative lattice lengths is not yet available"),g;e=new Float32Array(n[2].replace(/^\s+/,"").split(/\s+/));var y=new Float32Array(n[3].replace(/^\s+/,"").split(/\s+/));var D=new Float32Array(n[4].replace(/^\s+/,"").split(/\s+/));var l=new c.Matrix4(e[0],e[1],e[2],0,y[0],y[1],y[2],0,D[0],D[1],D[2],0,0,0,0,1);l.multiplyScalar(u);g.modelData=[{symmetries:[],cryst:{matrix:l}}];l=n[5].replace(/\s+/,"").replace(/\s+$/,"").split(/\s+/);var B=new Int16Array(n[6].replace(/^\s+/,
"").split(/\s+/)),k=n[7].replace(/\s+/,"");if(k.match(/C/))k="cartesian";else{if(!k.match(/D/))return console.log("Warning: Unknown vasp mode in POSCAR file: mode must be either C(artesian) or D(irect)"),g;k="direct"}if(l.length!=B.length)return console.log("Warning: declaration of atomary species wrong:"),console.log(l),console.log(B),g;n.splice(0,8);for(var J=0,m=0,K=l.length;m<K;m++){for(var N=l[m],Q=0,H=B[m];Q<H;Q++){var V=new Float32Array(n[J+Q].replace(/^\s+/,"").split(/\s+/)),W={};W.elem=N;
"cartesian"==k?(W.x=u*V[0],W.y=u*V[1],W.z=u*V[2]):(W.x=u*(V[0]*e[0]+V[1]*y[0]+V[2]*D[0]),W.y=u*(V[0]*e[1]+V[1]*y[1]+V[2]*D[1]),W.z=u*(V[0]*e[2]+V[1]*y[2]+V[2]*D[2]));W.bonds=[];g[0].push(W)}J+=B[m]}return g};d.cube=d.CUBE=function(e){var g=[[]];e=e.replace(/^\s+/,"").split(/\n\r|\r+/);if(6>e.length)return g;var u=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),n=Math.abs(parseFloat(u[0]));u=e[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");u=0<parseFloat(u[0])?.529177:1;e=e.splice(6,n);
n=g[g.length-1].length;for(var y=n+e.length,D=n;D<y;++D){var l={};l.serial=D;var B=e[D-n].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");6==B[0]?l.elem="C":1==B[0]?l.elem="H":8==B[0]?l.elem="O":17==B[0]&&(l.elem="Cl");l.x=parseFloat(B[2])*u;l.y=parseFloat(B[3])*u;l.z=parseFloat(B[4])*u;l.hetflag=!0;l.bonds=[];l.bondOrder=[];l.properties={};g[g.length-1].push(l)}for(e=0;e<g.length;e++)x(g[e]);return g};d.xyz=d.XYZ=function(e,g){var u=[[]];for(e=e.split(/\r?\n|\r/);0<e.length&&!(3>e.length);){var n=
parseInt(e[0]);if(isNaN(n)||0>=n)break;if(e.length<n+2)break;var y=2,D=u[u.length-1].length;for(n=D+n;D<n;D++){var l=e[y++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),B={};B.serial=D;var k=l[0];B.atom=B.elem=k[0].toUpperCase()+k.substr(1,1).toLowerCase();B.x=parseFloat(l[1]);B.y=parseFloat(l[2]);B.z=parseFloat(l[3]);B.hetflag=!0;B.bonds=[];B.bondOrder=[];B.properties={};u[u.length-1][D]=B;7<=l.length&&(B.dx=parseFloat(l[4]),B.dy=parseFloat(l[5]),B.dz=parseFloat(l[6]))}if(!g.multimodel)break;
u.push([]);e.splice(0,y)}for(e=0;e<u.length;e++)x(u[e]);if(g.onemol)for(g=u,(u=[]).push(g[0]),e=1;e<g.length;e++)for(y=u[0].length,n=0;n<g[e].length;n++){D=g[e][n];for(l=0;l<D.bonds.length;l++)D.bonds[l]+=y;D.index=u[0].length;D.serial=u[0].length;u[0].push(D)}return u};d.sdf=d.SDF=function(e,g){var u="V2000";e=e.split(/\r?\n|\r/);return 3<e.length&&38<e[3].length&&(u=e[3].substr(34,5)),"V2000"===u?function(n,y){var D=[[]],l=!1;for(void 0!==y.keepH&&(l=!y.keepH);0<n.length&&!(4>n.length);){var B=
parseInt(n[3].substr(0,3));if(isNaN(B)||0>=B)break;var k=parseInt(n[3].substr(3,3)),J=4;if(n.length<4+B+k)break;var m,K=[],N=D[D.length-1].length,Q=N+B;for(B=N;B<Q;B++,J++){var H={},V=(m=n[J]).substr(31,3).replace(/ /g,"");H.atom=H.elem=V[0].toUpperCase()+V.substr(1).toLowerCase();"H"===H.elem&&l||(H.serial=B,K[B]=D[D.length-1].length,H.x=parseFloat(m.substr(0,10)),H.y=parseFloat(m.substr(10,10)),H.z=parseFloat(m.substr(20,10)),H.hetflag=!0,H.bonds=[],H.bondOrder=[],H.properties={},H.index=D[D.length-
1].length,D[D.length-1].push(H))}for(B=0;B<k;B++,J++)m=n[J],Q=K[parseInt(m.substr(0,3))-1+N],H=K[parseInt(m.substr(3,3))-1+N],m=parseInt(m.substr(6,3)),void 0!==Q&&void 0!==H&&(D[D.length-1][Q].bonds.push(H),D[D.length-1][Q].bondOrder.push(m),D[D.length-1][H].bonds.push(Q),D[D.length-1][H].bondOrder.push(m));if(!y.multimodel)break;for(y.onemol||D.push([]);"$$$$"!==n[J];)J++;n.splice(0,++J)}return D}(e,g):"V3000"===u?function(n,y){var D=[[]],l=!1;for(void 0!==y.keepH&&(l=!y.keepH);0<n.length&&!(8>
n.length)&&n[4].startsWith("M  V30 BEGIN CTAB")&&n[5].startsWith("M  V30 COUNTS")&&!(14>n[5].length);){var B=n[5].substr(13).match(/\S+/g);if(2>B.length)break;var k=parseInt(B[0]);if(isNaN(k)||0>=k)break;B=parseInt(B[1]);var J=7;if(n.length<8+k+B)break;var m=[],K=D[D.length-1].length,N=K+k;for(k=K;k<N;k++,J++){var Q=n[J].substr(6).match(/\S+/g);if(4<Q.length){var H={},V=Q[1].replace(/ /g,"");H.atom=H.elem=V[0].toUpperCase()+V.substr(1).toLowerCase();"H"===H.elem&&l||(H.serial=k,m[k]=D[D.length-1].length,
H.x=parseFloat(Q[2]),H.y=parseFloat(Q[3]),H.z=parseFloat(Q[4]),H.hetflag=!0,H.bonds=[],H.bondOrder=[],H.properties={},H.index=D[D.length-1].length,D[D.length-1].push(H))}}if("M  V30 END ATOM"!==n[J])break;if(J++,0===B||"M  V30 BEGIN BOND"!==n[J])break;J++;for(k=0;k<B;k++,J++)H=n[J].substr(6).match(/\S+/g),3<H.length&&(N=m[parseInt(H[2])-1+K],Q=m[parseInt(H[3])-1+K],H=parseInt(H[1]),void 0!==N&&void 0!==Q&&(D[D.length-1][N].bonds.push(Q),D[D.length-1][N].bondOrder.push(H),D[D.length-1][Q].bonds.push(N),
D[D.length-1][Q].bondOrder.push(H)));if(!y.multimodel)break;for(y.onemol||D.push([]);"$$$$"!==n[J];)J++;n.splice(0,++J)}return D}(e,g):[[]]};d.cdjson=d.json=function(e,g){var u=[[]];"string"==typeof e&&(e=JSON.parse(e));var n=e.m,y=n[0].a;e=n[0].b;n=n[0].s;var D=void 0!==g&&void 0!==g.parseStyle?g.parseStyle:void 0!==n;g=u[u.length-1].length;for(var l=0;l<y.length;l++){var B=y[l],k={};k.id=B.i;k.x=B.x;k.y=B.y;k.z=B.z||0;k.bonds=[];k.bondOrder=[];var J=B.l||"C";k.elem=J[0].toUpperCase()+J.substr(1).toLowerCase();
k.serial=u[u.length-1].length;D&&(k.style=n[B.s||0]);u[u.length-1].push(k)}for(y=0;y<e.length;y++)l=e[y],n=l.b+g,D=l.e+g,l=l.o||1,B=u[u.length-1][n],k=u[u.length-1][D],B.bonds.push(D),B.bondOrder.push(l),k.bonds.push(n),k.bondOrder.push(l);return u};d.mcif=d.cif=function(e,g){function u(F,R){for(var T=[],fa=0,Z=0;Z<F.length;){for(;F.substr(Z,R.length)!==R&&Z<F.length;){if("'"===F[Z])for(Z++;Z<F.length&&"'"!==F[Z];)Z++;else if('"'===F[Z])for(Z++;Z<F.length&&'"'!==F[Z];)Z++;Z++}T.push(F.substr(fa,Z-
fa));fa=Z+=R.length}return T}var n=[],y=!g.doAssembly,D=n.modelData=[],l=e.split(/\r?\n|\r/);e=[];var B=!1;for(var k=0;k<l.length;k++){var J=l[k].split("#")[0];if(B?";"===J[0]&&(B=!1):";"===J[0]&&(B=!0),B||""!==J){if(!B&&"_"===(J=J.trim())[0]){var m=J.split(/\s/)[0].indexOf(".");-1<m&&(J[m]="_",J=J.substr(0,m)+"_"+J.substr(m+1))}e.push(J)}}var K,N,Q,H;for(l=0;l<e.length;){for(;!e[l].startsWith("data_")||"data_global"===e[l];)l++;l++;for(B={};l<e.length&&!e[l].startsWith("data_");)if(void 0===e[l][0])l++;
else if("_"===e[l][0]){m=e[l].split(/\s/)[0].toLowerCase();J=B[m]=B[m]||[];m=e[l].substr(e[l].indexOf(m)+m.length);if(""===m)if(";"===e[++l][0]){m=e[l].substr(1);for(l++;";"!==e[l];)m=m+"\n"+e[l],l++;J.push(m)}else J.push(e[l]);else J.push(m.trim());l++}else if("loop_"===e[l].substr(0,5)){l++;for(J=[];""===e[l]||"_"===e[l][0];)""!==e[l]&&(m=e[l].split(/\s/)[0].toLowerCase(),m=B[m]=B[m]||[],J.push(m)),l++;for(m=0;l<e.length&&"_"!==e[l][0]&&!e[l].startsWith("loop_")&&!e[l].startsWith("data_");){var V=
u(e[l]," ");for(k=0;k<V.length;k++)""!==V[k]&&(J[m].push(V[k]),m=(m+1)%J.length);l++}}else l++;D.push({symmetries:[]});n.push([]);J=void 0!==B._atom_site_id?B._atom_site_id.length:B._atom_site_label.length;if(void 0!==B._cell_length_a){m=parseFloat(B._cell_length_a);k=parseFloat(B._cell_length_b);V=parseFloat(B._cell_length_c);var W=parseFloat(B._cell_angle_alpha)||90,ha=parseFloat(B._cell_angle_beta)||90,U=parseFloat(B._cell_angle_gamma)||90;var S=c.conversionMatrix3(m,k,V,W,ha,U);D[D.length-1].cryst=
{a:m,b:k,c:V,alpha:W,beta:ha,gamma:U}}for(m=0;m<J;m++)if(void 0===B._atom_site_group_pdb||"TER"!==B._atom_site_group_pdb[m])k={},void 0!==B._atom_site_cartn_x?(k.x=parseFloat(B._atom_site_cartn_x[m]),k.y=parseFloat(B._atom_site_cartn_y[m]),k.z=parseFloat(B._atom_site_cartn_z[m])):(V=(K=S,N=parseFloat(B._atom_site_fract_x[m]),Q=parseFloat(B._atom_site_fract_y[m]),H=parseFloat(B._atom_site_fract_z[m]),(new c.Vector3(N,Q,H)).applyMatrix3(K)),k.x=V.x,k.y=V.y,k.z=V.z),k.chain=B._atom_site_auth_asym_id?
B._atom_site_auth_asym_id[m]:void 0,k.resi=B._atom_site_auth_seq_id?parseInt(B._atom_site_auth_seq_id[m]):void 0,k.resn=B._atom_site_auth_comp_id?B._atom_site_auth_comp_id[m].trim():void 0,k.atom=B._atom_site_auth_atom_id?B._atom_site_auth_atom_id[m].replace(/"/gm,""):void 0,k.hetflag=!B._atom_site_group_pdb||"HETA"===B._atom_site_group_pdb[m]||"HETATM"===B._atom_site_group_pdb[m],V="X",B._atom_site_type_symbol?V=B._atom_site_type_symbol[m].replace(/\(?\+?\d+.*/,""):B._atom_site_label&&(V=B._atom_site_label[m].split("_")[0].replace(/\(?\d+.*/,
"")),k.elem=V[0].toUpperCase()+V.substr(1,1).toLowerCase(),k.bonds=[],k.ss="c",k.serial=m,k.bondOrder=[],k.properties={},n[n.length-1].push(k);if(void 0!==B._pdbx_struct_oper_list_id&&!y)for(J=0;J<B._pdbx_struct_oper_list_id.length;J++){m=parseFloat(B["_pdbx_struct_oper_list_matrix[1][1]"][J]);k=parseFloat(B["_pdbx_struct_oper_list_matrix[1][2]"][J]);V=parseFloat(B["_pdbx_struct_oper_list_matrix[1][3]"][J]);W=parseFloat(B["_pdbx_struct_oper_list_vector[1]"][J]);ha=parseFloat(B["_pdbx_struct_oper_list_matrix[2][1]"][J]);
U=parseFloat(B["_pdbx_struct_oper_list_matrix[2][2]"][J]);var ba=parseFloat(B["_pdbx_struct_oper_list_matrix[2][3]"][J]),Y=parseFloat(B["_pdbx_struct_oper_list_vector[2]"][J]),aa=parseFloat(B["_pdbx_struct_oper_list_matrix[3][1]"][J]),ia=parseFloat(B["_pdbx_struct_oper_list_matrix[3][2]"][J]),z=parseFloat(B["_pdbx_struct_oper_list_matrix[3][3]"][J]),G=parseFloat(B["_pdbx_struct_oper_list_vector[3]"][J]);m=new c.Matrix4(m,k,V,W,ha,U,ba,Y,aa,ia,z,G);D[D.length-1].symmetries.push(m)}J=function(F){var R,
T=F.match("-");F=F.replace(/[-xyz]/g,"").split("/");return R=void 0===F[1]?1:parseInt(F[1]),(""===F[0]?1:parseInt(F[0]))/R*(T?-1:1)};if(void 0!==B._symmetry_equiv_pos_as_xyz&&!y)for(m=0;m<B._symmetry_equiv_pos_as_xyz.length;m++){V=B._symmetry_equiv_pos_as_xyz[m].replace(/["' ]/g,"").split(",").map(function(F){return F.replace(/-/g,"+-")});k=new c.Matrix4(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1);for(ba=0;3>ba;ba++)for(W=V[ba].split("+"),Y=0;Y<W.length;Y++)ha=W[Y],""!==ha&&(U=J(ha),ha.match("x")?k.elements[ba+
0]=U:ha.match("y")?k.elements[ba+4]=U:ha.match("z")?k.elements[ba+8]=U:k.elements[ba+12]=U);V=S.getMatrix4();W=(new c.Matrix4).getInverse(V,!0);k=(new c.Matrix4).multiplyMatrices(k,W);k=(new c.Matrix4).multiplyMatrices(V,k);D[D.length-1].symmetries.push(k)}}for(y=0;y<n.length;y++)x(n[y]),v(n[y]),C(D[y].symmetries,n[y],g,D[y].cryst),g.duplicateAssemblyAtoms&&!g.dontConnectDuplicatedAtoms&&x(n[y]);return n};d.mol2=d.MOL2=function(e,g){var u=[[]],n=!1;void 0!==g.keepH&&(n=!g.keepH);var y=e.search(/@<TRIPOS>MOLECULE/),
D=e.search(/@<TRIPOS>ATOM/);if(-1==y||-1==D)return u;for(e=e.substr(y,e.length).split(/\r?\n|\r/);0<e.length;){y=[];var l=e[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),B=parseInt(l[0]);D=0;1<l.length&&(D=parseInt(l[1]));var k,J=4;for(k=3;k<e.length;k++)if("@<TRIPOS>ATOM"==e[k]){J=k+1;break}k=u[u.length-1].length;for(B=k+B;k<B;k++){var m={},K=(l=e[J++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[5].split(".")[0];if(m.atom=m.elem=K[0].toUpperCase()+K.substr(1).toLowerCase(),"H"!=m.elem||
!n){K=u[u.length-1].length;var N=parseInt(l[0]);m.serial=N;m.x=parseFloat(l[2]);m.y=parseFloat(l[3]);m.z=parseFloat(l[4]);m.atom=l[5];l=parseFloat(l[8]);m.index=K;m.bonds=[];m.bondOrder=[];m.properties={charge:l,partialCharge:l};y[N]=K;u[u.length-1].push(m)}}for(k=!1;J<e.length;)if("@<TRIPOS>BOND"==e[J++]){k=!0;break}if(k&&D)for(k=0;k<D;k++)l=e[J++].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),B=parseInt(l[1]),m=u[u.length-1][y[B]],K=parseInt(l[2]),N=u[u.length-1][y[K]],l=parseInt(l[3]),isNaN(l)&&
(l=1),void 0!==m&&void 0!==N&&(m.bonds.push(y[K]),m.bondOrder.push(l),N.bonds.push(y[B]),N.bondOrder.push(l));if(!g.multimodel)break;g.onemol||u.push([]);e.splice(0,J);e.join("\n")}return u};var M=function(e,g){e=e.replace(/ /g,"");return 0<e.length&&"H"==e[0]&&"Hg"!=e&&"He"!=e&&"Hf"!=e&&"Hs"!=e&&"Ho"!=e&&(e="H"),1<e.length&&(e=e[0].toUpperCase()+e.substr(1).toLowerCase(),void 0===h[e]?e=e[0]:g&&("Ca"==e||"Cd"==e)&&(e="C")),e},L=function(e,g,u){var n,y,D=[],l=!g.keepH,B=!!g.noSecondaryStructure,k=
!g.noComputeSecondaryStructure,J=!g.doAssembly,m=g.altLoc?g.altLoc:"A",K={symmetries:[]},N=[],Q=[],H={};for(let T=0;T<e.length;T++){var V,W,ha=(y=e[T].replace(/^\s*/,"")).substr(0,6);if(0==ha.indexOf("END")){if(N=e.slice(T+1),"END"==ha)for(var U in u)u.hasOwnProperty(U)&&delete u[U];break}if("ATOM  "==ha||"HETATM"==ha){var S,ba,Y,aa,ia,z,G,F,R;if(" "==(F=y.substr(16,1))||F==m||"*"==m)(G=parseInt(y.substr(6,5)),n=y.substr(12,4).replace(/ /g,""),V=y.substr(17,3).replace(/ /g,""),W=y.substr(21,1),S=
parseInt(y.substr(22,4)),ba=y.substr(26,1),Y=parseFloat(y.substr(30,8)),aa=parseFloat(y.substr(38,8)),ia=parseFloat(y.substr(46,8)),R=parseFloat(y.substr(60,8)),"H"==(z=""===(z=y.substr(76,2).replace(/ /g,""))||void 0===h[z]?M(y.substr(12,2),"A"==y[0]):z[0].toUpperCase()+z.substr(1).toLowerCase())&&l)||(ha="H"==ha[0],Q[G]=D.length,D.push({resn:V,x:Y,y:aa,z:ia,elem:z,hetflag:ha,altLoc:F,chain:W,resi:S,icode:ba,rescode:S+(" "!=ba?"^"+ba:""),serial:G,atom:n,bonds:[],ss:"c",bondOrder:[],properties:{},
b:R,pdbline:y}))}else if("SHEET "==ha){V=y.substr(21,1);W=parseInt(y.substr(22,4));y.substr(32,1);y=parseInt(y.substr(33,4));V in u||(u[V]={});u[V][W]="s1";for(W+=1;W<y;W++)u[V][W]="s";u[V][y]="s2"}else if("CONECT"==ha)for(V=Q[parseInt(y.substr(6,5))],W=D[V],S=[11,16,21,26],Y=0;4>Y;Y++){if(ba=Q[parseInt(y.substr(S[Y],5))],aa=D[ba],void 0!==W&&void 0!==aa)if(H[[V,ba]])for(H[[V,ba]]+=1,ia=0;ia<W.bonds.length;ia++)W.bonds[ia]==ba&&(aa=H[[V,ba]],W.bondOrder[ia]=4<=aa?1:aa);else H[[V,ba]]=1,0!=W.bonds.length&&
W.bonds[W.bonds.length-1]==ba||(W.bonds.push(ba),W.bondOrder.push(1))}else if("HELIX "==ha){V=y.substr(19,1);W=parseInt(y.substr(21,4));y.substr(31,1);y=parseInt(y.substr(33,4));V in u||(u[V]={});u[V][W]="h1";for(W+=1;W<y;W++)u[V][W]="h";u[V][y]="h2"}else if(J||"REMARK"!=ha||"BIOMT"!=y.substr(13,5))"CRYST1"==ha?(V=parseFloat(y.substr(7,8)),W=parseFloat(y.substr(16,8)),S=parseFloat(y.substr(25,8)),ba=parseFloat(y.substr(34,6)),Y=parseFloat(y.substr(41,6)),y=parseFloat(y.substr(48,6)),K.cryst={a:V,
b:W,c:S,alpha:ba,beta:Y,gamma:y}):"ANISOU"==ha&&(V=D[Q[parseInt(y.substr(6,5))]])&&(y=y.substr(30).trim().split(/\s+/),y={u11:parseInt(y[0]),u22:parseInt(y[1]),u33:parseInt(y[2]),u12:parseInt(y[3]),u13:parseInt(y[4]),u23:parseInt(y[5])},V.uMat=y);else{W=new c.Matrix4;for(V=1;3>=V;V++)if(y=e[T].replace(/^\s*/,""),parseInt(y.substr(18,1))==V)W.elements[V-1]=parseFloat(y.substr(23,10)),W.elements[V-1+4]=parseFloat(y.substr(33,10)),W.elements[V-1+8]=parseFloat(y.substr(43,10)),W.elements[V-1+12]=parseFloat(y.substr(53)),
T++;else for(;"BIOMT"==y.substr(13,5);)y=e[++T].replace(/^\s*/,"");W.elements[3]=0;W.elements[7]=0;W.elements[11]=0;W.elements[15]=1;K.symmetries.push(W);T--}}if((new Date).getTime(),function(T,fa){for(var Z=0,qa=T.length;Z<qa;Z++)for(var na=T[Z],ta=0;ta<na.bonds.length;ta++){var pa=T[na.bonds[ta]],Fa=fa[na.serial];pa&&Fa&&0>pa.bonds.indexOf(Fa)&&(pa.bonds.push(Fa),pa.bondOrder.push(na.bondOrder[ta]))}}(D,Q),w(D),J||C(K.symmetries,D,g,K.cryst),k&&!B&&((new Date).getTime(),v(D)),(new Date).getTime(),
!function(T){for(var fa in T)return!1;return!0}(u))for(g=0;g<D.length;g++)void 0!==(n=D[g])&&n.chain in u&&n.resi in u[n.chain]&&(e=u[n.chain][n.resi],n.ss=e[0],1<e.length&&("1"==e[1]?n.ssbegin=!0:"2"==e[1]&&(n.ssend=!0)));return[D,K,N]};d.pdb=d.PDB=d.pdbqt=d.PDBQT=function(e,g){var u=[],n={};u.modelData=[];for(var y=e.split(/\r?\n|\r/);0<y.length;){y=L(y,g,n);e=y[0];var D=y[1];if(y=y[2],0!=e.length){if(g.multimodel&&g.onemol&&0<u.length){D=u[0].length;for(var l=0;l<e.length;l++){var B=e[l];B.index=
l;for(var k=0;k<B.bonds.length;k++)B.bonds[k]+=D;u[0].push(B)}}else u.modelData.push(D),u.push(e);if(!g.multimodel)break}}return u};d.pqr=d.PQR=function(e,g){var u=[[]],n=!g.noSecondaryStructure;u.modelData=[{symmetries:[]}];var y=[],D=e.split(/\r?\n|\r/);for(let Q=0;Q<D.length;Q++){var l=(e=D[Q].replace(/^\s*/,"")).substr(0,6);if(0==l.indexOf("END")){if(g.multimodel){g.onemol||u.push([]);continue}break}if("ATOM  "==l||"HETATM"==l){let H=parseInt(e.substr(6,5)),V=e.substr(12,4).replace(/ /g,""),W=
e.substr(17,3).trim(),ha=e.substr(21,1),U=parseInt(e.substr(22,4));var B=e.substr(30).trim().split(/\s+/);l=parseFloat(B[0]);var k=parseFloat(B[1]),J=parseFloat(B[2]),m=parseFloat(B[3]),K=parseFloat(B[4]),N=V[0];1<V.length&&V[1].toUpperCase()!=V[1]&&(N=V.substr(0,2));B="H"==e[0];y[H]=u[u.length-1].length;u[u.length-1].push({resn:W,x:l,y:k,z:J,elem:N,hetflag:B,chain:ha,resi:U,serial:H,atom:V,bonds:[],ss:"c",bondOrder:[],properties:{charge:m,partialCharge:m,radius:K},pdbline:e})}else if("CONECT"==l)for(l=
parseInt(e.substr(6,5)),l=u[u.length-1][y[l]],m=0;4>m;m++)k=parseInt(e.substr([11,16,21,26][m],5)),J=u[u.length-1][y[k]],void 0!==l&&void 0!==J&&(l.bonds.push(y[k]),l.bondOrder.push(1))}for(g=0;g<u.length;g++)w(u[g]),n&&v(u[g]);return u};var P=function(e){return 0==e||2==e||4==e?"h":3==e?"s":"c"};return d.mmtf=d.MMTF=function(e,g){var u=!g.keepH,n=g.altLoc?g.altLoc:"A",y=!!g.noSecondaryStructure,D=!g.noComputeSecondaryStructure,l=!g.doAssembly,B=g.assemblyIndex?g.assemblyIndex:0;"string"==typeof e&&
(e=c.base64ToArray(e));var k,J=MMTF.decode(e);e=[[]];var m=e.modelData=[],K=0,N=0,Q=0,H=J.secStructList,V=J.insCodeList,W=J.sequenceIndexList,ha=J.bFactorList,U=J.altLocList,S=J.occupancyList,ba=J.bondAtomList,Y=J.bondOrderList,aa=J.numModels;if(0==aa)return e;g.multimodel||(aa=1);var ia=[];if(!l&&J.bioAssemblyList&&0<J.bioAssemblyList.length){var z=J.bioAssemblyList[B].transformList;var G=0;for(B=z.length;G<B;G++){var F=new c.Matrix4(z[G].matrix);F.transpose();ia.push(F)}}z=null;J.unitCell&&(B=J.unitCell,
z={a:B[0],b:B[1],c:B[2],alpha:B[3],beta:B[4],gamma:B[5]});for(B=F=0;B<aa;B++){var R=J.chainsPerModel[B],T=e[e.length-1],fa=[];m.push({symmetries:ia,cryst:z});for(G=0;G<R;++G){var Z=J.groupsPerChain[K],qa=String.fromCharCode.apply(null,J.chainIdList.subarray(4*K,4*K+4)).replace(/\0/g,"");J.chainNameList&&(qa=String.fromCharCode.apply(null,J.chainNameList.subarray(4*K,4*K+4)).replace(/\0/g,""));var na=N,ta="";for(k=0;k<Z;++k){var pa=J.groupList[J.groupTypeList[N]];var Fa=pa.atomNameList.length;var Ga=
0,Ha=!1,Ja=!1;if(H){Ga=H[N];var Na=P(Ga);0!=N&&Na==ta||(Ha=!0);ta=Na;var hb=N+1;(hb>=H.length||P(H[hb]!=Na))&&(Ja=!0)}J.insCodeList&&String.fromCharCode(V[N]);W&&W[N];var Xb=J.groupIdList[N],Pb=pa.groupName;hb=Q;for(Na=0;Na<Fa;++Na){var Lb=pa.elementList[Na];if(!u||"H"!=Lb){var xb="";ha&&(xb=ha[Q]);var Kb="";U&&U[Q]&&(Kb=String.fromCharCode(U[Q]));var qb="";if(S&&(qb=S[Q]),""==Kb||Kb==n||"*"==n){var dc=J.atomIdList[Q],tc=pa.atomNameList[Na],ab=0;pa.atomChargeList&&(ab=pa.atomChargeList[Na]);var Va=
J.xCoordList[Q],ob=J.yCoordList[Q],fb=J.zCoordList[Q];fa[Q]=T.length;T.push({resn:Pb,x:Va,y:ob,z:fb,elem:Lb,hetflag:0>Ga,chain:qa,resi:Xb,icode:Kb,rescode:Xb+(" "!=Kb?"^"+Kb:""),serial:dc,altLoc:Kb,index:Q,atom:tc,bonds:[],ss:P(Ga),ssbegin:Ha,ssend:Ja,bondOrder:[],properties:{charge:ab,occupancy:qb},b:xb})}}Q+=1}Ga=pa.bondAtomList;Na=0;for(Fa=pa.bondOrderList.length;Na<Fa;++Na)Ha=pa.bondOrderList[Na],Ja=fa[hb+Ga[2*Na]],Xb=fa[hb+Ga[2*Na+1]],Pb=T[Ja],Lb=T[Xb],Pb&&Lb&&(Pb.bonds.push(Xb),Pb.bondOrder.push(Ha),
Lb.bonds.push(Ja),Lb.bondOrder.push(Ha));N+=1}N=na;for(k=0;k<Z;++k)N+=1;K+=1}if(ba)for(let ka=F,t=ba.length;ka<t;ka+=2){k=ba[ka];R=ba[ka+1];G=Y?Y[ka/2]:1;if(k>=Q){F=ka;break}k=fa[k];R=fa[R];Z=T[k];qa=T[R];Z&&qa&&(Z.bonds.push(R),Z.bondOrder.push(G),qa.bonds.push(k),qa.bondOrder.push(G))}g.multimodel&&(g.onemol||e.push([]))}if(!l)for(u=0;u<e.length;u++)C(m[u].symmetries,e[u],g,m[u].cryst);return D&&!y&&v(e),e},d.prmtop=d.PRMTOP=function(e){function g(Q){var H=l.indexOf(B.filter(function(V){return V.includes(Q)})[0]);
if(Number.isInteger(H)&&0<H){for(;!l[H].includes("FORMAT");)H++;return H}return-1}function u(Q){var H=l[Q].match(/\((\d*)\S*/),V=l[Q].match(/[a-zA-Z](\d*)\)\s*/);return null==V&&(V=l[Q].match(/[a-zA-Z](\d*)\.\d*\)\s*/)),[H[1],V[1]]}var n,y=[],D=0,l=e.split(/\r?\n|\r/);if(!(0<l.length&&l[0].includes("VERSION")))return[];var B=l.filter(function(Q){return Q.includes("POINTERS")||Q.includes("ATOM_NAME")||Q.includes("CHARGE")||Q.includes("RADII")||Q.includes("BONDS_INC_HYDROGEN")||Q.includes("BONDS_WITHOUT_HYDROGEN")});
e=g("POINTERS");if(-1==e)return[];var k=u(e),J=parseInt(l[e+1].slice(0,k[1]));if(isNaN(J)||0>=J||-1==(e=g("ATOM_NAME")))return[];var m=(k=u(e))[0];for(var K=0;K<J/k[0];K++){K==parseInt(J/k[0])&&(m=J%k[0]);for(var N=0;N<m;N++){let Q={};Q.serial=D;Q.x=0;Q.y=0;Q.z=0;Q.atom=l[e+1].slice(k[1]*N,k[1]*(N+1));Q.elem=l[e+1].slice(k[1]*N,k[1]*N+1);Q.properties={charge:"",radii:""};Q.bonds=[];Q.bondOrder=[];y.push(Q);D++}e++}if(-1!=(e=g("CHARGE")))for(D=0,m=(k=u(e))[0],K=0;K<J/k[0];K++){K==parseInt(J/k[0])&&
(m=J%k[0]);for(N=0;N<m;N++)y[D].properties.charge=parseFloat(l[e+1].slice(k[1]*N,k[1]*(N+1))),D++;e++}if(-1!=(e=g("RADII")))for(D=0,m=(k=u(e))[0],K=0;K<J/k[0];K++){K==parseInt(J/k[0])&&(m=J%k[0]);for(N=0;N<m;N++)y[D].properties.radii=parseFloat(l[e+1].slice(k[1]*N,k[1]*(N+1))),D++;e++}if(-1!=(e=g("BONDS_WITHOUT_HYDROGEN")))for(D=0,m=(k=u(e))[0],e+=1;!l[e].match(/^%FLAG/);){l[e+1].match(/^%FLAG/)&&(m=J%k[0]);for(K=0;K<m;K++)0==D%3?n=parseInt(l[e].slice(k[1]*K,k[1]*(K+1))/3):1==D%3&&y[n].bonds.push(parseInt(l[e].slice(k[1]*
K,k[1]*(K+1))/3)),D++;e++}if(-1!=(e=g("BONDS_INC_HYDROGEN")))for(D=0,m=(k=u(e))[0],e+=1;!l[e].match(/^%FLAG/);){l[e+1].match(/^%FLAG/)&&(m=J%k[0]);for(K=0;K<m;K++)0==D%3?n=parseInt(l[e].slice(k[1]*K,k[1]*(K+1))/3):1==D%3&&y[n].bonds.push(parseInt(l[e].slice(k[1]*K,k[1]*(K+1))/3)),D++;e++}return[y]},d.gro=d.GRO=function(e){var g=[];for(e=e.split(/\r?\n|\r/);0<e.length&&!(3>e.length);){var u=parseInt(e[1]);if(isNaN(u)||0>=u)break;if(e.length<u+3)break;var n=[];g.push(n);var y=2,D=n.length;for(u=D+u;D<
u;D++){var l=e[y++],B={};B.serial=D;B.atom=l.slice(10,15).trim();B.elem=M(B.atom,!0);B.x=10*parseFloat(l.slice(20,28));B.y=10*parseFloat(l.slice(28,36));B.z=10*parseFloat(l.slice(36,44));B.resi=parseInt(l.slice(0,5));B.resn=l.slice(5,10).trim();B.bonds=[];B.bondOrder=[];B.properties={};44<l.length&&(B.dx=10*parseFloat(l.slice(44,52)),B.dy=10*parseFloat(l.slice(52,60)),B.dz=10*parseFloat(l.slice(60,68)));n[D]=B}if(e.length<=y+3&&(n=e[y++].trim().split(/\s+/),3==n.length)){for(u=0;3>u;u++)n[u]=10*parseFloat(n[u]);
g.box=n}e.splice(0,++y)}for(e=0;e<g.length;e++)w(g[e]);return g},d.lammpstrj=d.LAMMPSTRJ=function(e,g){var u=[],n={id:"serial",type:"atom",element:"elem",q:"charge",radius:"radius",x:"x",xu:"x",xs:"x",xsu:"x",y:"y",yu:"y",ys:"y",ysu:"y",z:"z",zu:"z",zs:"z",zsu:"z"};e=e.split(/\r?\n|\r/);for(var y=0,D=0,l=0;l<e.length-9;){for(;l<e.length;l++)if(e[l].match(/ITEM: NUMBER OF ATOMS/)&&(D=parseInt(e[l+1])),e[l].match(/ITEM: ATOMS/)){y=l+1;break}l=e[y-1].replace("ITEM: ATOMS ","").split(" ");u.push([]);
for(let N=y;N<y+D;N++){for(var B={},k={},J=e[N].split(" "),m=0;m<J.length;m++){var K=n[l[m]];null!=K&&("serial"==K?B[K]=parseInt(J[m]):"x"==K||"y"==K||"z"===K?B[K]=parseFloat(J[m]):"charge"==K||"radius"==K?k[K]=parseFloat(J[m]):B[K]=J[m]);B.properties=k;B.bonds=[];B.bondOrder=[]}u[u.length-1][N-y]=B}l=y+D-1}if(g.assignbonds)for(g=0;g<u.length;g++)x(u[g]);return u},d}();c=c||{};c.partialCharges={"ALA:N":-.15,"ALA:CA":.1,"ALA:CB":0,"ALA:C":.6,"ALA:O":-.55,"ARG:N":-.15,"ARG:CA":.1,"ARG:CB":0,"ARG:CG":0,
"ARG:CD":.1,"ARG:NE":-.1,"ARG:CZ":.5,"ARG:NH1":.25,"ARG:NH2":.25,"ARG:C":.6,"ARG:O":-.55,"ASN:N":-.15,"ASN:CA":.1,"ASN:CB":0,"ASN:CG":.55,"ASN:OD1":-.55,"ASN:ND2":0,"ASN:C":.6,"ASN:O":-.55,"ASP:N":-.15,"ASP:CA":.1,"ASP:CB":0,"ASP:CG":.14,"ASP:OD1":-.57,"ASP:OD2":-.57,"ASP:C":.6,"ASP:O":-.55,"CYS:N":-.15,"CYS:CA":.1,"CYS:CB":.19,"CYS:SG":-.19,"CYS:C":.6,"CYS:O":-.55,"GLN:N":-.15,"GLN:CA":.1,"GLN:CB":0,"GLN:CG":0,"GLN:CD":.55,"GLN:OE1":-.55,"GLN:NE2":0,"GLN:C":.6,"GLN:O":-.55,"GLU:N":-.15,"GLU:CA":.1,
"GLU:CB":0,"GLU:CG":0,"GLU:CD":.14,"GLU:OE1":-.57,"GLU:OE2":-.57,"GLU:C":.6,"GLU:O":-.55,"GLY:N":-.15,"GLY:CA":.1,"GLY:C":.6,"GLY:O":-.55,"HIS:N":-.15,"HIS:CA":.1,"HIS:CB":0,"HIS:CG":.1,"HIS:ND1":-.1,"HIS:CD2":.1,"HIS:NE2":-.4,"HIS:CE1":.3,"HIS:C":.6,"HIS:O":-.55,"ILE:N":-.15,"ILE:CA":.1,"ILE:CB":0,"ILE:CG2":0,"ILE:CG1":0,"ILE:CD":0,"ILE:C":.6,"ILE:O":-.55,"LEU:N":-.15,"LEU:CA":.1,"LEU:CB":0,"LEU:CG":0,"LEU:CD1":0,"LEU:CD2":0,"LEU:C":.6,"LEU:O":-.55,"LYS:N":-.15,"LYS:CA":.1,"LYS:CB":0,"LYS:CG":0,
"LYS:CD":0,"LYS:CE":.25,"LYS:NZ":.75,"LYS:C":.6,"LYS:O":-.55,"MET:N":-.15,"MET:CA":.1,"MET:CB":0,"MET:CG":.06,"MET:SD":-.12,"MET:CE":.06,"MET:C":.6,"MET:O":-.55,"PHE:N":-.15,"PHE:CA":.1,"PHE:CB":0,"PHE:CG":0,"PHE:CD1":0,"PHE:CD2":0,"PHE:CE1":0,"PHE:CE2":0,"PHE:CZ":0,"PHE:C":.6,"PHE:O":-.55,"PRO:N":-.25,"PRO:CD":.1,"PRO:CA":.1,"PRO:CB":0,"PRO:CG":0,"PRO:C":.6,"PRO:O":-.55,"SER:N":-.15,"SER:CA":.1,"SER:CB":.25,"SER:OG":-.25,"SER:C":.6,"SER:O":-.55,"THR:N":-.15,"THR:CA":.1,"THR:CB":.25,"THR:OG1":-.25,
"THR:CG2":0,"THR:C":.6,"THR:O":-.55,"TRP:N":-.15,"TRP:CA":.1,"TRP:CB":0,"TRP:CG":-.03,"TRP:CD2":.1,"TRP:CE2":-.04,"TRP:CE3":-.03,"TRP:CD1":.06,"TRP:NE1":-.06,"TRP:CZ2":0,"TRP:CZ3":0,"TRP:CH2":0,"TRP:C":.6,"TRP:O":-.55,"TYR:N":-.15,"TYR:CA":.1,"TYR:CB":0,"TYR:CG":0,"TYR:CD1":0,"TYR:CE1":0,"TYR:CD2":0,"TYR:CE2":0,"TYR:CZ":.25,"TYR:OH":-.25,"TYR:C":.6,"TYR:O":-.55,"VAL:N":-.15,"VAL:CA":.1,"VAL:CB":0,"VAL:CG1":0,"VAL:CG2":0,"VAL:C":.6,"VAL:O":-.55};c.applyPartialCharges=function(d,h){h&&void 0!==d.partialCharge||
!d.resn||!d.atom||(d.properties.partialCharge=c.partialCharges[d.resn+":"+d.atom])};c.VolumeData=function(d,h,q){if(this.unit={x:1,y:1,z:1},this.origin={x:0,y:0,z:0},this.size={x:0,y:0,z:0},this.data=new Float32Array([]),this.matrix=null,h=h.toLowerCase(),/\.gz$/.test(h)){h=h.replace(/\.gz$/,"");try{this[h]&&this[h].isbinary?("string"==typeof d&&(d=c.base64ToArray(d)),d=pako.inflate(d)):d=(new TextDecoder("utf-8")).decode(pako.inflate(d))}catch(x){console.log(x)}}if(this[h]&&(this[h].isbinary&&"string"==
typeof d&&(d=c.base64ToArray(d)),this[h](d)),q){if(q.negate)for(let x=0,p=this.data.length;x<p;x++)this.data[x]=-this.data[x];if(q.normalize){h=0;for(let x=0,p=this.data.length;x<p;x++)h+=this.data[x];d=h/this.data.length;console.log("computed mean: "+d);h=0;for(let x=0,p=this.data.length;x<p;x++)q=this.data[x]-d,h+=q*q;h/=this.data.length;for(let x=0,p=this.data.length;x<p;x++)this.data[x]=(this.data[x]-d)/h}}};c.VolumeData.prototype.getIndex=function(d,h,q){this.matrix?(this.inversematrix||(this.inversematrix=
(new c.Matrix4).getInverse(this.matrix)),q=new c.Vector3(d,h,q),d=(q=q.applyMatrix4(this.inversematrix)).x,h=q.y,q=q.z):(d-=this.origin.x,h-=this.origin.y,q-=this.origin.z,d/=this.unit.x,h/=this.unit.y,q/=this.unit.z);return d=Math.round(d),h=Math.round(h),q=Math.round(q),0>d||d>=this.size.x||0>h||h>=this.size.y||0>q||q>=this.size.z?-1:d*this.size.y*this.size.z+h*this.size.z+q};c.VolumeData.prototype.getVal=function(d,h,q){d=this.getIndex(d,h,q);return 0>d?0:this.data[d]};c.VolumeData.prototype.getCoordinates=
function(d){var h=d/(this.size.y*this.size.z),q=d%(this.size.y*this.size.z);d%=this.size.z;return h*=this.unit.x,q*=this.unit.y,d*=this.unit.z,{x:h+this.origin.x,y:q+this.origin.y,z:d+this.origin.z}};c.VolumeData.prototype.vasp=function(d){var h=d.replace(/^\s+/,"").split(/[\n\r]/),q=c.Parsers.vasp(d)[0].length;if(0==q)return console.log("No good formating of CHG or CHGCAR file, not atomic information provided in the file."),void(this.data=[]);var x=parseFloat(h[1]);d=h[2].replace(/^\s+/,"").split(/\s+/);
var p=(new c.Vector3(parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]))).multiplyScalar(1.889725992*x);d=h[3].replace(/^\s+/,"").split(/\s+/);var w=(new c.Vector3(parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]))).multiplyScalar(1.889725992*x);d=h[4].replace(/^\s+/,"").split(/\s+/);x=(new c.Vector3(parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2]))).multiplyScalar(1.889725992*x);d=1/(Math.abs(p.x*(w.y*x.z-x.y*w.z)-w.x*(p.y*x.z-x.y*p.z)+x.x*(p.y*w.z-w.y*p.z))/Math.pow(1.889725992,3));h.splice(0,
8+q+1);var v=h[0].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");q=Math.abs(v[0]);var C=Math.abs(v[1]);v=Math.abs(v[2]);var M=this.origin=new c.Vector3(0,0,0);this.size={x:q,y:C,z:v};this.unit=new c.Vector3(p.x,w.y,x.z);p=p.multiplyScalar(1/(1.889725992*q));w=w.multiplyScalar(1/(1.889725992*C));x=x.multiplyScalar(1/(1.889725992*v));0==p.y&&0==p.z&&0==w.x&&0==w.z&&0==x.x&&0==x.y||(this.matrix=new c.Matrix4(p.x,w.x,x.x,0,p.y,w.y,x.y,0,p.z,w.z,x.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,
(new c.Matrix4).makeTranslation(M.x,M.y,M.z)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1));h.splice(0,1);h=h.join(" ");(h=(h=h.replace(/^\s+/,"")).split(/[\s\r]+/)).splice(q*C*v+1);h=new Float32Array(h);for(p=0;p<h.length;p++)h[p]=h[p]*d*.036749309;this.data=h};c.VolumeData.prototype.dx=function(d){var h,q=d.split(/[\n\r]+/),x=/gridpositions\s+counts\s+(\d+)\s+(\d+)\s+(\d+)/,p=/^origin\s+(\S+)\s+(\S+)\s+(\S+)/,w=/^delta\s+(\S+)\s+(\S+)\s+(\S+)/,v=/data follows/;for(d=0;d<q.length;d++){var C=
q[d];if(h=x.exec(C)){var M=parseInt(h[1]),L=parseInt(h[2]);h=parseInt(h[3]);this.size={x:M,y:L,z:h}}else if(h=w.exec(C)){M=parseFloat(h[1]);if(0==parseFloat(h[2])&&0==parseFloat(h[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),C=q[d+=1],null==(h=w.exec(C)))return void console.log("Parse error in dx delta matrix");L=parseFloat(h[2]);if(0==parseFloat(h[1])&&0==parseFloat(h[3])||console.log("Non-orthogonal delta matrix not currently supported in dx format"),C=q[d+=
1],null==(h=w.exec(C)))return void console.log("Parse error in dx delta matrix");C=parseFloat(h[3]);0==parseFloat(h[1])&&0==parseFloat(h[2])||console.log("Non-orthogonal delta matrix not currently supported in dx format");this.unit=new c.Vector3(M,L,C)}else if(h=p.exec(C))M=parseFloat(h[1]),L=parseFloat(h[2]),h=parseFloat(h[3]),this.origin=new c.Vector3(M,L,h);else if(v.exec(C))break}(d+=1,this.size&&this.origin&&this.unit&&this.size)?(d=q.splice(d).join(" "),d=d.split(/[\s\r]+/),this.data=new Float32Array(d)):
console.log("Error parsing dx format")};c.VolumeData.prototype.cube=function(d){d=d.replace(/^\s+/,"").split(/[\n\r]+/);if(!(6>d.length)){var h=d[2].replace(/^\s+/,"").replace(/\s+/g," ").split(" "),q=parseFloat(h[0]),x=Math.abs(q),p=this.origin=new c.Vector3(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])),w=0<(h=d[3].replace(/^\s+/,"").replace(/\s+/g," ").split(" "))[0]?.529177:1;p.multiplyScalar(w);var v=Math.abs(h[0]),C=(new c.Vector3(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]))).multiplyScalar(w);
h=d[4].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var M=Math.abs(h[0]),L=(new c.Vector3(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]))).multiplyScalar(w);h=d[5].replace(/^\s+/,"").replace(/\s+/g," ").split(" ");var P=Math.abs(h[0]);h=(new c.Vector3(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3]))).multiplyScalar(w);this.size={x:v,y:M,z:P};this.unit=new c.Vector3(C.x,L.y,h.z);0==C.y&&0==C.z&&0==L.x&&0==L.z&&0==h.x&&0==h.y||(this.matrix=new c.Matrix4(C.x,L.x,h.x,0,C.y,L.y,h.y,0,C.z,L.z,
h.z,0,0,0,0,1),this.matrix=this.matrix.multiplyMatrices(this.matrix,(new c.Matrix4).makeTranslation(p.x,p.y,p.z)),this.origin=new c.Vector3(0,0,0),this.unit=new c.Vector3(1,1,1));p=6;0>q&&p++;d=d.splice(x+p).join(" ");d=(d=d.replace(/^\s+/,"")).split(/[\s\r]+/);this.data=new Float32Array(d)}};c.VolumeData.prototype.ccp4=function(d){var h,q;d=new Int8Array(d);var x=new Int32Array(d.buffer,0,56);var p=new Float32Array(d.buffer,0,56);var w=new DataView(d.buffer);if(String.fromCharCode(w.getUint8(208),
w.getUint8(209),w.getUint8(210),w.getUint8(211)),h=[w.getUint8(212),w.getUint8(213)],17===h[0]&&17===h[1])for(h=d.byteLength,q=0;q<h;q+=4)w.setFloat32(q,w.getFloat32(q),!0);w=x[0];h=x[1];q=x[2];var v=x[4];var C=x[5];var M=x[6];var L=x[7];var P=x[8];var e=x[9];var g=p[10];var u=p[11];var n=p[12];var y=p[13];var D=p[14];var l=p[15];var B=x[16];var k=x[17];var J=x[18];x=x[23];var m=p[49];var K=p[50];p=p[51];g=[g,0,0];u=[u*Math.cos(Math.PI/180*l),u*Math.sin(Math.PI/180*l),0];y=[n*Math.cos(Math.PI/180*
D),n*(Math.cos(Math.PI/180*y)-Math.cos(Math.PI/180*l)*Math.cos(Math.PI/180*D))/Math.sin(Math.PI/180*l),0];y[2]=Math.sqrt(n*n*Math.sin(Math.PI/180*D)*Math.sin(Math.PI/180*D)-y[1]*y[1]);n=[0,g,u,y];L=[0,L,P,e];P=[0,B,k,J];this.matrix=new c.Matrix4;this.matrix.set(n[P[1]][0]/L[P[1]],n[P[2]][0]/L[P[2]],n[P[3]][0]/L[P[3]],0,n[P[1]][1]/L[P[1]],n[P[2]][1]/L[P[2]],n[P[3]][1]/L[P[3]],0,n[P[1]][2]/L[P[1]],n[P[2]][2]/L[P[2]],n[P[3]][2]/L[P[3]],0,0,0,0,1);this.matrix=this.matrix.multiplyMatrices(this.matrix,
(new c.Matrix4).makeTranslation(v+m,C+K,M+p));this.origin=new c.Vector3(0,0,0);this.unit=new c.Vector3(1,1,1);this.size={x:w,y:h,z:q};this.dimensionorder=[B,k,J];d=new Float32Array(d.buffer,1024+x);this.data=new Float32Array(w*h*q);for(v=0;v<w;v++)for(C=0;C<h;C++)for(M=0;M<q;M++)this.data[(v*h+C)*q+M]=d[(M*h+C)*w+v]};c.VolumeData.prototype.ccp4.isbinary=!0;c.GLVolumetricRender=function(){function d(q,x){var p=[],w=(q.length-1)/(x-1);p[0]=q[0];for(var v=1;v<x-1;v++){var C=v*w,M=Math.floor(C).toFixed(),
L=Math.ceil(C).toFixed(),P=q[M];p[v]=P+(q[L]-P)*(C-M)}return p[x-1]=q[q.length-1],p}function h(q,x){x=x||{};var p=Object.assign([],x.transferfn),w=null,v=null,C=x.subsamples||5,M=[];p.forEach(function(H){H.value=parseFloat(H.value)});p.sort(function(H,V){return H.value-V.value});let L=p[0].value;0==p.length&&p.push(p[0]);let P=p[p.length-1].value;var e,g,u,n,y,D;for(var l=0;l<p.length-1;l++)if(u=c.CC.color(p[l].color),n=c.CC.color(p[l+1].color),y=p[l].opacity,D=p[l+1].opacity,(e=Math.floor(256*(p[l].value-
L)/(P-L)))!=(g=Math.floor(256*(p[l+1].value-L)/(P-L)))){var B=d([255*u.r,255*n.r],g-e);var k=d([255*u.g,255*n.g],g-e);u=d([255*u.b,255*n.b],g-e);e=d([255*y,255*D],g-e);for(g=0;g<B.length;g++)M.push(B[g]),M.push(k[g]),M.push(u[g]),M.push(e[g])}M=new Uint8ClampedArray(M);var J=(new c.Matrix4).identity();p=q.unit.x*q.size.x;B=q.unit.y*q.size.y;k=q.unit.z*q.size.z;J.makeTranslation(-q.origin.x/p,-q.origin.y/B,-q.origin.z/k);J.scale({x:1/p,y:1/B,z:1/k});var m=Math.min(Math.min(q.unit.x,q.unit.y),q.unit.z),
K=[[q.origin.x,q.origin.y,q.origin.z],[q.origin.x+p,q.origin.y+B,q.origin.z+k]],N=Math.sqrt(p*p+B*B+k*k);l=new c.GLShape;q.matrix?console.log("ERROR: Non-orthonombic boxes (or file formats that specify transformation matrices) are not supported with volumetric rendering yet."):l.addBox({corner:q.origin,dimensions:{w:p,h:B,d:k}});var Q=l.finalize();this.boundingSphere=new c.Sphere;this.boundingSphere.center={x:q.origin.x+p/2,y:q.origin.y+B/2,z:q.origin.z+k/2};this.boundingSphere.radius=Math.sqrt(p*
p+B*B+k*k)/2;void 0!==x.coords&&x.seldist;this.globj=function(H){if(v&&(H.remove(v),v=null),!this.hidden){w=new c.Object3D;var V=new c.Texture(q,!0);var W=new c.Texture(M,!1);V.needsUpdate=!0;W.needsUpdate=!0;W.flipY=!1;V=new c.VolumetricMaterial({transferfn:W,transfermin:L,transfermax:P,map:V,extent:K,maxdepth:N,texmatrix:J,unit:m,subsamples:C});V=new c.Mesh(Q,V);w.add(V);v=w.clone();H.add(v)}};this.removegl=function(H){v&&(void 0!==v.geometry&&v.geometry.dispose(),void 0!==v.material&&v.material.dispose(),
H.remove(v),v=null);w=null}}return Object.defineProperty(h.prototype,"position",{get:function(){return this.boundingSphere.center}}),Object.defineProperty(h.prototype,"x",{get:function(){return this.boundingSphere.center.x}}),Object.defineProperty(h.prototype,"y",{get:function(){return this.boundingSphere.center.y}}),Object.defineProperty(h.prototype,"z",{get:function(){return this.boundingSphere.center.z}}),h}();c.workerString=function(){self.onmessage=function(d){d=d.data;var h=d.type;if(0>h)self.atomData=
d.atoms,self.volume=d.volume,self.ps=new ProteinSurface;else{var q=self.ps;q.initparm(d.expandedExtent,1!=h,self.volume);q.fillvoxels(self.atomData,d.extendedAtoms);q.buildboundary();4!==h&&2!==h||(q.fastdistancemap(),q.boundingatom(!1),q.fillvoxelswaals(self.atomData,d.extendedAtoms));q.marchingcube(h);d=q.getFacesAndVertices(d.atomsToShow);self.postMessage(d)}}}.toString().replace(/(^.*?\{|\}$)/g,"");c.workerString+="; var ProteinSurface="+c.ProteinSurface.toString().replace(/[a-zA-Z_$]{1}[0-9a-zA-Z_$]*.MarchingCube./g,
"MarchingCube.");c.workerString+=",MarchingCube=("+c.MarchingCubeInitializer.toString()+")();";c.SurfaceWorker=window.URL?window.URL.createObjectURL(new Blob([c.workerString],{type:"text/javascript"})):{postMessage:function(){}};c.workerString=c.workerString;c.SurfaceWorker=c.SurfaceWorker}).call(this,Id("VS3o"),Id("EVdn"))}}]);
