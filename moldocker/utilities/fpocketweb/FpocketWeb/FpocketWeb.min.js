/**
 * FPocketWeb Copyright 2019 Jacob Durrant
 *
 * Licensed under the Apache License, Version 2.0 (the License);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an AS IS BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var VERSION="1.0.0";console.log("FPocketWeb");console.log("    Compiled from the Fpocket codebase:");console.log("    https://github.com/Discngine/fpocket");
var FPOCKET_Module,decodeBase64="function"==typeof atob?atob:function(a){var c,b,e,f,g,h,k="",d=0;for(a=a.replace(/[^A-Za-z0-9\+\/=]/g,"");c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++))<<2|(f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)))>>4,b=(15&f)<<4|(g="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++)))>>2,e=(3&g)<<6|(h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a.charAt(d++))),
k+=String.fromCharCode(c),64!==g&&(k+=String.fromCharCode(b)),64!==h&&(k+=String.fromCharCode(e)),d<a.length;)return k},FpocketWeb=function(){return{FPOCKET_ENVIRONMENT_IS_NODE:window.FPOCKET_ENVIRONMENT_IS_NODE,FPOCKET_lengthBytesUTF8:window.FPOCKET_lengthBytesUTF8,FPOCKET_stringToUTF8Array:window.FPOCKET_stringToUTF8Array,FPOCKET_assert:window.FPOCKET_assert,FPOCKET_ASSERTIONS:1,FPOCKET_DATA_URI_PREFIX:"data:application/octet-stream;base64,",FPOCKET_BASE_URL:"./",FS:window.FS,start:function(a,c,
b,e,f){var g="\nFPOCKET\n======\n\n";void 0!==f?("/"!==f.slice(f.length-1)&&(f+="/"),this.FPOCKET_BASE_URL=f,g+="User specified baseUrl: "+f+"\n"):g+="No baseUrl specified, so using ./\n\nUse FpocketWeb.start() to specify the baseUrl:\n    function start(fpocketParams, pdbFile, \n                   onDone, \n                   onError, baseUrl)\n";g+="\nExpecting files at the following locations:\n";for(var h=0;4>h;h++)g+="    "+(void 0===f?"./":f)+["FpocketWeb.min.min.js","fpocket.min.min.js","fpocket.wasm",
"fpocket.data"][h]+"\n";g+="\n";void 0!==f?console.log(g):console.warn(g);void 0===e&&(e=function(){console.log("FPocketWeb encountered an error! Does your browser support WebAssembly?")});FPOCKET_Module={preRun:[],postRun:[],stdOut:"",stdErr:"",print:function(){return function(d){1<arguments.length&&(d=Array.prototype.slice.call(arguments).join(" "));window.FPOCKET_Module.stdOut+=d+"\n"}}(),printErr:function(d){1<arguments.length&&(d=Array.prototype.slice.call(arguments).join(" "));window.FPOCKET_Module.stdErr+=
d+"\n"},setStatus:function(d){if(""===d&&void 0!==b){var l=window.store.state.pdbFileNameTrimmed;d=(new TextDecoder("utf-8")).decode(window.FS.readFile("/"+l+"_out/"+l+"_out.pdb"));var m=window.FPOCKET_Module.stdOut,n=window.FPOCKET_Module.stdErr;l=(new TextDecoder("utf-8")).decode(window.FS.readFile("/"+l+"_out/"+l+"_pockets.pqr"));b(d,m,n,l)}},onError:e,catchError:function(d){e(d)},pdbFile:c};void 0!==a.pdbFile&&console.warn("FPocketWeb does not support Vina's --receptor parameter. Instead, pass the content of the receptor file as a string to the webina.start() function.");
FPOCKET_Module.arguments=["-f",window.store.state.pdbFileName];c=Object.keys(a);f=c.length;for(h=0;h<f;h++){g=c[h];var k=a[g];FPOCKET_Module.arguments.push("--"+g);"boolean"!==typeof k&&FPOCKET_Module.arguments.push(String(k))}window.FPOCKET_Module=FPOCKET_Module;a=document.createElement("script");a.src=this.FPOCKET_BASE_URL+"fpocket.min.js";document.body.appendChild(a)},isDataURI:function(a){return!0},intArrayFromBase64:function(a){if("boolean"==typeof this.FPOCKET_ENVIRONMENT_IS_NODE&&this.FPOCKET_ENVIRONMENT_IS_NODE){try{var c=
Buffer.from(a,"base64")}catch(f){c=new Buffer(a,"base64")}return new Uint8Array(c.buffer,c.byteOffset,c.byteLength)}try{var b=decodeBase64(a),e=new Uint8Array(b.length);for(a=0;a<b.length;++a)e[a]=b.charCodeAt(a);return e}catch(f){throw Error("Converting base64 string to bytes failed.");}},tryParseAsDataURI:function(a){if(this.isDataURI(a))return this.intArrayFromBase64(a.slice(this.FPOCKET_DATA_URI_PREFIX.length))},intArrayFromString:function(a,c,b){b=0<b?b:this.FPOCKET_lengthBytesUTF8(a)+1;b=Array(b);
a=this.FPOCKET_stringToUTF8Array(a,b,0,b.length);return c&&(b.length=a),b},intArrayToString:function(a){for(var c=[],b=0;b<a.length;b++){var e=a[b];255<e&&(this.FPOCKET_ASSERTIONS&&this.FPOCKET_assert(!1,"Character code "+e+" ("+String.fromCharCode(e)+")  at offset "+b+" not in 0x00-0xFF."),e&=255);c.push(String.fromCharCode(e))}return c.join("")}}}();
